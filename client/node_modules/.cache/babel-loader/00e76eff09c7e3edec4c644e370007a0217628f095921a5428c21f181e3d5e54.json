{"ast":null,"code":"import React,{useEffect}from'react';import{Routes,Route,Navigate,useLocation}from'react-router-dom';import{useAuth}from'./context/AuthContext';import'./App.css';// Composants protégés\nimport Layout from'./components/common/Layout';import Login from'./components/auth/Login';import NotFound from'./components/common/NotFound';import Dashboard from'./components/dashboard/Dashboard';import ProgrammersList from'./components/programmers/ProgrammersList';import ProgrammerDetail from'./components/programmers/ProgrammerDetail';import ConcertsList from'./components/concerts/ConcertsList';import ConcertDetail from'./components/concerts/ConcertDetail';import ArtistsList from'./components/artists/ArtistsList';import ArtistDetail from'./components/artists/ArtistDetail';import EmailSystem from'./components/emails/EmailSystem';import DocumentsManager from'./components/documents/DocumentsManager';import TestFirebaseIntegration from'./components/tests/TestFirebaseIntegration';import ArtistEdit from'./components/artists/ArtistEdit';import ContractsTable from'./components/contracts/ContractsTable';import FormValidationList from'./components/formValidation/FormValidationList';// Composants publics (affichés sans authentification)\n// Note: Ces routes sont maintenues ici pour compatibilité, mais elles sont gérées directement dans index.js\nimport PublicFormPage from'./components/public/PublicFormPage';import FormSubmittedPage from'./components/public/FormSubmittedPage';// Composant ProtectedRoute pour sécuriser les routes privées\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children}=_ref;const{isAuthenticated,loading,bypassEnabled}=useAuth();const location=useLocation();// Logs de débogage\nuseEffect(()=>{console.log('ProtectedRoute - Route actuelle (hash):',location.hash);console.log('ProtectedRoute - Route actuelle (pathname):',location.pathname);console.log('ProtectedRoute - Utilisateur authentifié:',isAuthenticated);console.log('ProtectedRoute - Bypass activé:',bypassEnabled);},[location.hash,location.pathname,isAuthenticated,bypassEnabled]);if(loading){console.log('ProtectedRoute - Chargement en cours...');return/*#__PURE__*/_jsx(\"div\",{children:\"Chargement...\"});}if(bypassEnabled){console.log('ProtectedRoute - Mode bypass d\\'authentification activé - Accès autorisé');return children;}if(!isAuthenticated){console.log('ProtectedRoute - Utilisateur non authentifié, redirection vers /login');return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}console.log('ProtectedRoute - Utilisateur authentifié, accès autorisé');return children;};function App(){const{bypassEnabled,isAuthenticated}=useAuth();const location=useLocation();// Logs de débogage\nuseEffect(()=>{console.log('App - Rendu avec:');console.log('App - Route actuelle (hash):',location.hash);console.log('App - Route actuelle (pathname):',location.pathname);console.log('App - URL complète:',window.location.href);console.log('App - Utilisateur authentifié:',isAuthenticated);console.log('App - Bypass activé:',bypassEnabled);},[location.hash,location.pathname,isAuthenticated,bypassEnabled]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/form/:concertId\",element:/*#__PURE__*/_jsx(PublicFormPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/form-submitted\",element:/*#__PURE__*/_jsx(FormSubmittedPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:bypassEnabled?/*#__PURE__*/_jsx(Navigate,{to:\"/\"}):/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsxs(Route,{path:\"/\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Layout,{})}),children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"contrats\",element:/*#__PURE__*/_jsx(ContractsTable,{})}),/*#__PURE__*/_jsx(Route,{path:\"factures\",element:/*#__PURE__*/_jsx(\"div\",{children:\"Module Factures \\xE0 venir\"})}),/*#__PURE__*/_jsx(Route,{path:\"programmateurs\",element:/*#__PURE__*/_jsx(ProgrammersList,{})}),/*#__PURE__*/_jsx(Route,{path:\"programmateurs/:id\",element:/*#__PURE__*/_jsx(ProgrammerDetail,{})}),/*#__PURE__*/_jsx(Route,{path:\"concerts\",element:/*#__PURE__*/_jsx(ConcertsList,{})}),/*#__PURE__*/_jsx(Route,{path:\"concerts/:id\",element:/*#__PURE__*/_jsx(ConcertDetail,{})}),/*#__PURE__*/_jsx(Route,{path:\"artistes\",element:/*#__PURE__*/_jsx(ArtistsList,{})}),/*#__PURE__*/_jsx(Route,{path:\"artistes/:id\",element:/*#__PURE__*/_jsx(ArtistDetail,{})}),/*#__PURE__*/_jsx(Route,{path:\"emails\",element:/*#__PURE__*/_jsx(EmailSystem,{})}),/*#__PURE__*/_jsx(Route,{path:\"documents\",element:/*#__PURE__*/_jsx(DocumentsManager,{})}),/*#__PURE__*/_jsx(Route,{path:\"validation-formulaires\",element:/*#__PURE__*/_jsx(FormValidationList,{})}),/*#__PURE__*/_jsx(Route,{path:\"tests\",element:/*#__PURE__*/_jsx(TestFirebaseIntegration,{})})]}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(NotFound,{})})]}),bypassEnabled&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',bottom:0,left:0,right:0,backgroundColor:'#fff3cd',color:'#856404',padding:'10px',textAlign:'center',borderTop:'1px solid #ffeeba',zIndex:1000},children:\"Mode test activ\\xE9 - Authentification d\\xE9sactiv\\xE9e\"})]});}export default App;","map":{"version":3,"names":["React","useEffect","Routes","Route","Navigate","useLocation","useAuth","Layout","Login","NotFound","Dashboard","ProgrammersList","ProgrammerDetail","ConcertsList","ConcertDetail","ArtistsList","ArtistDetail","EmailSystem","DocumentsManager","TestFirebaseIntegration","ArtistEdit","ContractsTable","FormValidationList","PublicFormPage","FormSubmittedPage","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","children","isAuthenticated","loading","bypassEnabled","location","console","log","hash","pathname","to","App","window","href","className","path","element","index","style","position","bottom","left","right","backgroundColor","color","padding","textAlign","borderTop","zIndex"],"sources":["/workspaces/app-booking/client/src/App.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { Routes, Route, Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from './context/AuthContext';\nimport './App.css';\n\n// Composants protégés\nimport Layout from './components/common/Layout';\nimport Login from './components/auth/Login';\nimport NotFound from './components/common/NotFound';\nimport Dashboard from './components/dashboard/Dashboard';\nimport ProgrammersList from './components/programmers/ProgrammersList';\nimport ProgrammerDetail from './components/programmers/ProgrammerDetail';\nimport ConcertsList from './components/concerts/ConcertsList';\nimport ConcertDetail from './components/concerts/ConcertDetail';\nimport ArtistsList from './components/artists/ArtistsList';\nimport ArtistDetail from './components/artists/ArtistDetail';\nimport EmailSystem from './components/emails/EmailSystem';\nimport DocumentsManager from './components/documents/DocumentsManager';\nimport TestFirebaseIntegration from './components/tests/TestFirebaseIntegration';\nimport ArtistEdit from './components/artists/ArtistEdit';\nimport ContractsTable from './components/contracts/ContractsTable';\nimport FormValidationList from './components/formValidation/FormValidationList';\n\n// Composants publics (affichés sans authentification)\n// Note: Ces routes sont maintenues ici pour compatibilité, mais elles sont gérées directement dans index.js\nimport PublicFormPage from './components/public/PublicFormPage';\nimport FormSubmittedPage from './components/public/FormSubmittedPage';\n\n// Composant ProtectedRoute pour sécuriser les routes privées\nconst ProtectedRoute = ({ children }) => {\n  const { isAuthenticated, loading, bypassEnabled } = useAuth();\n  const location = useLocation();\n  \n  // Logs de débogage\n  useEffect(() => {\n    console.log('ProtectedRoute - Route actuelle (hash):', location.hash);\n    console.log('ProtectedRoute - Route actuelle (pathname):', location.pathname);\n    console.log('ProtectedRoute - Utilisateur authentifié:', isAuthenticated);\n    console.log('ProtectedRoute - Bypass activé:', bypassEnabled);\n  }, [location.hash, location.pathname, isAuthenticated, bypassEnabled]);\n\n  if (loading) {\n    console.log('ProtectedRoute - Chargement en cours...');\n    return <div>Chargement...</div>;\n  }\n  \n  if (bypassEnabled) {\n    console.log('ProtectedRoute - Mode bypass d\\'authentification activé - Accès autorisé');\n    return children;\n  }\n\n  if (!isAuthenticated) {\n    console.log('ProtectedRoute - Utilisateur non authentifié, redirection vers /login');\n    return <Navigate to=\"/login\" />;\n  }\n  \n  console.log('ProtectedRoute - Utilisateur authentifié, accès autorisé');\n  return children;\n};\n\nfunction App() {\n  const { bypassEnabled, isAuthenticated } = useAuth();\n  const location = useLocation();\n  \n  // Logs de débogage\n  useEffect(() => {\n    console.log('App - Rendu avec:');\n    console.log('App - Route actuelle (hash):', location.hash);\n    console.log('App - Route actuelle (pathname):', location.pathname);\n    console.log('App - URL complète:', window.location.href);\n    console.log('App - Utilisateur authentifié:', isAuthenticated);\n    console.log('App - Bypass activé:', bypassEnabled);\n  }, [location.hash, location.pathname, isAuthenticated, bypassEnabled]);\n\n  return (\n    <div className=\"App\">\n      <Routes>\n        {/* Routes publiques - maintenues pour compatibilité mais gérées dans index.js */}\n        <Route path=\"/form/:concertId\" element={<PublicFormPage />} />\n        <Route path=\"/form-submitted\" element={<FormSubmittedPage />} />\n\n        <Route path=\"/login\" element={\n          bypassEnabled ? <Navigate to=\"/\" /> : <Login />\n        } />\n        \n        {/* Routes protégées accessibles uniquement aux utilisateurs authentifiés */}\n        <Route path=\"/\" element={<ProtectedRoute><Layout /></ProtectedRoute>}>\n          <Route index element={<Dashboard />} />\n          <Route path=\"contrats\" element={<ContractsTable />} />\n          <Route path=\"factures\" element={<div>Module Factures à venir</div>} />\n          <Route path=\"programmateurs\" element={<ProgrammersList />} />\n          <Route path=\"programmateurs/:id\" element={<ProgrammerDetail />} />\n          <Route path=\"concerts\" element={<ConcertsList />} />\n          <Route path=\"concerts/:id\" element={<ConcertDetail />} />\n          <Route path=\"artistes\" element={<ArtistsList />} />\n          <Route path=\"artistes/:id\" element={<ArtistDetail />} />\n          <Route path=\"emails\" element={<EmailSystem />} />\n          <Route path=\"documents\" element={<DocumentsManager />} />\n          <Route path=\"validation-formulaires\" element={<FormValidationList />} />\n          <Route path=\"tests\" element={<TestFirebaseIntegration />} />\n        </Route>\n        \n        <Route path=\"*\" element={<NotFound />} />\n      </Routes>\n\n      {bypassEnabled && (\n        <div style={{\n          position: 'fixed',\n          bottom: 0,\n          left: 0,\n          right: 0,\n          backgroundColor: '#fff3cd',\n          color: '#856404',\n          padding: '10px',\n          textAlign: 'center',\n          borderTop: '1px solid #ffeeba',\n          zIndex: 1000\n        }}>\n          Mode test activé - Authentification désactivée\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}