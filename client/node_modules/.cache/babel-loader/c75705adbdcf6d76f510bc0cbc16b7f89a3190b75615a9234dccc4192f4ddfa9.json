{"ast":null,"code":"import React from'react';import{Routes,Route,Navigate}from'react-router-dom';import{useAuth}from'./context/AuthContext';import'./App.css';// Composants\nimport Layout from'./components/common/Layout';import Login from'./components/auth/Login';import NotFound from'./components/common/NotFound';import Dashboard from'./components/dashboard/Dashboard';import ProgrammersList from'./components/programmers/ProgrammersList';import ProgrammerDetail from'./components/programmers/ProgrammerDetail';import ConcertsList from'./components/concerts/ConcertsList';import ConcertDetail from'./components/concerts/ConcertDetail';import ArtistsList from'./components/artists/ArtistsList';import ArtistDetail from'./components/artists/ArtistDetail';import EmailSystem from'./components/emails/EmailSystem';import DocumentsManager from'./components/documents/DocumentsManager';import TestFirebaseIntegration from'./components/tests/TestFirebaseIntegration';import ArtistEdit from'./components/artists/ArtistEdit';import ContractsTable from'./components/contracts/ContractsTable';import FormValidationList from'./components/formValidation/FormValidationList';// Importation directe des composants publics pour éviter les problèmes d'importation conditionnelle\nimport PublicFormPage from'./components/public/PublicFormPage';import FormSubmittedPage from'./components/public/FormSubmittedPage';// Route protégée\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children}=_ref;const{isAuthenticated,loading,bypassEnabled}=useAuth();if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Chargement...\"});}// Si le mode bypass est activé, on autorise l'accès même sans authentification\nif(bypassEnabled){console.log('Mode bypass d\\'authentification activé - Accès autorisé');return children;}if(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}return children;};function App(){const{bypassEnabled}=useAuth();console.log('App component rendered');return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/form/:token\",element:/*#__PURE__*/_jsx(PublicFormPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/form-submitted\",element:/*#__PURE__*/_jsx(FormSubmittedPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:bypassEnabled?/*#__PURE__*/_jsx(Navigate,{to:\"/\"}):/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsxs(Route,{path:\"/\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Layout,{})}),children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"contrats\",element:/*#__PURE__*/_jsx(ContractsTable,{})}),/*#__PURE__*/_jsx(Route,{path:\"factures\",element:/*#__PURE__*/_jsx(\"div\",{children:\"Module Factures \\xE0 venir\"})}),/*#__PURE__*/_jsx(Route,{path:\"programmateurs\",element:/*#__PURE__*/_jsx(ProgrammersList,{})}),/*#__PURE__*/_jsx(Route,{path:\"programmateurs/:id\",element:/*#__PURE__*/_jsx(ProgrammerDetail,{})}),/*#__PURE__*/_jsx(Route,{path:\"concerts\",element:/*#__PURE__*/_jsx(ConcertsList,{})}),/*#__PURE__*/_jsx(Route,{path:\"concerts/:id\",element:/*#__PURE__*/_jsx(ConcertDetail,{})}),/*#__PURE__*/_jsx(Route,{path:\"artistes\",element:/*#__PURE__*/_jsx(ArtistsList,{})}),/*#__PURE__*/_jsx(Route,{path:\"artistes/:id\",element:/*#__PURE__*/_jsx(ArtistDetail,{})}),/*#__PURE__*/_jsx(Route,{path:\"emails\",element:/*#__PURE__*/_jsx(EmailSystem,{})}),/*#__PURE__*/_jsx(Route,{path:\"documents\",element:/*#__PURE__*/_jsx(DocumentsManager,{})}),/*#__PURE__*/_jsx(Route,{path:\"validation-formulaires\",element:/*#__PURE__*/_jsx(FormValidationList,{})}),/*#__PURE__*/_jsx(Route,{path:\"tests\",element:/*#__PURE__*/_jsx(TestFirebaseIntegration,{})})]}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(NotFound,{})})]}),bypassEnabled&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',bottom:0,left:0,right:0,backgroundColor:'#fff3cd',color:'#856404',padding:'10px',textAlign:'center',borderTop:'1px solid #ffeeba',zIndex:1000},children:\"Mode test activ\\xE9 - Authentification d\\xE9sactiv\\xE9e\"})]});}export default App;","map":{"version":3,"names":["React","Routes","Route","Navigate","useAuth","Layout","Login","NotFound","Dashboard","ProgrammersList","ProgrammerDetail","ConcertsList","ConcertDetail","ArtistsList","ArtistDetail","EmailSystem","DocumentsManager","TestFirebaseIntegration","ArtistEdit","ContractsTable","FormValidationList","PublicFormPage","FormSubmittedPage","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","children","isAuthenticated","loading","bypassEnabled","console","log","to","App","className","path","element","index","style","position","bottom","left","right","backgroundColor","color","padding","textAlign","borderTop","zIndex"],"sources":["/workspaces/app-booking/client/src/App.js"],"sourcesContent":["import React from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\nimport { useAuth } from './context/AuthContext';\nimport './App.css';\n\n// Composants\nimport Layout from './components/common/Layout';\nimport Login from './components/auth/Login';\nimport NotFound from './components/common/NotFound';\nimport Dashboard from './components/dashboard/Dashboard';\nimport ProgrammersList from './components/programmers/ProgrammersList';\nimport ProgrammerDetail from './components/programmers/ProgrammerDetail';\nimport ConcertsList from './components/concerts/ConcertsList';\nimport ConcertDetail from './components/concerts/ConcertDetail';\nimport ArtistsList from './components/artists/ArtistsList';\nimport ArtistDetail from './components/artists/ArtistDetail';\nimport EmailSystem from './components/emails/EmailSystem';\nimport DocumentsManager from './components/documents/DocumentsManager';\nimport TestFirebaseIntegration from './components/tests/TestFirebaseIntegration';\nimport ArtistEdit from './components/artists/ArtistEdit';\nimport ContractsTable from './components/contracts/ContractsTable';\nimport FormValidationList from './components/formValidation/FormValidationList';\n\n// Importation directe des composants publics pour éviter les problèmes d'importation conditionnelle\nimport PublicFormPage from './components/public/PublicFormPage';\nimport FormSubmittedPage from './components/public/FormSubmittedPage';\n\n// Route protégée\nconst ProtectedRoute = ({ children }) => {\n  const { isAuthenticated, loading, bypassEnabled } = useAuth();\n  \n  if (loading) {\n    return <div>Chargement...</div>;\n  }\n  \n  // Si le mode bypass est activé, on autorise l'accès même sans authentification\n  if (bypassEnabled) {\n    console.log('Mode bypass d\\'authentification activé - Accès autorisé');\n    return children;\n  }\n  \n  if (!isAuthenticated) {\n    return <Navigate to=\"/login\" />;\n  }\n  \n  return children;\n};\n\nfunction App() {\n  const { bypassEnabled } = useAuth();\n\n  console.log('App component rendered');\n\n  return (\n    <div className=\"App\">\n      <Routes>\n        {/* Routes publiques pour les formulaires - HORS AUTHENTIFICATION */}\n        {/* Ces routes doivent être définies AVANT les routes protégées pour éviter les conflits */}\n        <Route path=\"/form/:token\" element={<PublicFormPage />} />\n        <Route path=\"/form-submitted\" element={<FormSubmittedPage />} />\n        \n        {/* Si le mode bypass est activé, la page de login redirige vers le dashboard */}\n        <Route path=\"/login\" element={\n          bypassEnabled ? <Navigate to=\"/\" /> : <Login />\n        } />\n        \n        {/* Routes protégées */}\n        <Route path=\"/\" element={\n          <ProtectedRoute>\n            <Layout />\n          </ProtectedRoute>\n        }>\n          <Route index element={<Dashboard />} />\n          <Route path=\"contrats\" element={<ContractsTable />} />\n          <Route path=\"factures\" element={<div>Module Factures à venir</div>} />\n          <Route path=\"programmateurs\" element={<ProgrammersList />} />\n          <Route path=\"programmateurs/:id\" element={<ProgrammerDetail />} />\n          <Route path=\"concerts\" element={<ConcertsList />} />\n          <Route path=\"concerts/:id\" element={<ConcertDetail />} />\n          <Route path=\"artistes\" element={<ArtistsList />} />\n          <Route path=\"artistes/:id\" element={<ArtistDetail />} />\n          <Route path=\"emails\" element={<EmailSystem />} />\n          <Route path=\"documents\" element={<DocumentsManager />} />\n          <Route path=\"validation-formulaires\" element={<FormValidationList />} />\n          <Route path=\"tests\" element={<TestFirebaseIntegration />} />\n        </Route>\n        \n        {/* Route de fallback pour les URLs non reconnues */}\n        <Route path=\"*\" element={<NotFound />} />\n      </Routes>\n      \n      {/* Bannière d'information sur le mode bypass */}\n      {bypassEnabled && (\n        <div style={{\n          position: 'fixed',\n          bottom: 0,\n          left: 0,\n          right: 0,\n          backgroundColor: '#fff3cd',\n          color: '#856404',\n          padding: '10px',\n          textAlign: 'center',\n          borderTop: '1px solid #ffeeba',\n          zIndex: 1000\n        }}>\n          Mode test activé - Authentification désactivée\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}