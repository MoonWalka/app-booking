{"ast":null,"code":"var _jsxFileName = \"/workspaces/app-booking/client/src/components/formValidation/FormValidationList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { getFormSubmissions, getPendingFormSubmissions, updateFormSubmissionStatus, updateFormSubmissionWithProgrammerData, getFormSubmissionsStats } from '../../services/formSubmissionsService';\nimport ComparisonTable from './ComparisonTable';\nimport './FormValidationList.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FormValidationList = () => {\n  _s();\n  const [submissions, setSubmissions] = useState([]);\n  const [pendingSubmissions, setPendingSubmissions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedSubmission, setSelectedSubmission] = useState(null);\n  const [showComparisonTable, setShowComparisonTable] = useState(false);\n  const [stats, setStats] = useState({\n    total: 0,\n    pendingCount: 0,\n    statusCounts: {},\n    withCommonToken: 0,\n    withoutCommonToken: 0\n  });\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        console.log('FormValidationList - Chargement des soumissions...');\n\n        // Récupérer toutes les soumissions\n        const allSubmissions = await getFormSubmissions();\n        setSubmissions(allSubmissions);\n\n        // Récupérer les soumissions en attente\n        const pendingSubmissionsData = await getPendingFormSubmissions();\n        setPendingSubmissions(pendingSubmissionsData);\n\n        // Calculer les statistiques\n        const statsData = await getFormSubmissionsStats();\n        setStats(statsData);\n        console.log('FormValidationList - Données chargées avec succès');\n        setLoading(false);\n      } catch (error) {\n        console.error('FormValidationList - Erreur lors du chargement des données:', error);\n        setError('Erreur lors du chargement des soumissions. Veuillez réessayer.');\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, []);\n  const handleApprove = async id => {\n    try {\n      setLoading(true);\n      console.log(`FormValidationList - Approbation de la soumission ${id}...`);\n\n      // Trouver la soumission sélectionnée\n      const submission = pendingSubmissions.find(sub => sub.id === id);\n      if (submission) {\n        setSelectedSubmission(submission);\n        setShowComparisonTable(true);\n        setLoading(false);\n        return;\n      }\n      await updateFormSubmissionStatus(id, 'approved');\n\n      // Mettre à jour la liste des soumissions\n      const updatedSubmissions = submissions.map(submission => submission.id === id ? {\n        ...submission,\n        status: 'approved'\n      } : submission);\n      setSubmissions(updatedSubmissions);\n\n      // Mettre à jour la liste des soumissions en attente\n      const updatedPendingSubmissions = pendingSubmissions.filter(submission => submission.id !== id);\n      setPendingSubmissions(updatedPendingSubmissions);\n\n      // Mettre à jour les statistiques\n      const newStats = {\n        ...stats\n      };\n      newStats.statusCounts.pending = (newStats.statusCounts.pending || 0) - 1;\n      newStats.statusCounts.approved = (newStats.statusCounts.approved || 0) + 1;\n      newStats.pendingCount = newStats.pendingCount - 1;\n      setStats(newStats);\n      console.log(`FormValidationList - Soumission ${id} approuvée`);\n      setLoading(false);\n    } catch (error) {\n      console.error(`FormValidationList - Erreur lors de l'approbation de la soumission ${id}:`, error);\n      setError(`Erreur lors de l'approbation de la soumission. Veuillez réessayer.`);\n      setLoading(false);\n    }\n  };\n  const handleReject = async id => {\n    try {\n      setLoading(true);\n      console.log(`FormValidationList - Rejet de la soumission ${id}...`);\n      await updateFormSubmissionStatus(id, 'rejected');\n\n      // Mettre à jour la liste des soumissions\n      const updatedSubmissions = submissions.map(submission => submission.id === id ? {\n        ...submission,\n        status: 'rejected'\n      } : submission);\n      setSubmissions(updatedSubmissions);\n\n      // Mettre à jour la liste des soumissions en attente\n      const updatedPendingSubmissions = pendingSubmissions.filter(submission => submission.id !== id);\n      setPendingSubmissions(updatedPendingSubmissions);\n\n      // Mettre à jour les statistiques\n      const newStats = {\n        ...stats\n      };\n      newStats.statusCounts.pending = (newStats.statusCounts.pending || 0) - 1;\n      newStats.statusCounts.rejected = (newStats.statusCounts.rejected || 0) + 1;\n      newStats.pendingCount = newStats.pendingCount - 1;\n      setStats(newStats);\n      console.log(`FormValidationList - Soumission ${id} rejetée`);\n      setLoading(false);\n    } catch (error) {\n      console.error(`FormValidationList - Erreur lors du rejet de la soumission ${id}:`, error);\n      setError(`Erreur lors du rejet de la soumission. Veuillez réessayer.`);\n      setLoading(false);\n    }\n  };\n  const handleSaveComparisonData = async finalData => {\n    try {\n      setLoading(true);\n      console.log(`FormValidationList - Sauvegarde des données de comparaison pour la soumission ${selectedSubmission.id}...`);\n\n      // Mettre à jour la soumission avec les données finales\n      await updateFormSubmissionWithProgrammerData(selectedSubmission.id, finalData);\n\n      // Mettre à jour le statut de la soumission\n      await updateFormSubmissionStatus(selectedSubmission.id, 'approved');\n\n      // Mettre à jour la liste des soumissions\n      const updatedSubmissions = submissions.map(submission => submission.id === selectedSubmission.id ? {\n        ...submission,\n        status: 'approved',\n        processedData: finalData\n      } : submission);\n      setSubmissions(updatedSubmissions);\n\n      // Mettre à jour la liste des soumissions en attente\n      const updatedPendingSubmissions = pendingSubmissions.filter(submission => submission.id !== selectedSubmission.id);\n      setPendingSubmissions(updatedPendingSubmissions);\n\n      // Mettre à jour les statistiques\n      const newStats = {\n        ...stats\n      };\n      newStats.statusCounts.pending = (newStats.statusCounts.pending || 0) - 1;\n      newStats.statusCounts.approved = (newStats.statusCounts.approved || 0) + 1;\n      newStats.pendingCount = newStats.pendingCount - 1;\n      setStats(newStats);\n      console.log(`FormValidationList - Données de comparaison sauvegardées pour la soumission ${selectedSubmission.id}`);\n\n      // Fermer le tableau de comparaison\n      setShowComparisonTable(false);\n      setSelectedSubmission(null);\n      setLoading(false);\n    } catch (error) {\n      console.error(`FormValidationList - Erreur lors de la sauvegarde des données de comparaison:`, error);\n      setError(`Erreur lors de la sauvegarde des données. Veuillez réessayer.`);\n      setLoading(false);\n    }\n  };\n  const handleCancelComparison = () => {\n    setShowComparisonTable(false);\n    setSelectedSubmission(null);\n  };\n  const formatDate = timestamp => {\n    if (!timestamp) return 'Date inconnue';\n    try {\n      let date;\n      if (timestamp instanceof Date) {\n        date = timestamp;\n      } else if (timestamp.seconds) {\n        date = new Date(timestamp.seconds * 1000);\n      } else if (timestamp.toDate) {\n        date = timestamp.toDate();\n      } else {\n        date = new Date(timestamp);\n      }\n      return date.toLocaleDateString('fr-FR', {\n        day: '2-digit',\n        month: '2-digit',\n        year: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    } catch (error) {\n      console.error('FormValidationList - Erreur lors du formatage de la date:', error);\n      return 'Date invalide';\n    }\n  };\n  if (loading && submissions.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Chargement des soumissions de formulaire...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 12\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"refresh-button\",\n        onClick: () => window.location.reload(),\n        children: \"Rafra\\xEEchir la page\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }, this);\n  }\n  if (showComparisonTable && selectedSubmission) {\n    // Simuler les données du programmateur existant\n    // Dans une vraie application, ces données viendraient d'un service\n    const existingProgrammerData = {\n      id: 'programmer-' + Math.random().toString(36).substr(2, 9),\n      businessName: '',\n      firstName: selectedSubmission.firstName || '',\n      lastName: '',\n      role: '',\n      address: '',\n      venue: '',\n      venueAddress: '',\n      vatNumber: '',\n      siret: '',\n      email: '',\n      phone: '',\n      website: ''\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-validation-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Validation des donn\\xE9es\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ComparisonTable, {\n        formData: selectedSubmission,\n        programmerData: existingProgrammerData,\n        onSave: handleSaveComparisonData,\n        onCancel: handleCancelComparison\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-validation-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Validation des formulaires\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stats-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Informations de d\\xE9bogage\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Total des soumissions: \", stats.total]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Soumissions en attente: \", stats.pendingCount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Distribution des statuts:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: Object.entries(stats.statusCounts).map(([status, count]) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [status, \": \", count]\n        }, status, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Avec token commun: \", stats.withCommonToken]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Sans token commun: \", stats.withoutCommonToken]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 7\n    }, this), pendingSubmissions.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-submissions\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Aucune soumission en attente de validation.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"submissions-list\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Soumissions en attente (\", pendingSubmissions.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 11\n      }, this), pendingSubmissions.map(submission => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"submission-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"submission-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Soumission #\", submission.id.substring(0, 6)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"submission-date\",\n            children: formatDate(submission.submissionDate)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"submission-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-label\",\n              children: \"Raison sociale:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-value\",\n              children: submission.businessName || 'Non spécifié'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-label\",\n              children: \"Nom:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-value\",\n              children: [submission.firstName || '', \" \", submission.lastName || '', !submission.firstName && !submission.lastName && 'Non spécifié']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-label\",\n              children: \"Email:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-value\",\n              children: submission.email || 'Non spécifié'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-label\",\n              children: \"T\\xE9l\\xE9phone:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-value\",\n              children: submission.phone || 'Non spécifié'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-label\",\n              children: \"Date du concert:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-value\",\n              children: submission.concertDate ? formatDate(submission.concertDate) : 'Non spécifiée'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-label\",\n              children: \"Lieu:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-value\",\n              children: submission.venue || 'Non spécifié'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-label\",\n              children: \"Ville:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-value\",\n              children: submission.concertCity || 'Non spécifiée'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-label\",\n              children: \"Token commun:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-value\",\n              children: submission.commonToken || 'Aucun'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 17\n          }, this), submission.additionalInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-row full-width\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-label\",\n              children: \"Informations suppl\\xE9mentaires:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-value additional-info\",\n              children: submission.additionalInfo\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"submission-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"reject-button\",\n            onClick: () => handleReject(submission.id),\n            disabled: loading,\n            children: \"Rejeter\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"approve-button\",\n            onClick: () => handleApprove(submission.id),\n            disabled: loading,\n            children: \"Approuver\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 15\n        }, this)]\n      }, submission.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 269,\n    columnNumber: 5\n  }, this);\n};\n_s(FormValidationList, \"iC1hp6mwF9jsl3U9KBjgxIjYy6A=\");\n_c = FormValidationList;\nexport default FormValidationList;\nvar _c;\n$RefreshReg$(_c, \"FormValidationList\");","map":{"version":3,"names":["React","useState","useEffect","getFormSubmissions","getPendingFormSubmissions","updateFormSubmissionStatus","updateFormSubmissionWithProgrammerData","getFormSubmissionsStats","ComparisonTable","jsxDEV","_jsxDEV","FormValidationList","_s","submissions","setSubmissions","pendingSubmissions","setPendingSubmissions","loading","setLoading","error","setError","selectedSubmission","setSelectedSubmission","showComparisonTable","setShowComparisonTable","stats","setStats","total","pendingCount","statusCounts","withCommonToken","withoutCommonToken","fetchData","console","log","allSubmissions","pendingSubmissionsData","statsData","handleApprove","id","submission","find","sub","updatedSubmissions","map","status","updatedPendingSubmissions","filter","newStats","pending","approved","handleReject","rejected","handleSaveComparisonData","finalData","processedData","handleCancelComparison","formatDate","timestamp","date","Date","seconds","toDate","toLocaleDateString","day","month","year","hour","minute","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","location","reload","existingProgrammerData","Math","random","toString","substr","businessName","firstName","lastName","role","address","venue","venueAddress","vatNumber","siret","email","phone","website","formData","programmerData","onSave","onCancel","Object","entries","count","substring","submissionDate","concertDate","concertCity","commonToken","additionalInfo","disabled","_c","$RefreshReg$"],"sources":["/workspaces/app-booking/client/src/components/formValidation/FormValidationList.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  getFormSubmissions, \n  getPendingFormSubmissions, \n  updateFormSubmissionStatus,\n  updateFormSubmissionWithProgrammerData,\n  getFormSubmissionsStats\n} from '../../services/formSubmissionsService';\nimport ComparisonTable from './ComparisonTable';\nimport './FormValidationList.css';\n\nconst FormValidationList = () => {\n  const [submissions, setSubmissions] = useState([]);\n  const [pendingSubmissions, setPendingSubmissions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedSubmission, setSelectedSubmission] = useState(null);\n  const [showComparisonTable, setShowComparisonTable] = useState(false);\n  const [stats, setStats] = useState({\n    total: 0,\n    pendingCount: 0,\n    statusCounts: {},\n    withCommonToken: 0,\n    withoutCommonToken: 0\n  });\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        \n        console.log('FormValidationList - Chargement des soumissions...');\n        \n        // Récupérer toutes les soumissions\n        const allSubmissions = await getFormSubmissions();\n        setSubmissions(allSubmissions);\n        \n        // Récupérer les soumissions en attente\n        const pendingSubmissionsData = await getPendingFormSubmissions();\n        setPendingSubmissions(pendingSubmissionsData);\n        \n        // Calculer les statistiques\n        const statsData = await getFormSubmissionsStats();\n        setStats(statsData);\n        \n        console.log('FormValidationList - Données chargées avec succès');\n        setLoading(false);\n      } catch (error) {\n        console.error('FormValidationList - Erreur lors du chargement des données:', error);\n        setError('Erreur lors du chargement des soumissions. Veuillez réessayer.');\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const handleApprove = async (id) => {\n    try {\n      setLoading(true);\n      console.log(`FormValidationList - Approbation de la soumission ${id}...`);\n      \n      // Trouver la soumission sélectionnée\n      const submission = pendingSubmissions.find(sub => sub.id === id);\n      if (submission) {\n        setSelectedSubmission(submission);\n        setShowComparisonTable(true);\n        setLoading(false);\n        return;\n      }\n      \n      await updateFormSubmissionStatus(id, 'approved');\n      \n      // Mettre à jour la liste des soumissions\n      const updatedSubmissions = submissions.map(submission => \n        submission.id === id \n          ? { ...submission, status: 'approved' } \n          : submission\n      );\n      setSubmissions(updatedSubmissions);\n      \n      // Mettre à jour la liste des soumissions en attente\n      const updatedPendingSubmissions = pendingSubmissions.filter(\n        submission => submission.id !== id\n      );\n      setPendingSubmissions(updatedPendingSubmissions);\n      \n      // Mettre à jour les statistiques\n      const newStats = { ...stats };\n      newStats.statusCounts.pending = (newStats.statusCounts.pending || 0) - 1;\n      newStats.statusCounts.approved = (newStats.statusCounts.approved || 0) + 1;\n      newStats.pendingCount = newStats.pendingCount - 1;\n      setStats(newStats);\n      \n      console.log(`FormValidationList - Soumission ${id} approuvée`);\n      setLoading(false);\n    } catch (error) {\n      console.error(`FormValidationList - Erreur lors de l'approbation de la soumission ${id}:`, error);\n      setError(`Erreur lors de l'approbation de la soumission. Veuillez réessayer.`);\n      setLoading(false);\n    }\n  };\n\n  const handleReject = async (id) => {\n    try {\n      setLoading(true);\n      console.log(`FormValidationList - Rejet de la soumission ${id}...`);\n      \n      await updateFormSubmissionStatus(id, 'rejected');\n      \n      // Mettre à jour la liste des soumissions\n      const updatedSubmissions = submissions.map(submission => \n        submission.id === id \n          ? { ...submission, status: 'rejected' } \n          : submission\n      );\n      setSubmissions(updatedSubmissions);\n      \n      // Mettre à jour la liste des soumissions en attente\n      const updatedPendingSubmissions = pendingSubmissions.filter(\n        submission => submission.id !== id\n      );\n      setPendingSubmissions(updatedPendingSubmissions);\n      \n      // Mettre à jour les statistiques\n      const newStats = { ...stats };\n      newStats.statusCounts.pending = (newStats.statusCounts.pending || 0) - 1;\n      newStats.statusCounts.rejected = (newStats.statusCounts.rejected || 0) + 1;\n      newStats.pendingCount = newStats.pendingCount - 1;\n      setStats(newStats);\n      \n      console.log(`FormValidationList - Soumission ${id} rejetée`);\n      setLoading(false);\n    } catch (error) {\n      console.error(`FormValidationList - Erreur lors du rejet de la soumission ${id}:`, error);\n      setError(`Erreur lors du rejet de la soumission. Veuillez réessayer.`);\n      setLoading(false);\n    }\n  };\n\n  const handleSaveComparisonData = async (finalData) => {\n    try {\n      setLoading(true);\n      console.log(`FormValidationList - Sauvegarde des données de comparaison pour la soumission ${selectedSubmission.id}...`);\n      \n      // Mettre à jour la soumission avec les données finales\n      await updateFormSubmissionWithProgrammerData(selectedSubmission.id, finalData);\n      \n      // Mettre à jour le statut de la soumission\n      await updateFormSubmissionStatus(selectedSubmission.id, 'approved');\n      \n      // Mettre à jour la liste des soumissions\n      const updatedSubmissions = submissions.map(submission => \n        submission.id === selectedSubmission.id \n          ? { ...submission, status: 'approved', processedData: finalData } \n          : submission\n      );\n      setSubmissions(updatedSubmissions);\n      \n      // Mettre à jour la liste des soumissions en attente\n      const updatedPendingSubmissions = pendingSubmissions.filter(\n        submission => submission.id !== selectedSubmission.id\n      );\n      setPendingSubmissions(updatedPendingSubmissions);\n      \n      // Mettre à jour les statistiques\n      const newStats = { ...stats };\n      newStats.statusCounts.pending = (newStats.statusCounts.pending || 0) - 1;\n      newStats.statusCounts.approved = (newStats.statusCounts.approved || 0) + 1;\n      newStats.pendingCount = newStats.pendingCount - 1;\n      setStats(newStats);\n      \n      console.log(`FormValidationList - Données de comparaison sauvegardées pour la soumission ${selectedSubmission.id}`);\n      \n      // Fermer le tableau de comparaison\n      setShowComparisonTable(false);\n      setSelectedSubmission(null);\n      setLoading(false);\n    } catch (error) {\n      console.error(`FormValidationList - Erreur lors de la sauvegarde des données de comparaison:`, error);\n      setError(`Erreur lors de la sauvegarde des données. Veuillez réessayer.`);\n      setLoading(false);\n    }\n  };\n\n  const handleCancelComparison = () => {\n    setShowComparisonTable(false);\n    setSelectedSubmission(null);\n  };\n\n  const formatDate = (timestamp) => {\n    if (!timestamp) return 'Date inconnue';\n    \n    try {\n      let date;\n      if (timestamp instanceof Date) {\n        date = timestamp;\n      } else if (timestamp.seconds) {\n        date = new Date(timestamp.seconds * 1000);\n      } else if (timestamp.toDate) {\n        date = timestamp.toDate();\n      } else {\n        date = new Date(timestamp);\n      }\n      \n      return date.toLocaleDateString('fr-FR', {\n        day: '2-digit',\n        month: '2-digit',\n        year: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    } catch (error) {\n      console.error('FormValidationList - Erreur lors du formatage de la date:', error);\n      return 'Date invalide';\n    }\n  };\n\n  if (loading && submissions.length === 0) {\n    return <div className=\"loading\">Chargement des soumissions de formulaire...</div>;\n  }\n\n  if (error) {\n    return (\n      <div className=\"error-container\">\n        <div className=\"error\">{error}</div>\n        <button className=\"refresh-button\" onClick={() => window.location.reload()}>\n          Rafraîchir la page\n        </button>\n      </div>\n    );\n  }\n\n  if (showComparisonTable && selectedSubmission) {\n    // Simuler les données du programmateur existant\n    // Dans une vraie application, ces données viendraient d'un service\n    const existingProgrammerData = {\n      id: 'programmer-' + Math.random().toString(36).substr(2, 9),\n      businessName: '',\n      firstName: selectedSubmission.firstName || '',\n      lastName: '',\n      role: '',\n      address: '',\n      venue: '',\n      venueAddress: '',\n      vatNumber: '',\n      siret: '',\n      email: '',\n      phone: '',\n      website: ''\n    };\n    \n    return (\n      <div className=\"form-validation-container\">\n        <h1>Validation des données</h1>\n        \n        <ComparisonTable \n          formData={selectedSubmission} \n          programmerData={existingProgrammerData}\n          onSave={handleSaveComparisonData}\n          onCancel={handleCancelComparison}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"form-validation-container\">\n      <h1>Validation des formulaires</h1>\n      \n      <div className=\"stats-panel\">\n        <h2>Informations de débogage</h2>\n        <p>Total des soumissions: {stats.total}</p>\n        <p>Soumissions en attente: {stats.pendingCount}</p>\n        <p>Distribution des statuts:</p>\n        <ul>\n          {Object.entries(stats.statusCounts).map(([status, count]) => (\n            <li key={status}>{status}: {count}</li>\n          ))}\n        </ul>\n        <p>Avec token commun: {stats.withCommonToken}</p>\n        <p>Sans token commun: {stats.withoutCommonToken}</p>\n      </div>\n      \n      {pendingSubmissions.length === 0 ? (\n        <div className=\"no-submissions\">\n          <p>Aucune soumission en attente de validation.</p>\n        </div>\n      ) : (\n        <div className=\"submissions-list\">\n          <h2>Soumissions en attente ({pendingSubmissions.length})</h2>\n          \n          {pendingSubmissions.map(submission => (\n            <div key={submission.id} className=\"submission-card\">\n              <div className=\"submission-header\">\n                <h3>Soumission #{submission.id.substring(0, 6)}</h3>\n                <span className=\"submission-date\">\n                  {formatDate(submission.submissionDate)}\n                </span>\n              </div>\n              \n              <div className=\"submission-details\">\n                <div className=\"detail-row\">\n                  <span className=\"detail-label\">Raison sociale:</span>\n                  <span className=\"detail-value\">{submission.businessName || 'Non spécifié'}</span>\n                </div>\n                \n                <div className=\"detail-row\">\n                  <span className=\"detail-label\">Nom:</span>\n                  <span className=\"detail-value\">\n                    {submission.firstName || ''} {submission.lastName || ''}\n                    {!submission.firstName && !submission.lastName && 'Non spécifié'}\n                  </span>\n                </div>\n                \n                <div className=\"detail-row\">\n                  <span className=\"detail-label\">Email:</span>\n                  <span className=\"detail-value\">{submission.email || 'Non spécifié'}</span>\n                </div>\n                \n                <div className=\"detail-row\">\n                  <span className=\"detail-label\">Téléphone:</span>\n                  <span className=\"detail-value\">{submission.phone || 'Non spécifié'}</span>\n                </div>\n                \n                <div className=\"detail-row\">\n                  <span className=\"detail-label\">Date du concert:</span>\n                  <span className=\"detail-value\">\n                    {submission.concertDate \n                      ? formatDate(submission.concertDate) \n                      : 'Non spécifiée'}\n                  </span>\n                </div>\n                \n                <div className=\"detail-row\">\n                  <span className=\"detail-label\">Lieu:</span>\n                  <span className=\"detail-value\">{submission.venue || 'Non spécifié'}</span>\n                </div>\n                \n                <div className=\"detail-row\">\n                  <span className=\"detail-label\">Ville:</span>\n                  <span className=\"detail-value\">{submission.concertCity || 'Non spécifiée'}</span>\n                </div>\n                \n                <div className=\"detail-row\">\n                  <span className=\"detail-label\">Token commun:</span>\n                  <span className=\"detail-value\">\n                    {submission.commonToken || 'Aucun'}\n                  </span>\n                </div>\n                \n                {submission.additionalInfo && (\n                  <div className=\"detail-row full-width\">\n                    <span className=\"detail-label\">Informations supplémentaires:</span>\n                    <div className=\"detail-value additional-info\">\n                      {submission.additionalInfo}\n                    </div>\n                  </div>\n                )}\n              </div>\n              \n              <div className=\"submission-actions\">\n                <button \n                  className=\"reject-button\"\n                  onClick={() => handleReject(submission.id)}\n                  disabled={loading}\n                >\n                  Rejeter\n                </button>\n                <button \n                  className=\"approve-button\"\n                  onClick={() => handleApprove(submission.id)}\n                  disabled={loading}\n                >\n                  Approuver\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default FormValidationList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}