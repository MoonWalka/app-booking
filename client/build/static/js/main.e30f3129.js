/*! For license information please see main.e30f3129.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},52:(e,t,n)=>{n.d(t,{KO:()=>Y,MF:()=>Q,Sx:()=>X,Wp:()=>J,j6:()=>q,om:()=>B,xZ:()=>H});var r=n(812),i=n(443),s=n(529),a=n(799);class o{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const l="@firebase/app",c="0.11.4",u=new i.Vy("@firebase/app"),d="@firebase/app-compat",h="@firebase/analytics-compat",f="@firebase/analytics",p="@firebase/app-check-compat",m="@firebase/app-check",g="@firebase/auth",v="@firebase/auth-compat",y="@firebase/database",b="@firebase/data-connect",w="@firebase/database-compat",x="@firebase/functions",E="@firebase/functions-compat",S="@firebase/installations",_="@firebase/installations-compat",N="@firebase/messaging",k="@firebase/messaging-compat",T="@firebase/performance",C="@firebase/performance-compat",I="@firebase/remote-config",j="@firebase/remote-config-compat",A="@firebase/storage",D="@firebase/storage-compat",P="@firebase/firestore",R="@firebase/vertexai",O="@firebase/firestore-compat",L="firebase",M="[DEFAULT]",F={[l]:"fire-core",[d]:"fire-core-compat",[f]:"fire-analytics",[h]:"fire-analytics-compat",[m]:"fire-app-check",[p]:"fire-app-check-compat",[g]:"fire-auth",[v]:"fire-auth-compat",[y]:"fire-rtdb",[b]:"fire-data-connect",[w]:"fire-rtdb-compat",[x]:"fire-fn",[E]:"fire-fn-compat",[S]:"fire-iid",[_]:"fire-iid-compat",[N]:"fire-fcm",[k]:"fire-fcm-compat",[T]:"fire-perf",[C]:"fire-perf-compat",[I]:"fire-rc",[j]:"fire-rc-compat",[A]:"fire-gcs",[D]:"fire-gcs-compat",[P]:"fire-fst",[O]:"fire-fst-compat",[R]:"fire-vertex","fire-js":"fire-js",[L]:"fire-js-all"},U=new Map,V=new Map,$=new Map;function z(e,t){try{e.container.addComponent(t)}catch(n){u.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function B(e){const t=e.name;if($.has(t))return u.debug(`There were multiple attempts to register component ${t}.`),!1;$.set(t,e);for(const n of U.values())z(n,e);for(const n of V.values())z(n,e);return!0}function q(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function H(e){return null!==e&&void 0!==e&&void 0!==e.settings}const K={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},W=new s.FA("app","Firebase",K);class G{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw W.create("app-deleted",{appName:this._name})}}const Q="11.6.0";function J(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:M,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw W.create("bad-app-name",{appName:String(a)});if(n||(n=(0,s.T9)()),!n)throw W.create("no-options");const o=U.get(a);if(o){if((0,s.bD)(n,o.options)&&(0,s.bD)(i,o.config))return o;throw W.create("duplicate-app",{appName:a})}const l=new r.h1(a);for(const r of $.values())l.addComponent(r);const c=new G(n,i,l);return U.set(a,c),c}function X(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;const t=U.get(e);if(!t&&e===M&&(0,s.T9)())return J();if(!t)throw W.create("no-app",{appName:e});return t}function Y(e,t,n){var i;let s=null!==(i=F[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const a=s.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=[`Unable to register library "${s}" with version "${t}":`];return a&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void u.warn(e.join(" "))}B(new r.uA(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const Z="firebase-heartbeat-store";let ee=null;function te(){return ee||(ee=(0,a.P2)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Z)}catch(n){console.warn(n)}}}).catch((e=>{throw W.create("idb-open",{originalErrorMessage:e.message})}))),ee}async function ne(e,t){try{const n=(await te()).transaction(Z,"readwrite"),r=n.objectStore(Z);await r.put(t,re(e)),await n.done}catch(n){if(n instanceof s.g)u.warn(n.message);else{const e=W.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});u.warn(e.message)}}}function re(e){return`${e.name}!${e.options.appId}`}class ie{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ae(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=se();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){u.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=se(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),oe(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),oe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,s.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return u.warn(t),""}}}function se(){return(new Date).toISOString().substring(0,10)}class ae{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.zW)()&&(0,s.eX)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await te()).transaction(Z),n=await t.objectStore(Z).get(re(e));return await t.done,n}catch(t){if(t instanceof FirebaseError)u.warn(t.message);else{const e=W.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});u.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ne(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ne(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function oe(e){return(0,s.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var le;le="",B(new r.uA("platform-logger",(e=>new o(e)),"PRIVATE")),B(new r.uA("heartbeat",(e=>new ie(e)),"PRIVATE")),Y(l,c,le),Y(l,c,"esm2017"),Y("fire-js","")},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},188:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});n(43);var r=n(579);const i=()=>(0,r.jsx)("div",{className:"form-submitted-container",children:(0,r.jsxs)("div",{className:"form-submitted-content",children:[(0,r.jsx)("div",{className:"success-icon",children:(0,r.jsx)("i",{className:"fas fa-check-circle"})}),(0,r.jsx)("h1",{children:"Formulaire envoy\xe9 avec succ\xe8s !"}),(0,r.jsx)("p",{className:"thank-you-message",children:"Merci d'avoir compl\xe9t\xe9 ce formulaire. Vos informations ont \xe9t\xe9 enregistr\xe9es et seront trait\xe9es prochainement."}),(0,r.jsxs)("div",{className:"additional-info",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("i",{className:"fas fa-info-circle"}),"Les informations que vous avez fournies seront utilis\xe9es pour la pr\xe9paration des contrats et la facturation."]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("i",{className:"fas fa-envelope"}),"Vous pourriez \xeatre contact\xe9 par email ou t\xe9l\xe9phone si des informations suppl\xe9mentaires sont n\xe9cessaires."]})]}),(0,r.jsx)("div",{className:"form-submitted-footer",children:(0,r.jsx)("p",{children:"Vous pouvez maintenant fermer cette page."})})]})})},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,i)&&!_.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:S.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+C(l,0):s,x(a)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),I(a,t,i,"",(function(e){return e}))):null!=a&&(k(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+C(o=e[c],c);l+=I(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,i,u=s+C(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function j(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:j,forEach:function(e,t,n){j(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return j(e,(function(){t++})),t},toArray:function(e){return j(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!_.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},216:(e,t,n)=>{var r;n.d(t,{$P:()=>f,BV:()=>U,C5:()=>O,Ix:()=>F,V8:()=>R,Zp:()=>v,g:()=>b,jb:()=>c,qh:()=>M,sv:()=>L,x$:()=>w,zy:()=>m});var i=n(43),s=n(387);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}const o=i.createContext(null);const l=i.createContext(null);const c=i.createContext(null);const u=i.createContext(null);const d=i.createContext({outlet:null,matches:[],isDataRoute:!1});const h=i.createContext(null);function f(e,t){let{relative:n}=void 0===t?{}:t;p()||(0,s.Oi)(!1);let{basename:r,navigator:a}=i.useContext(c),{hash:o,pathname:l,search:u}=w(e,{relative:n}),d=l;return"/"!==r&&(d="/"===l?r:(0,s.HS)([r,l])),a.createHref({pathname:d,search:u,hash:o})}function p(){return null!=i.useContext(u)}function m(){return p()||(0,s.Oi)(!1),i.useContext(u).location}function g(e){i.useContext(c).static||i.useLayoutEffect(e)}function v(){let{isDataRoute:e}=i.useContext(d);return e?function(){let{router:e}=I(T.UseNavigateStable),t=A(C.UseNavigateStable),n=i.useRef(!1);g((()=>{n.current=!0}));let r=i.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,a({fromRouteId:t},i)))}),[e,t]);return r}():function(){p()||(0,s.Oi)(!1);let e=i.useContext(o),{basename:t,future:n,navigator:r}=i.useContext(c),{matches:a}=i.useContext(d),{pathname:l}=m(),u=JSON.stringify((0,s.yD)(a,n.v7_relativeSplatPath)),h=i.useRef(!1);return g((()=>{h.current=!0})),i.useCallback((function(n,i){if(void 0===i&&(i={}),!h.current)return;if("number"===typeof n)return void r.go(n);let a=(0,s.Gh)(n,JSON.parse(u),l,"path"===i.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:(0,s.HS)([t,a.pathname])),(i.replace?r.replace:r.push)(a,i.state,i)}),[t,r,u,l,e])}()}const y=i.createContext(null);function b(){let{matches:e}=i.useContext(d),t=e[e.length-1];return t?t.params:{}}function w(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext(c),{matches:a}=i.useContext(d),{pathname:o}=m(),l=JSON.stringify((0,s.yD)(a,r.v7_relativeSplatPath));return i.useMemo((()=>(0,s.Gh)(e,JSON.parse(l),o,"path"===n)),[e,l,o,n])}function x(e,t,n,r){p()||(0,s.Oi)(!1);let{navigator:o,static:l}=i.useContext(c),{matches:h}=i.useContext(d),f=h[h.length-1],g=f?f.params:{},v=(f&&f.pathname,f?f.pathnameBase:"/");f&&f.route;let y,b=m();if(t){var w;let e="string"===typeof t?(0,s.Rr)(t):t;"/"===v||(null==(w=e.pathname)?void 0:w.startsWith(v))||(0,s.Oi)(!1),y=e}else y=b;let x=y.pathname||"/",E=x;if("/"!==v){let e=v.replace(/^\//,"").split("/");E="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let S=!l&&n&&n.matches&&n.matches.length>0?n.matches:(0,s.ue)(e,{pathname:E});let _=k(S&&S.map((e=>Object.assign({},e,{params:Object.assign({},g,e.params),pathname:(0,s.HS)([v,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?v:(0,s.HS)([v,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),h,n,r);return t&&_?i.createElement(u.Provider,{value:{location:a({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:s.rc.Pop}},_):_}function E(){let e=function(){var e;let t=i.useContext(h),n=j(C.UseRouteError),r=A(C.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=(0,s.pX)(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:a},n):null,null)}const S=i.createElement(E,null);class _ extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(d.Provider,{value:this.props.routeContext},i.createElement(h.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function N(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(o);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(d.Provider,{value:t},r)}function k(e,t,n,r){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let l=e,c=null==(a=n)?void 0:a.errors;if(null!=c){let e=l.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||(0,s.Oi)(!1),l=l.slice(0,Math.min(l.length,e+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<l.length;i++){let e=l[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,l=d>=0?l.slice(0,d+1):[l[0]];break}}}return l.reduceRight(((e,r,s)=>{let a,o=!1,h=null,f=null;var p;n&&(a=c&&r.route.id?c[r.route.id]:void 0,h=r.route.errorElement||S,u&&(d<0&&0===s?(p="route-fallback",!1||D[p]||(D[p]=!0),o=!0,f=null):d===s&&(o=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(l.slice(0,s+1)),g=()=>{let t;return t=a?h:o?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(N,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(_,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var T=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(T||{}),C=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(C||{});function I(e){let t=i.useContext(o);return t||(0,s.Oi)(!1),t}function j(e){let t=i.useContext(l);return t||(0,s.Oi)(!1),t}function A(e){let t=function(){let e=i.useContext(d);return e||(0,s.Oi)(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||(0,s.Oi)(!1),n.route.id}const D={};const P=(e,t,n)=>{};function R(e,t){void 0===(null==e?void 0:e.v7_startTransition)&&P("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),void 0!==(null==e?void 0:e.v7_relativeSplatPath)||t&&t.v7_relativeSplatPath||P("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),t&&(void 0===t.v7_fetcherPersist&&P("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),void 0===t.v7_normalizeFormMethod&&P("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),void 0===t.v7_partialHydration&&P("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),void 0===t.v7_skipActionErrorRevalidation&&P("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}(r||(r=n.t(i,2))).startTransition;function O(e){let{to:t,replace:n,state:r,relative:a}=e;p()||(0,s.Oi)(!1);let{future:o,static:l}=i.useContext(c),{matches:u}=i.useContext(d),{pathname:h}=m(),f=v(),g=(0,s.Gh)(t,(0,s.yD)(u,o.v7_relativeSplatPath),h,"path"===a),y=JSON.stringify(g);return i.useEffect((()=>f(JSON.parse(y),{replace:n,state:r,relative:a})),[f,y,a,n,r]),null}function L(e){return function(e){let t=i.useContext(d).outlet;return t?i.createElement(y.Provider,{value:e},t):t}(e.context)}function M(e){(0,s.Oi)(!1)}function F(e){let{basename:t="/",children:n=null,location:r,navigationType:o=s.rc.Pop,navigator:l,static:d=!1,future:h}=e;p()&&(0,s.Oi)(!1);let f=t.replace(/^\/*/,"/"),m=i.useMemo((()=>({basename:f,navigator:l,static:d,future:a({v7_relativeSplatPath:!1},h)})),[f,h,l,d]);"string"===typeof r&&(r=(0,s.Rr)(r));let{pathname:g="/",search:v="",hash:y="",state:b=null,key:w="default"}=r,x=i.useMemo((()=>{let e=(0,s.pb)(g,f);return null==e?null:{location:{pathname:e,search:v,hash:y,state:b,key:w},navigationType:o}}),[f,g,v,y,b,w,o]);return null==x?null:i.createElement(c.Provider,{value:m},i.createElement(u.Provider,{children:n,value:x}))}function U(e){let{children:t,location:n}=e;return x(V(t),n)}new Promise((()=>{}));i.Component;function V(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let a=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,V(e.props.children,a));e.type!==M&&(0,s.Oi)(!1),e.props.index&&e.props.children&&(0,s.Oi)(!1);let o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=V(e.props.children,a)),n.push(o)})),n}},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,P(E);else{var t=r(u);null!==t&&R(x,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,y(k),k=-1),p=!0;var s=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&R(x,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,_=!1,N=null,k=-1,T=5,C=-1;function I(){return!(t.unstable_now()-C<T)}function j(){if(null!==N){var e=t.unstable_now();C=e;var n=!0;try{n=N(!0,e)}finally{n?S():(_=!1,N=null)}}else _=!1}if("function"===typeof b)S=function(){b(j)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,D=A.port2;A.port1.onmessage=j,S=function(){D.postMessage(null)}}else S=function(){v(j,0)};function P(e){N=e,_||(_=!0,S())}function R(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(k),k=-1):g=!0,R(x,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,P(E))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},253:(e,t,n)=>{n.d(t,{y:()=>De,db:()=>Pe});var r=n(52);(0,r.KO)("firebase","11.6.0","app");var i=n(443),s=n(529),a=n(812),o=n(799);const l="@firebase/installations",c="0.6.13",u=1e4,d=`w:${c}`,h="FIS_v2",f=36e5,p={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},m=new s.FA("installations","Installations",p);function g(e){return e instanceof FirebaseError&&e.code.includes("request-failed")}function v(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function y(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function b(e,t){const n=(await t.json()).error;return m.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function w(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function x(e,t){let{refreshToken:n}=t;const r=w(e);return r.append("Authorization",function(e){return`${h} ${e}`}(n)),r}async function E(e){const t=await e();return t.status>=500&&t.status<600?e():t}function S(e){return new Promise((t=>{setTimeout(t,e)}))}const _=/^[cdef][\w-]{21}$/;function N(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return _.test(t)?t:""}catch(e){return""}}function k(e){return`${e.appName}!${e.appId}`}const T=new Map;function C(e,t){const n=k(e);I(n,t),function(e,t){const n=A();n&&n.postMessage({key:e,fid:t});D()}(n,t)}function I(e,t){const n=T.get(e);if(n)for(const r of n)r(t)}let j=null;function A(){return!j&&"BroadcastChannel"in self&&(j=new BroadcastChannel("[Firebase] FID Change"),j.onmessage=e=>{I(e.data.key,e.data.fid)}),j}function D(){0===T.size&&j&&(j.close(),j=null)}const P="firebase-installations-store";let R=null;function O(){return R||(R=(0,o.P2)("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(P)}})),R}async function L(e,t){const n=k(e),r=(await O()).transaction(P,"readwrite"),i=r.objectStore(P),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||C(e,t.fid),t}async function M(e){const t=k(e),n=(await O()).transaction(P,"readwrite");await n.objectStore(P).delete(t),await n.done}async function F(e,t){const n=k(e),r=(await O()).transaction(P,"readwrite"),i=r.objectStore(P),s=await i.get(n),a=t(s);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||s&&s.fid===a.fid||C(e,a.fid),a}async function U(e){let t;const n=await F(e.appConfig,(n=>{const r=function(e){const t=e||{fid:N(),registrationStatus:0};return z(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(m.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=v(n),a=w(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:i,authVersion:h,appId:n.appId,sdkVersion:d},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await E((()=>fetch(s,c)));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:y(e.authToken)}}throw await b("Create Installation",u)}(e,t);return L(e.appConfig,n)}catch(n){throw g(n)&&409===n.customData.serverCode?await M(e.appConfig):await L(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:V(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function V(e){let t=await $(e.appConfig);for(;1===t.registrationStatus;)await S(100),t=await $(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await U(e);return n||t}return t}function $(e){return F(e,(e=>{if(!e)throw m.create("installation-not-found");return z(e)}))}function z(e){return 1===(t=e).registrationStatus&&t.registrationTime+u<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function B(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return`${v(e)}/${n}/authTokens:generate`}(n,t),s=x(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={installation:{sdkVersion:d,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await E((()=>fetch(i,l)));if(c.ok){return y(await c.json())}throw await b("Generate Auth Token",c)}async function q(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await F(e.appConfig,(r=>{if(!K(r))throw m.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+f}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await H(e.appConfig);for(;1===n.authToken.requestStatus;)await S(100),n=await H(e.appConfig);const r=n.authToken;return 0===r.requestStatus?q(e,t):r}(e,n),r;{if(!navigator.onLine)throw m.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await B(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await L(e.appConfig,r),n}catch(n){if(!g(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await L(e.appConfig,n)}else await M(e.appConfig);throw n}}(e,n),n}}));return t?await t:r.authToken}function H(e){return F(e,(e=>{if(!K(e))throw m.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+u<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function K(e){return void 0!==e&&2===e.registrationStatus}async function W(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await U(e);t&&await t}(n);return(await q(n,t)).token}function G(e){return m.create("missing-app-config-values",{valueName:e})}const Q="installations",J=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw G("App Configuration");if(!e.name)throw G("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw G(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:(0,r.j6)(t,"heartbeat"),_delete:()=>Promise.resolve()}},X=e=>{const t=e.getProvider("app").getImmediate(),n=(0,r.j6)(t,Q).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await U(t);return r?r.catch(console.error):q(t).catch(console.error),n.fid}(n),getToken:e=>W(n,e)}};(0,r.om)(new a.uA(Q,J,"PUBLIC")),(0,r.om)(new a.uA("installations-internal",X,"PRIVATE")),(0,r.KO)(l,c),(0,r.KO)(l,c,"esm2017");const Y="analytics",Z="https://www.googletagmanager.com/gtag/js",ee=new i.Vy("@firebase/analytics"),te={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ne=new s.FA("analytics","Analytics",te);function re(e){if(!e.startsWith(Z)){const t=ne.create("invalid-gtag-resource",{gtagURL:e});return ee.warn(t.message),""}return e}function ie(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function se(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:re}),r=document.createElement("script"),i=`${Z}?l=${e}&id=${t}`;r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function ae(e,t,n,r){return async function(i){try{for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];if("event"===i){const[r,i]=a;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await ie(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(s){ee.error(s)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=a;await async function(e,t,n,r,i,s){const a=r[i];try{if(a)await t[a];else{const e=(await ie(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(o){ee.error(o)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t,n]=a;e("consent",t,n)}else if("get"===i){const[t,n,r]=a;e("get",t,n,r)}else if("set"===i){const[t]=a;e("set",t)}else e(i,...a)}catch(l){ee.error(l)}}}const oe=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function le(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function ce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw ne.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw ne.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new de;return setTimeout((async()=>{o.abort()}),void 0!==n?n:6e4),ue({appId:r,apiKey:i,measurementId:s},a,o,t)}async function ue(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:oe;var a;const{appId:o,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(ne.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(c){if(l)return ee.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===c||void 0===c?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:le(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(s,i);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(o){}throw ne.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return s.deleteThrottleMetadata(o),t}catch(c){const t=c;if(!function(e){if(!(e instanceof FirebaseError)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(s.deleteThrottleMetadata(o),l)return ee.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===t||void 0===t?void 0:t.message}]`),{appId:o,measurementId:l};throw c}const r=503===Number(null===(a=null===t||void 0===t?void 0:t.customData)||void 0===a?void 0:a.httpStatus)?calculateBackoffMillis(i,s.intervalMillis,30):calculateBackoffMillis(i,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+r,backoffCount:i+1};return s.setThrottleMetadata(o,u),ee.debug(`Calling attemptFetch again in ${r} millis`),ue(e,u,n,s)}}class de{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let he,fe;function pe(e){fe=e}function me(e){he=e}async function ge(e,t,n,r,i,a,o){var l;const c=ce(e);c.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&ee.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>ee.error(e))),t.push(c);const u=async function(){if(!(0,s.zW)())return ee.warn(ne.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await(0,s.eX)()}catch(e){return ee.warn(ne.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[d,h]=await Promise.all([c,u]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Z)&&n.src.includes(e))return n;return null})(a)||se(a,d.measurementId),fe&&(i("consent","default",fe),pe(void 0)),i("js",new Date);const f=null!==(l=null===o||void 0===o?void 0:o.config)&&void 0!==l?l:{};return f.origin="firebase",f.update=!0,null!=h&&(f.firebase_id=h),i("config",d.measurementId,f),he&&(i("set",he),me(void 0)),d.measurementId}class ve{constructor(e){this.app=e}_delete(){return delete ye[this.app.options.appId],Promise.resolve()}}let ye={},be=[];const we={};let xe,Ee,Se="dataLayer",_e="gtag",Ne=!1;function ke(e,t,n){!function(){const e=[];if((0,s.sr)()&&e.push("This is a browser extension environment."),(0,s.dM)()||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=ne.create("invalid-analytics-context",{errorInfo:t});ee.warn(n.message)}}();const r=e.options.appId;if(!r)throw ne.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw ne.create("no-api-key");ee.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ye[r])throw ne.create("already-exists",{id:r});if(!Ne){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Se);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=ae(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(ye,be,we,Se,_e);Ee=e,xe=t,Ne=!0}ye[r]=ge(e,be,we,t,xe,Se,n);return new ve(e)}function Te(e,t,n,r){e=(0,s.Ku)(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Ee,ye[e.app.options.appId],t,n,r).catch((e=>ee.error(e)))}const Ce="@firebase/analytics",Ie="0.10.12";(0,r.om)(new a.uA(Y,((e,t)=>{let{options:n}=t;return ke(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),(0,r.om)(new a.uA("analytics-internal",(function(e){try{const t=e.getProvider(Y).getImmediate();return{logEvent:(e,n,r)=>Te(t,e,n,r)}}catch(t){throw ne.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),(0,r.KO)(Ce,Ie),(0,r.KO)(Ce,Ie,"esm2017");var je=n(472),Ae=n(416);const De=(0,r.Wp)({apiKey:"AIzaSyCt994en0glR_WVbxxkDATXM25QV7HKovA",authDomain:"app-booking-26571.firebaseapp.com",projectId:"app-booking-26571",storageBucket:"app-booking-26571.firebasestorage.app",messagingSenderId:"985724562753",appId:"1:985724562753:web:83a093ebd7a7034a9a85c0",measurementId:"G-LC94BW3MWX"}),Pe=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();e=(0,s.Ku)(e);const t=(0,r.j6)(e,Y);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(0,r.j6)(e,Y);if(n.isInitialized()){const e=n.getImmediate();if((0,s.bD)(t,n.getOptions()))return e;throw ne.create("already-initialized")}const i=n.initialize({options:t})}(e)}(De),(0,je.aU)(De));(0,Ae.xI)(De)},362:(e,t,n)=>{n.d(t,{mW:()=>p,dL:()=>g,JA:()=>m,Rv:()=>v});var r=n(472),i=n(253);const s={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let a;const o=new Uint8Array(16);const l=[];for(let y=0;y<256;++y)l.push((y+256).toString(16).slice(1));function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}const u=function(e,t,n){if(s.randomUUID&&!t&&!e)return s.randomUUID();const r=(e=e||{}).random??e.rng?.()??function(){if(!a){if("undefined"===typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");a=crypto.getRandomValues.bind(crypto)}return a(o)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=r[e];return t}return c(r)},d="formLinks",h=async e=>{try{const t=(0,r.rJ)(i.db,e);return(await(0,r.GG)((0,r.P)(t,(0,r.My)("createdAt","desc")))).empty&&console.log(`Collection ${e} vide, pr\xeate \xe0 recevoir des liens de formulaire.`),!0}catch(t){return console.error(`Erreur lors de la v\xe9rification/cr\xe9ation de la collection ${e}:`,t),!1}},f=(0,r.rJ)(i.db,d),p=async(e,t,n,i)=>{try{var s;await h(d);const a=await g(e);if(a)return console.log(`Un lien existe d\xe9j\xe0 pour le concert ${e}:`,a),a;const o=u(),l={concertId:e,concertName:null!==(s=t.artist)&&void 0!==s&&s.name?`${t.artist.name} \xe0 ${t.venue}`:`Concert \xe0 ${t.venue}`,concertDate:t.date||null,programmerId:n,programmerName:i,token:o,url:`/form/${o}`,createdAt:r.Dc.fromDate(new Date),expiresAt:null,isSubmitted:!1,submissionId:null};console.log("Tentative de cr\xe9ation d'un lien de formulaire:",l);const c=await(0,r.gS)(f,l);return console.log(`Lien de formulaire cr\xe9\xe9 avec succ\xe8s, ID: ${c.id}`),{id:c.id,...l}}catch(l){console.error("Erreur lors de la cr\xe9ation du lien de formulaire:",l);try{var a;const r="mock-link-"+Date.now(),s=uuidv4(),o={concertId:e,concertName:null!==(a=t.artist)&&void 0!==a&&a.name?`${t.artist.name} \xe0 ${t.venue}`:`Concert \xe0 ${t.venue}`,concertDate:t.date||null,programmerId:n,programmerName:i,token:s,url:`/form/${s}`,createdAt:Timestamp.fromDate(new Date),expiresAt:null,isSubmitted:!1,submissionId:null};return await setDoc(doc(db,d,r),o),console.log(`Lien de formulaire cr\xe9\xe9 avec un ID manuel: ${r}`),{id:r,...o}}catch(c){var o;console.error("Erreur lors de la cr\xe9ation manuelle du lien de formulaire:",c);const r=uuidv4();return{id:"mock-link-"+Date.now(),concertId:e,concertName:null!==(o=t.artist)&&void 0!==o&&o.name?`${t.artist.name} \xe0 ${t.venue}`:`Concert \xe0 ${t.venue}`,concertDate:t.date||null,programmerId:n,programmerName:i,token:r,url:`/form/${r}`,createdAt:new Date,expiresAt:null,isSubmitted:!1,submissionId:null}}}},m=async e=>{try{await h(d),console.log(`Tentative de r\xe9cup\xe9ration du lien avec le token ${e}...`);const t=(0,r.P)(f,(0,r._M)("token","==",e)),n=await(0,r.GG)(t);if(n.empty)return console.log(`Aucun lien trouv\xe9 avec le token ${e}`),null;const i={id:n.docs[0].id,...n.docs[0].data()};return console.log(`Lien avec le token ${e} r\xe9cup\xe9r\xe9:`,i),i}catch(t){return console.error(`Erreur lors de la r\xe9cup\xe9ration du lien avec le token ${e}:`,t),null}},g=async e=>{try{await h(d),console.log(`Tentative de r\xe9cup\xe9ration du lien pour le concert ${e}...`);const t=(0,r.P)(f,(0,r._M)("concertId","==",e)),n=await(0,r.GG)(t);if(n.empty)return console.log(`Aucun lien trouv\xe9 pour le concert ${e}`),null;const i={id:n.docs[0].id,...n.docs[0].data()};return console.log(`Lien pour le concert ${e} r\xe9cup\xe9r\xe9:`,i),i}catch(t){return console.error(`Erreur lors de la r\xe9cup\xe9ration du lien pour le concert ${e}:`,t),null}},v=async(e,t)=>{try{await h(d),console.log(`Tentative de marquer le lien ${e} comme soumis avec la soumission ${t}`);const n=(0,r.H9)(i.db,d,e),s={isSubmitted:!0,submissionId:t,submittedAt:r.Dc.fromDate(new Date)};return await(0,r.mZ)(n,s),console.log(`Lien ${e} marqu\xe9 comme soumis avec succ\xe8s`),{id:e,...s}}catch(n){console.error(`Erreur lors du marquage du lien ${e} comme soumis:`,n);try{const n={isSubmitted:!0,submissionId:t,submittedAt:Timestamp.fromDate(new Date)};return await setDoc(doc(db,d,e),n,{merge:!0}),console.log(`Lien ${e} marqu\xe9 comme soumis (via setDoc) avec succ\xe8s`),{id:e,...n}}catch(s){return console.error(`Erreur lors du marquage du lien ${e} comme soumis (via setDoc):`,s),null}}}},386:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var r=n(43),i=n(216),s=n(362),a=n(959),o=n(579);const l=()=>{const{token:e}=(0,i.g)(),t=(0,i.Zp)(),[n,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0),[d,h]=(0,r.useState)(null),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)({businessName:"",contact:"",role:"",address:"",venue:"",vatNumber:"",siret:"",email:"",phone:"",website:""});(0,r.useEffect)((()=>{(async()=>{try{u(!0),console.log(`Tentative de r\xe9cup\xe9ration du lien avec le token: ${e}`);const t=await(0,s.JA)(e);if(!t)throw new Error("Lien de formulaire non trouv\xe9 ou expir\xe9");if(t.isSubmitted)throw new Error("Ce formulaire a d\xe9j\xe0 \xe9t\xe9 soumis");console.log("Lien de formulaire r\xe9cup\xe9r\xe9:",t),l(t),u(!1)}catch(t){console.error("Erreur lors de la r\xe9cup\xe9ration du lien de formulaire:",t),h(t.message),u(!1)}})()}),[e]);const b=e=>{const{name:t,value:n}=e.target;y({...v,[t]:n})};return c?(0,o.jsx)("div",{className:"public-form-loading",children:"Chargement du formulaire..."}):d?(0,o.jsx)("div",{className:"public-form-error",children:d}):m?(0,o.jsxs)("div",{className:"public-form-submitted",children:[(0,o.jsx)("div",{className:"submitted-icon",children:(0,o.jsx)("i",{className:"fas fa-check-circle"})}),(0,o.jsx)("h2",{children:"Formulaire soumis avec succ\xe8s !"}),(0,o.jsx)("p",{children:"Merci d'avoir compl\xe9t\xe9 ce formulaire. Vos informations ont \xe9t\xe9 enregistr\xe9es."}),(0,o.jsx)("p",{children:"Vous allez \xeatre redirig\xe9 automatiquement..."})]}):(0,o.jsxs)("div",{className:"public-form-container",children:[(0,o.jsxs)("div",{className:"public-form-header",children:[(0,o.jsx)("h1",{children:"Formulaire de renseignements"}),(0,o.jsxs)("p",{className:"form-description",children:["Merci de compl\xe9ter ce formulaire pour le concert :",(0,o.jsxs)("strong",{children:[" ",n.concertName]}),n.concertDate&&(0,o.jsxs)("span",{children:[" le ",new Date(n.concertDate).toLocaleDateString()]})]})]}),(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{p(!0);const e={...v,programmerId:n.programmerId,programmerName:n.programmerName,concertId:n.concertId,concertName:n.concertName,concertDate:n.concertDate,status:"pending",formLinkId:n.id};console.log("Donn\xe9es du formulaire \xe0 soumettre:",e);const r=await(0,a.dj)(e);await(0,s.Rv)(n.id,r.id),console.log("Formulaire soumis avec succ\xe8s:",r),p(!1),g(!0),setTimeout((()=>{t("/form-submitted")}),3e3)}catch(r){console.error("Erreur lors de la soumission du formulaire:",r),h(`Erreur lors de la soumission du formulaire: ${r.message}`),p(!1)}},className:"public-form",children:[(0,o.jsxs)("div",{className:"form-section",children:[(0,o.jsx)("h2",{children:"Informations g\xe9n\xe9rales"}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"businessName",children:"Raison sociale"}),(0,o.jsx)("input",{type:"text",id:"businessName",name:"businessName",value:v.businessName,onChange:b,placeholder:"Nom de votre structure (association, entreprise, etc.)"})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"contact",children:"Contact"}),(0,o.jsx)("input",{type:"text",id:"contact",name:"contact",value:v.contact,onChange:b,placeholder:"Nom et pr\xe9nom de la personne \xe0 contacter"})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"role",children:"Qualit\xe9"}),(0,o.jsxs)("select",{id:"role",name:"role",value:v.role,onChange:b,children:[(0,o.jsx)("option",{value:"",children:"S\xe9lectionnez votre fonction"}),(0,o.jsx)("option",{value:"Pr\xe9sident",children:"Pr\xe9sident"}),(0,o.jsx)("option",{value:"Programmateur",children:"Programmateur"}),(0,o.jsx)("option",{value:"G\xe9rant",children:"G\xe9rant"}),(0,o.jsx)("option",{value:"Directeur",children:"Directeur"}),(0,o.jsx)("option",{value:"Autre",children:"Autre"})]})]})]}),(0,o.jsxs)("div",{className:"form-section",children:[(0,o.jsx)("h2",{children:"Coordonn\xe9es"}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"address",children:"Adresse de la raison sociale"}),(0,o.jsx)("textarea",{id:"address",name:"address",value:v.address,onChange:b,placeholder:"Adresse compl\xe8te de votre structure",rows:"3"})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"venue",children:"Lieu ou festival"}),(0,o.jsx)("input",{type:"text",id:"venue",name:"venue",value:v.venue,onChange:b,placeholder:"Nom du lieu ou du festival"})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"email",children:"Email"}),(0,o.jsx)("input",{type:"email",id:"email",name:"email",value:v.email,onChange:b,placeholder:"Adresse email de contact"})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"phone",children:"T\xe9l\xe9phone"}),(0,o.jsx)("input",{type:"tel",id:"phone",name:"phone",value:v.phone,onChange:b,placeholder:"Num\xe9ro de t\xe9l\xe9phone"})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"website",children:"Site web"}),(0,o.jsx)("input",{type:"url",id:"website",name:"website",value:v.website,onChange:b,placeholder:"URL de votre site web (commen\xe7ant par http:// ou https://)"})]})]}),(0,o.jsxs)("div",{className:"form-section",children:[(0,o.jsx)("h2",{children:"Informations administratives"}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"vatNumber",children:"Num\xe9ro intracommunautaire"}),(0,o.jsx)("input",{type:"text",id:"vatNumber",name:"vatNumber",value:v.vatNumber,onChange:b,placeholder:"Num\xe9ro de TVA intracommunautaire (ex: FR12345678901)"})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"siret",children:"SIRET"}),(0,o.jsx)("input",{type:"text",id:"siret",name:"siret",value:v.siret,onChange:b,placeholder:"Num\xe9ro SIRET (14 chiffres)"})]})]}),(0,o.jsx)("div",{className:"form-actions",children:(0,o.jsx)("button",{type:"submit",className:"submit-btn",disabled:f,children:f?"Envoi en cours...":"Envoyer le formulaire"})})]}),(0,o.jsx)("div",{className:"public-form-footer",children:(0,o.jsx)("p",{children:"Les informations recueillies sur ce formulaire sont enregistr\xe9es dans un fichier informatis\xe9 pour la gestion des contrats et la facturation. Elles sont conserv\xe9es pendant la dur\xe9e n\xe9cessaire \xe0 la gestion de la relation contractuelle et sont destin\xe9es aux services concern\xe9s."})})]})}},387:(e,t,n)=>{function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}var i;n.d(t,{AO:()=>d,Gh:()=>R,HS:()=>O,Oi:()=>o,Rr:()=>h,TM:()=>a,pX:()=>V,pb:()=>j,rc:()=>i,tH:()=>U,ue:()=>m,yD:()=>P}),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));const s="popstate";function a(e){return void 0===e&&(e={}),f((function(e,t){let{pathname:n="/",search:r="",hash:i=""}=h(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),u("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:d(t))}),(function(e,t){l("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),e)}function o(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,i){return void 0===n&&(n=null),r({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function h(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function f(e,t,n,a){void 0===a&&(a={});let{window:l=document.defaultView,v5Compat:h=!1}=a,f=l.history,p=i.Pop,m=null,g=v();function v(){return(f.state||{idx:null}).idx}function y(){p=i.Pop;let e=v(),t=null==e?null:e-g;g=e,m&&m({action:p,location:w.location,delta:t})}function b(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:d(e);return n=n.replace(/ $/,"%20"),o(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,f.replaceState(r({},f.state,{idx:g}),""));let w={get action(){return p},get location(){return e(l,f)},listen(e){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(s,y),m=e,()=>{l.removeEventListener(s,y),m=null}},createHref:e=>t(l,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p=i.Push;let r=u(w.location,e,t);n&&n(r,e),g=v()+1;let s=c(r,g),a=w.createHref(r);try{f.pushState(s,"",a)}catch(o){if(o instanceof DOMException&&"DataCloneError"===o.name)throw o;l.location.assign(a)}h&&m&&m({action:p,location:w.location,delta:1})},replace:function(e,t){p=i.Replace;let r=u(w.location,e,t);n&&n(r,e),g=v();let s=c(r,g),a=w.createHref(r);f.replaceState(s,"",a),h&&m&&m({action:p,location:w.location,delta:0})},go:e=>f.go(e)};return w}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function m(e,t,n){return void 0===n&&(n="/"),g(e,t,n,!1)}function g(e,t,n,r){let i=j(("string"===typeof t?h(t):t).pathname||"/",n);if(null==i)return null;let s=v(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=I(i);a=T(s[o],e,r)}return a}function v(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(o(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let l=O([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(o(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),v(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:k(l,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of y(e.path))i(e,t,r);else i(e,t)})),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=y(r.join("/")),o=[];return o.push(...a.map((e=>""===e?s:[s,e].join("/")))),i&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const b=/^:[\w-]+$/,w=3,x=2,E=1,S=10,_=-2,N=e=>"*"===e;function k(e,t){let n=e.split("/"),r=n.length;return n.some(N)&&(r+=_),t&&(r+=x),n.filter((e=>!N(e))).reduce(((e,t)=>e+(b.test(t)?w:""===t?E:S)),r)}function T(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:O([s,u.pathname]),pathnameBase:L(O([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=O([s,u.pathnameBase]))}return a}function C(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:a,pattern:e}}function I(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function j(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function A(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function P(e,t){let n=D(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function R(e,t,n,i){let s;void 0===i&&(i=!1),"string"===typeof e?s=h(e):(s=r({},e),o(!s.pathname||!s.pathname.includes("?"),A("?","pathname","search",s)),o(!s.pathname||!s.pathname.includes("#"),A("#","pathname","hash",s)),o(!s.search||!s.search.includes("#"),A("#","search","hash",s)));let a,l=""===e||""===s.pathname,c=l?"/":s.pathname;if(null==c)a=n;else{let e=t.length-1;if(!i&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}a=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?h(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:M(r),hash:F(i)}}(s,a),d=c&&"/"!==c&&c.endsWith("/"),f=(l||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!f||(u.pathname+="/"),u}const O=e=>e.join("/").replace(/\/\/+/g,"/"),L=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),M=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";class U extends Error{}function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const $=["post","put","patch","delete"],z=(new Set($),["get",...$]);new Set(z),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred")},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},416:(e,t,n)=>{n.d(t,{xI:()=>Dn,hg:()=>lt,x9:()=>ot,CI:()=>ct});var r=n(52),i=n(529),s=n(443);function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var o=n(812);function l(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c=l,u=new i.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new s.Vy("@firebase/auth");function h(e){if(d.logLevel<=s.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];d.error(`Auth (${r.MF}): ${e}`,...n)}}function f(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw v(e,...n)}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return v(e,...n)}function m(e,t,n){const r=Object.assign(Object.assign({},c()),{[t]:n});return new i.FA("auth","Firebase",r).create(t,{appName:e.name})}function g(e){return m(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return u.create(e,...n)}function y(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw v(t,...r)}}function b(e){const t="INTERNAL ASSERTION FAILED: "+e;throw h(t),new Error(t)}function w(e,t){e||b(t)}function x(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function E(){return"http:"===S()||"https:"===S()}function S(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class _{constructor(e,t){this.shortDelay=e,this.longDelay=t,w(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,i.jZ)()||(0,i.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(E()||(0,i.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function N(e,t){w(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class k{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void b("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void b("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void b("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const T={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},C=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],I=new _(3e4,6e4);function j(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function A(e,t,n,r){return D(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let s={},a={};r&&("GET"===t?a=r:s={body:JSON.stringify(r)});const o=(0,i.Am)(Object.assign({key:e.config.apiKey},a)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=Object.assign({method:t,headers:l},s);return(0,i.c1)()||(c.referrerPolicy="no-referrer"),k.fetch()(await R(e,e.config.apiHost,n,o),c)}))}async function D(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},T),t);try{const t=new L(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw M(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw M(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw M(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw M(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw m(e,o,a);f(e,o)}}catch(s){if(s instanceof i.g)throw s;f(e,"network-request-failed",{message:String(s)})}}async function P(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await A(e,t,n,r,i);return"mfaPendingCredential"in s&&f(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function R(e,t,n,r){const i=`${t}${n}?${r}`,s=e,a=s.config.emulator?N(e.config,i):`${e.config.apiScheme}://${i}`;if(C.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}function O(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class L{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(p(this.auth,"network-request-failed"))),I.get())}))}}function M(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=p(e,t,r);return i.customData._tokenResponse=n,i}function F(e){return void 0!==e&&void 0!==e.enterprise}class U{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return O(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function V(e,t){return A(e,"GET","/v2/recaptchaConfig",j(e,t))}async function $(e,t){return A(e,"POST","/v1/accounts:lookup",t)}function z(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function B(e){return 1e3*Number(e)}function q(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return h("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,i.u)(n);return e?JSON.parse(e):(h("Failed to decode base64 JWT payload"),null)}catch(s){return h("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}function H(e){const t=q(e);return y(t,"internal-error"),y("undefined"!==typeof t.exp,"internal-error"),y("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function K(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof FirebaseError&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class W{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class G{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=z(this.lastLoginAt),this.creationTime=z(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Q(e){var t;const n=e.auth,r=await e.getIdToken(),i=await K(e,$(n,{idToken:r}));y(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?J(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new G(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function J(e){return e.map((e=>{var{providerId:t}=e,n=a(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class X{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){y(e.idToken,"internal-error"),y("undefined"!==typeof e.idToken,"internal-error"),y("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):H(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){y(0!==e.length,"internal-error");const t=H(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await D(e,{},(async()=>{const n=(0,i.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await R(e,r,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",k.fetch()(a,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new X;return n&&(y("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(y("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(y("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new X,this.toJSON())}_performRefresh(){return b("not implemented")}}function Y(e,t){y("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Z{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=a(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new W(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new G(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await K(this,this.stsTokenManager.getToken(this.auth,e));return y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,i.Ku)(e),r=await n.getIdToken(t),s=q(r);y(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a="object"===typeof s.firebase?s.firebase:void 0,o=null===a||void 0===a?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:z(B(s.auth_time)),issuedAtTime:z(B(s.iat)),expirationTime:z(B(s.exp)),signInProvider:o||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,i.Ku)(e);await Q(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Z(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Q(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,r.xZ)(this.auth.app))return Promise.reject(g(this.auth));const e=await this.getIdToken();return await K(this,async function(e,t){return A(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:w,isAnonymous:x,providerData:E,stsTokenManager:S}=t;y(b&&S,e,"internal-error");const _=X.fromJSON(this.name,S);y("string"===typeof b,e,"internal-error"),Y(u,e.name),Y(d,e.name),y("boolean"===typeof w,e,"internal-error"),y("boolean"===typeof x,e,"internal-error"),Y(h,e.name),Y(f,e.name),Y(p,e.name),Y(m,e.name),Y(g,e.name),Y(v,e.name);const N=new Z({uid:b,auth:e,email:d,emailVerified:w,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:_,createdAt:g,lastLoginAt:v});return E&&Array.isArray(E)&&(N.providerData=E.map((e=>Object.assign({},e)))),m&&(N._redirectEventId=m),N}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new X;r.updateFromServerResponse(t);const i=new Z({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Q(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];y(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?J(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new X;a.updateFromIdToken(n);const o=new Z({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new G(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(o,l),o}}const ee=new Map;function te(e){w(e instanceof Function,"Expected a class definition");let t=ee.get(e);return t?(w(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ee.set(e,t),t)}class ne{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ne.type="NONE";const re=ne;function ie(e,t,n){return`firebase:${e}:${t}:${n}`}class se{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=ie(this.userKey,r.apiKey,i),this.fullPersistenceKey=ie("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await $(this.auth,{idToken:e}).catch((()=>{}));return t?Z._fromGetAccountInfoResponse(this.auth,t,e):null}return Z._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new se(te(re),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||te(re);const s=ie(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await $(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await Z._fromGetAccountInfoResponse(e,r,t)}else n=Z._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new se(i,e,n)):new se(i,e,n)}}function ae(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ue(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(oe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(he(t))return"Blackberry";if(fe(t))return"Webos";if(le(t))return"Safari";if((t.includes("chrome/")||ce(t))&&!t.includes("edge/"))return"Chrome";if(de(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function oe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/firefox\//i.test(e)}function le(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ce(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/crios\//i.test(e)}function ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/iemobile/i.test(e)}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/android/i.test(e)}function he(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/blackberry/i.test(e)}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/webos/i.test(e)}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return pe(e)||de(e)||fe(e)||he(e)||/windows phone/i.test(e)||ue(e)}function ge(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ae((0,i.ZQ)());break;case"Worker":t=`${ae((0,i.ZQ)())}-${e}`;break;default:t=e}const s=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${r.MF}/${s}`}class ve{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class ye{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class be{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xe(this),this.idTokenSubscription=new xe(this),this.beforeStateQueue=new ve(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=te(t)),this._initializationPromise=this.queue((async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await se.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await $(this,{idToken:e}),n=await Z._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if((0,r.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,r=null===i||void 0===i?void 0:i._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==r||!(null===a||void 0===a?void 0:a.user)||(i=a.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(a)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Q(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,r.xZ)(this.app))return Promise.reject(g(this));const t=e?(0,i.Ku)(e):null;return t&&y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(0,r.xZ)(this.app)?Promise.reject(g(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,r.xZ)(this.app)?Promise.reject(g(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(te(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return A(e,"GET","/v2/passwordPolicy",j(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ye(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new i.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return A(e,"POST","/v2/accounts:revokeToken",j(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&te(e)||this._popupRedirectResolver;y(t,this,"argument-error"),this.redirectPersistenceManager=await se.create(this,[te(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(y(a,this,"internal-error"),a.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ge(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if((0,r.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(d.logLevel<=s.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];d.warn(`Auth (${r.MF}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function we(e){return(0,i.Ku)(e)}class xe{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,i.tD)((e=>this.observer=e))}get next(){return y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ee={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Se(e){return Ee.loadJS(e)}function _e(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Ne{constructor(){this.enterprise=new ke}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ke{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Te="NO_RECAPTCHA";class Ce{constructor(e){this.type="recaptcha-enterprise",this.auth=we(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;F(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(Te)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Ne).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{V(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new U(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&F(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ee.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Se(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Ie(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new Ce(e);let a;if(i)a=Te;else try{a=await s.verify(n)}catch(l){a=await s.verify(n,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function je(e,t,n,r,i){var s,a;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ie(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Ie(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("PHONE_PROVIDER")){const i=await Ie(e,t,n);return r(e,i).catch((async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await Ie(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await Ie(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Ae(e){const t=we(e),n=await V(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new U(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Ce(t).verify()}}function De(e,t,n){const r=we(e);y(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Pe(t),{host:o,port:l}=function(e){const t=Pe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Re(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Re(t)}}}(t),c={url:`${a}//${o}${null===l?"":`:${l}`}/`},u=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return y(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void y((0,i.bD)(c,r.config.emulator)&&(0,i.bD)(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Pe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Re(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Oe{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return b("not implemented")}_getIdTokenResponse(e){return b("not implemented")}_linkToIdToken(e,t){return b("not implemented")}_getReauthenticationResolver(e){return b("not implemented")}}async function Le(e,t){return A(e,"POST","/v1/accounts:signUp",t)}async function Me(e,t){return P(e,"POST","/v1/accounts:signInWithPassword",j(e,t))}class Fe extends Oe{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Fe(e,t,"password")}static _fromEmailAndCode(e,t){return new Fe(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return je(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Me,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return P(e,"POST","/v1/accounts:signInWithEmailLink",j(e,t))}(e,{email:this._email,oobCode:this._password});default:f(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return je(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Le,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return P(e,"POST","/v1/accounts:signInWithEmailLink",j(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:f(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ue(e,t){return P(e,"POST","/v1/accounts:signInWithIdp",j(e,t))}class Ve extends Oe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ve(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):f("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=a(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Ve(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Ue(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ue(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ue(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,i.Am)(t)}return e}}async function $e(e,t){return A(e,"POST","/v1/accounts:sendVerificationCode",j(e,t))}const ze={USER_NOT_FOUND:"user-not-found"};class Be extends Oe{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Be({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Be({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return P(e,"POST","/v1/accounts:signInWithPhoneNumber",j(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await P(e,"POST","/v1/accounts:signInWithPhoneNumber",j(e,t));if(n.temporaryProof)throw M(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return P(e,"POST","/v1/accounts:signInWithPhoneNumber",j(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ze)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Be({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class qe{constructor(e){var t,n,r,s,a,o;const l=(0,i.I9)((0,i.hp)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);y(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(s=l.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(a=l.languageCode)&&void 0!==a?a:null,this.tenantId=null!==(o=l.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=(0,i.I9)((0,i.hp)(e)).link,n=t?(0,i.I9)((0,i.hp)(t)).deep_link_id:null,r=(0,i.I9)((0,i.hp)(e)).deep_link_id;return(r?(0,i.I9)((0,i.hp)(r)).link:null)||r||n||t||e}(e);try{return new qe(t)}catch(n){return null}}}class He{constructor(){this.providerId=He.PROVIDER_ID}static credential(e,t){return Fe._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=qe.parseLink(t);return y(n,"argument-error"),Fe._fromEmailAndCode(e,n.code,n.tenantId)}}He.PROVIDER_ID="password",He.EMAIL_PASSWORD_SIGN_IN_METHOD="password",He.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ke{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class We extends Ke{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ge extends We{constructor(){super("facebook.com")}static credential(e){return Ve._fromParams({providerId:Ge.PROVIDER_ID,signInMethod:Ge.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ge.credentialFromTaggedObject(e)}static credentialFromError(e){return Ge.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ge.credential(t.oauthAccessToken)}catch(n){return null}}}Ge.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ge.PROVIDER_ID="facebook.com";class Qe extends We{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ve._fromParams({providerId:Qe.PROVIDER_ID,signInMethod:Qe.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qe.credentialFromTaggedObject(e)}static credentialFromError(e){return Qe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Qe.credential(n,r)}catch(i){return null}}}Qe.GOOGLE_SIGN_IN_METHOD="google.com",Qe.PROVIDER_ID="google.com";class Je extends We{constructor(){super("github.com")}static credential(e){return Ve._fromParams({providerId:Je.PROVIDER_ID,signInMethod:Je.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Je.credentialFromTaggedObject(e)}static credentialFromError(e){return Je.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Je.credential(t.oauthAccessToken)}catch(n){return null}}}Je.GITHUB_SIGN_IN_METHOD="github.com",Je.PROVIDER_ID="github.com";class Xe extends We{constructor(){super("twitter.com")}static credential(e,t){return Ve._fromParams({providerId:Xe.PROVIDER_ID,signInMethod:Xe.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xe.credentialFromTaggedObject(e)}static credentialFromError(e){return Xe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Xe.credential(n,r)}catch(i){return null}}}Xe.TWITTER_SIGN_IN_METHOD="twitter.com",Xe.PROVIDER_ID="twitter.com";class Ye{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Z._fromIdTokenResponse(e,n,r),s=Ze(n);return new Ye({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ze(n);return new Ye({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ze(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class et extends i.g{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,et.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new et(e,t,n,r)}}function tt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw et._fromErrorAndOperation(e,n,t,r);throw n}))}async function nt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await K(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ye._forOperation(e,"link",r)}async function rt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e;if((0,r.xZ)(i.app))return Promise.reject(g(i));const s="reauthenticate";try{const r=await K(e,tt(i,s,t,e),n);y(r.idToken,i,"internal-error");const a=q(r.idToken);y(a,i,"internal-error");const{sub:o}=a;return y(e.uid===o,i,"user-mismatch"),Ye._forOperation(e,s,r)}catch(a){throw"auth/user-not-found"===(null===a||void 0===a?void 0:a.code)&&f(i,"user-mismatch"),a}}async function it(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(g(e));const i="signIn",s=await tt(e,i,t),a=await Ye._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(a.user),a}async function st(e,t){return it(we(e),t)}async function at(e){const t=we(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function ot(e,t,n){return(0,r.xZ)(e.app)?Promise.reject(g(e)):st((0,i.Ku)(e),He.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&at(e),t}))}function lt(e,t,n,r){return(0,i.Ku)(e).onAuthStateChanged(t,n,r)}function ct(e){return(0,i.Ku)(e).signOut()}function ut(e,t){return A(e,"POST","/v2/accounts/mfaEnrollment:start",j(e,t))}new WeakMap;const dt="__sak";class ht{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dt,"1"),this.storage.removeItem(dt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ft extends ht{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=me(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,i.lT)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ft.type="LOCAL";const pt=ft;function mt(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp(`${r}=([^;]+)`);return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function gt(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class vt{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=gt(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return mt(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=gt(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=gt(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=mt(n);const i=setInterval((()=>{const e=mt(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(i)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}vt.type="COOKIE";class yt extends ht{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}yt.type="SESSION";const bt=yt;class wt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new wt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map((async e=>e(t.origin,i))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function xt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}wt.receivers=[];class Et{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((a,o)=>{const l=xt("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function St(){return window}function _t(){return"undefined"!==typeof St().WorkerGlobalScope&&"function"===typeof St().importScripts}const Nt="firebaseLocalStorageDb",kt="firebaseLocalStorage",Tt="fbase_key";class Ct{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function It(e,t){return e.transaction([kt],t?"readwrite":"readonly").objectStore(kt)}function jt(){const e=indexedDB.open(Nt,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(kt,{keyPath:Tt})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(kt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Nt);return new Ct(e).toPromise()}(),t(await jt()))}))}))}async function At(e,t,n){const r=It(e,!0).put({[Tt]:t,value:n});return new Ct(r).toPromise()}function Dt(e,t){const n=It(e,!0).delete(t);return new Ct(n).toPromise()}class Pt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await jt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _t()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wt._getInstance(_t()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Et(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jt();return await At(e,dt,"1"),await Dt(e,dt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>At(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=It(e,!1).get(t),r=await new Ct(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Dt(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=It(e,!1).getAll();return new Ct(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Pt.type="LOCAL";const Rt=Pt;function Ot(e,t){return A(e,"POST","/v2/accounts/mfaSignIn:start",j(e,t))}_e("rcb"),new _(3e4,6e4);const Lt="recaptcha";async function Mt(e,t,n){var r;if(!e._getRecaptchaConfig())try{await Ae(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){y("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=je(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Te){y((null===n||void 0===n?void 0:n.type)===Lt,e,"argument-error");return ut(e,await Ft(e,t,n))}return ut(e,t)}),"PHONE_PROVIDER");return(await s.catch((e=>Promise.reject(e)))).phoneSessionInfo.sessionInfo}{y("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;y(s,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=je(e,a,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Te){y((null===n||void 0===n?void 0:n.type)===Lt,e,"argument-error");return Ot(e,await Ft(e,t,n))}return Ot(e,t)}),"PHONE_PROVIDER");return(await o.catch((e=>Promise.reject(e)))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=je(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===Te){y((null===n||void 0===n?void 0:n.type)===Lt,e,"argument-error");return $e(e,await Ft(e,t,n))}return $e(e,t)}),"PHONE_PROVIDER");return(await r.catch((e=>Promise.reject(e)))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Ft(e,t,n){y(n.type===Lt,e,"argument-error");const r=await n.verify();y("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Ut{constructor(e){this.providerId=Ut.PROVIDER_ID,this.auth=we(e)}verifyPhoneNumber(e,t){return Mt(this.auth,e,(0,i.Ku)(t))}static credential(e,t){return Be._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ut.credentialFromTaggedObject(t)}static credentialFromError(e){return Ut.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Be._fromTokenResponse(n,r):null}}function Vt(e,t){return t?te(t):(y(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ut.PROVIDER_ID="phone",Ut.PHONE_SIGN_IN_METHOD="phone";class $t extends Oe{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ue(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ue(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ue(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zt(e){return it(e.auth,new $t(e),e.bypassAuthState)}function Bt(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),rt(n,new $t(e),e.bypassAuthState)}async function qt(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),nt(n,new $t(e),e.bypassAuthState)}class Ht{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zt;case"linkViaPopup":case"linkViaRedirect":return qt;case"reauthViaPopup":case"reauthViaRedirect":return Bt;default:f(this.auth,"internal-error")}}resolve(e){w(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){w(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Kt=new _(2e3,1e4);class Wt extends Ht{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Wt.currentPopupAction&&Wt.currentPopupAction.cancel(),Wt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return y(e,this.auth,"internal-error"),e}async onExecution(){w(1===this.filter.length,"Popup operations only handle one event");const e=xt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(p(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(p(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wt.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(p(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Kt.get())};e()}}Wt.currentPopupAction=null;const Gt=new Map;class Qt extends Ht{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Gt.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Yt(t),r=Xt(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Gt.set(this.auth._key(),e)}return this.bypassAuthState||Gt.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Jt(e,t){Gt.set(e._key(),t)}function Xt(e){return te(e._redirectPersistence)}function Yt(e){return ie("pendingRedirect",e.config.apiKey,e.name)}async function Zt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(g(e));const i=we(e),s=Vt(i,t),a=new Qt(i,s,n),o=await a.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class en{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!nn(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(p(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tn(e))}saveEventToCache(e){this.cachedEventUids.add(tn(e)),this.lastProcessedEventTime=Date.now()}}function tn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function nn(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const rn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sn=/^https?/;async function an(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return A(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(on(r))return}catch(n){}f(e,"unauthorized-domain")}function on(e){const t=x(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!sn.test(n))return!1;if(rn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ln=new _(3e4,6e4);function cn(){const e=St().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function un(e){return new Promise(((t,n)=>{var r,i,s;function a(){cn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{cn(),n(p(e,"network-request-failed"))},timeout:ln.get()})}if(null===(i=null===(r=St().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=St().gapi)||void 0===s?void 0:s.load)){const t=_e("iframefcb");return St()[t]=()=>{gapi.load?a():n(p(e,"network-request-failed"))},Se(`${Ee.gapiScript}?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw dn=null,e}))}let dn=null;const hn=new _(5e3,15e3),fn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mn(e){const t=e.config;y(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?N(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,s={apiKey:t.apiKey,appName:e.name,v:r.MF},a=pn.get(e.config.apiHost);a&&(s.eid=a);const o=e._getFrameworks();return o.length&&(s.fw=o.join(",")),`${n}?${(0,i.Am)(s).slice(1)}`}async function gn(e){const t=await function(e){return dn=dn||un(e),dn}(e),n=St().gapi;return y(n,e,"internal-error"),t.open({where:document.body,url:mn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fn,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=p(e,"network-request-failed"),s=St().setTimeout((()=>{r(i)}),hn.get());function a(){St().clearTimeout(s),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}const vn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class yn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function bn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},vn),{width:r.toString(),height:s.toString(),top:a,left:o}),u=(0,i.ZQ)().toLowerCase();n&&(l=ce(u)?"_blank":n),oe(u)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new yn(null);const h=window.open(t||"",l,d);y(h,e,"popup-blocked");try{h.focus()}catch(f){}return new yn(h)}const wn="__/auth/handler",xn="emulator/auth/handler",En=encodeURIComponent("fac");async function Sn(e,t,n,s,a,o){y(e.config.authDomain,e,"auth-domain-config-required"),y(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:r.MF,eventId:a};if(t instanceof Ke){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,i.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))l[e]=t}if(t instanceof We){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const r of Object.keys(c))void 0===c[r]&&delete c[r];const u=await e._getAppCheckToken(),d=u?`#${En}=${encodeURIComponent(u)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${wn}`;return N(t,xn)}(e)}?${(0,i.Am)(c).slice(1)}${d}`}const _n="webStorageSupport";const Nn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bt,this._completeRedirectFn=Zt,this._overrideRedirectResult=Jt}async _openPopup(e,t,n,r){var i;w(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return bn(e,await Sn(e,t,n,x(),r),xt())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){St().location.href=e}(await Sn(e,t,n,x(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(w(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await gn(e),n=new en(e);return t.register("authEvent",(t=>{y(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(_n,{type:_n},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[_n];void 0!==i&&t(!!i),f(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=an(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return me()||le()||pe()}};var kn="@firebase/auth",Tn="1.10.0";class Cn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const In=(0,i.XA)("authIdTokenMaxAge")||300;let jn=null;const An=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>In)return;const i=null===n||void 0===n?void 0:n.token;jn!==i&&(jn=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();const t=(0,r.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,r.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,i.bD)(r,null!==t&&void 0!==t?t:{}))return e;f(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Nn,persistence:[Rt,pt,bt]}),s=(0,i.XA)("authTokenSyncURL");if(s&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(s,location.origin);if(location.origin===e.origin){const t=An(e.toString());!function(e,t,n){(0,i.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){(0,i.Ku)(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}const a=(0,i.Tj)("auth");return a&&De(n,`http://${a}`),n}var Pn;Ee={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=p("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Pn="Browser",(0,r.om)(new o.uA("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;y(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Pn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ge(Pn)},c=new be(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(te);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),(0,r.om)(new o.uA("auth-internal",(e=>(e=>new Cn(e))(we(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.KO)(kn,Tn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Pn)),(0,r.KO)(kn,Tn,"esm2017")},443:(e,t,n)=>{n.d(t,{$b:()=>i,Vy:()=>c});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},a=i.INFO,o={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=o[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...s)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}},472:(e,t,n)=>{n.d(t,{Dc:()=>te,gS:()=>nc,rJ:()=>Go,kd:()=>tc,H9:()=>Qo,x7:()=>Jl,GG:()=>Yl,aU:()=>Zo,My:()=>Ul,P:()=>Rl,BN:()=>Zl,mZ:()=>ec,_M:()=>Ll});var r,i,s=n(52),a=n(812),o=n(443),l=n(529),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},u={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function s(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var a={};function o(e){return-128<=e&&128>e?function(e,t){var n=a;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new s([0|e],0>e?-1:0)})):new s([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return m(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new s(t,0)}var c=o(0),d=o(1),h=o(16777216);function f(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function p(e){return-1==e.h}function m(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new s(n,~e.h).add(d)}function g(e,t){return e.add(m(t))}function v(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(f(t))throw Error("division by zero");if(f(e))return new y(c,c);if(p(e))return t=b(m(e),t),new y(m(t.g),m(t.h));if(p(t))return t=b(e,m(t)),new y(m(t.g),t.h);if(30<e.g.length){if(p(e)||p(t))throw Error("slowDivide_ only works with positive integers.");for(var n=d,r=t;0>=r.l(e);)n=w(n),r=w(r);var i=x(n,1),s=x(r,1);for(r=x(r,2),n=x(n,2);!f(r);){var a=s.add(r);0>=a.l(e)&&(i=i.add(n),s=a),r=x(r,1),n=x(n,1)}return t=g(e,i.j(t)),new y(i,t)}for(i=c;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(s=l(n)).j(t);p(a)||0<a.l(e);)a=(s=l(n-=r)).j(t);f(s)&&(s=d),i=i.add(s),e=g(e,a)}return new y(i,e)}function w(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new s(n,e.h)}function x(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new s(i,e.h)}(e=s.prototype).m=function(){if(p(this))return-m(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(p(this))return"-"+m(this).toString(e);for(var t=l(Math.pow(e,6)),n=this,r="";;){var i=b(n,t).g,s=((0<(n=g(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(f(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return p(e=g(this,e))?-1:f(e)?0:1},e.abs=function(){return p(this)?m(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new s(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(f(this)||f(e))return c;if(p(this))return p(e)?m(this).j(m(e)):m(m(this).j(e));if(p(e))return m(this.j(m(e)));if(0>this.l(h)&&0>e.l(h))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.i(r)>>>16,o=65535&this.i(r),u=e.i(i)>>>16,d=65535&e.i(i);n[2*r+2*i]+=o*d,v(n,2*r+2*i),n[2*r+2*i+1]+=a*d,v(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,v(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,v(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new s(n,0)},e.A=function(e){return b(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new s(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new s(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new s(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,i=u.Md5=t,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return m(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=l(Math.pow(n,8)),i=c,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+a),n);8>a?(a=l(Math.pow(n,a)),i=i.j(a).add(l(o))):i=(i=i.j(r)).add(l(o))}return i},r=u.Integer=s}).apply("undefined"!==typeof c?c:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var d,h,f,p,m,g,v,y,b="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},w={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof b&&b];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function x(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function S(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function _(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function N(e){return/^[\s\xa0]*$/.test(e)}function k(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function T(e){return T[" "](e),e}T[" "]=function(){};var C=-1!=k().indexOf("Gecko")&&!(-1!=k().toLowerCase().indexOf("webkit")&&-1==k().indexOf("Edge"))&&!(-1!=k().indexOf("Trident")||-1!=k().indexOf("MSIE"))&&-1==k().indexOf("Edge");function I(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function j(e){const t={};for(const n in e)t[n]=e[n];return t}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<A.length;t++)n=A[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function P(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function R(e){i.setTimeout((()=>{throw e}),0)}function O(){var e=V;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var L=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new M),(e=>e.reset()));class M{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let F,U=!1,V=new class{constructor(){this.h=this.g=null}add(e,t){const n=L.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},$=()=>{const e=i.Promise.resolve(void 0);F=()=>{e.then(z)}};var z=()=>{for(var e;e=O();){try{e.h.call(e.g)}catch(n){R(n)}var t=L;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}U=!1};function B(){this.s=this.s,this.C=this.C}function q(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},q.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function K(e,t){if(q.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(C){e:{try{T(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:W[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&K.aa.h.call(this)}}x(K,q);var W={2:"touch",3:"pen",4:"mouse"};K.prototype.h=function(){K.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var G="closure_listenable_"+(1e6*Math.random()|0),Q=0;function J(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Q,this.da=this.fa=!1}function X(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Y(e){this.src=e,this.g={},this.h=0}function Z(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(X(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ee(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}Y.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=ee(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new J(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var te="closure_lm_"+(1e6*Math.random()|0),ne={};function re(e,t,n,r,i){if(r&&r.once)return se(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)re(e,t[s],n,r,i);return null}return n=he(n),e&&e[G]?e.K(t,n,a(r)?!!r.capture:!!r,i):ie(e,t,n,!1,r,i)}function ie(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=ue(e);if(l||(e[te]=l=new Y(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ce;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)H||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(le(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function se(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)se(e,t[s],n,r,i);return null}return n=he(n),e&&e[G]?e.L(t,n,a(r)?!!r.capture:!!r,i):ie(e,t,n,!0,r,i)}function ae(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)ae(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=he(n),e&&e[G]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ee(s=e.g[t],n,r,i))&&(X(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=ue(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ee(t,n,r,i)),(n=-1<e?t[e]:null)&&oe(n))}function oe(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[G])Z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(le(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ue(t))?(Z(n,e),0==n.h&&(n.src=null,t[te]=null)):X(e)}}}function le(e){return e in ne?ne[e]:ne[e]="on"+e}function ce(e,t){if(e.da)e=!0;else{t=new K(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&oe(e),e=n.call(r,t)}return e}function ue(e){return(e=e[te])instanceof Y?e:null}var de="__closure_events_fn_"+(1e9*Math.random()>>>0);function he(e){return"function"===typeof e?e:(e[de]||(e[de]=function(t){return e.handleEvent(t)}),e[de])}function fe(){B.call(this),this.i=new Y(this),this.M=this,this.F=null}function pe(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new q(t,e);else if(t instanceof q)t.target=t.target||e;else{var i=t;D(t=new q(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=me(a,r,!0,t)&&i}if(i=me(a=t.g=e,r,!0,t)&&i,i=me(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=me(a=t.g=n[s],r,!1,t)&&i}function me(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&Z(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function ge(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ve(e){e.g=ge((()=>{e.g=null,e.i&&(e.i=!1,ve(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}x(fe,B),fe.prototype[G]=!0,fe.prototype.removeEventListener=function(e,t,n,r){ae(this,e,t,n,r)},fe.prototype.N=function(){if(fe.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)X(n[r]);delete t.g[e],t.h--}}this.F=null},fe.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},fe.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ye extends B{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ve(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function be(e){B.call(this),this.h=e,this.g={}}x(be,B);var we=[];function xe(e){I(e.g,(function(e,t){this.g.hasOwnProperty(t)&&oe(e)}),e),e.g={}}be.prototype.N=function(){be.aa.N.call(this),xe(this)},be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ee=i.JSON.stringify,Se=i.JSON.parse,_e=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function Ne(){}function ke(e){return e.h||(e.h=e.i())}function Te(){}Ne.prototype.h=null;var Ce={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ie(){q.call(this,"d")}function je(){q.call(this,"c")}x(Ie,q),x(je,q);var Ae={},De=null;function Pe(){return De=De||new fe}function Re(e){q.call(this,Ae.La,e)}function Oe(e){const t=Pe();pe(t,new Re(t))}function Le(e,t){q.call(this,Ae.STAT_EVENT,e),this.stat=t}function Me(e){const t=Pe();pe(t,new Le(t,e))}function Fe(e,t){q.call(this,Ae.Ma,e),this.size=t}function Ue(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ve(){this.g=!0}function $e(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return Ee(n)}catch(o){return t}}(e,n)+(r?" "+r:"")}))}Ae.La="serverreachability",x(Re,q),Ae.STAT_EVENT="statevent",x(Le,q),Ae.Ma="timingevent",x(Fe,q),Ve.prototype.xa=function(){this.g=!1},Ve.prototype.info=function(){};var ze,Be={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function He(){}function Ke(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new be(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new We}function We(){this.i=null,this.g="",this.h=!1}x(He,Ne),He.prototype.g=function(){return new XMLHttpRequest},He.prototype.i=function(){return{}},ze=new He;var Ge={},Qe={};function Je(e,t,n){e.L=1,e.v=Et(vt(t)),e.m=n,e.P=!0,Xe(e,null)}function Xe(e,t){e.F=Date.now(),et(e),e.A=vt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Lt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new We,e.g=_n(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ye(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(we[0]=i.toString()),i=we);for(var s=0;s<i.length;s++){var a=re(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?j(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Oe(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ye(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Qe:(n=Number(t.substring(n,r)),isNaN(n)?Ge:(r+=1)+n>t.length?Qe:(t=t.slice(r,r+n),e.C=r+n,t))}function et(e){e.S=Date.now()+e.I,tt(e,e.I)}function tt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ue(c(e.ba,e),t)}function nt(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function rt(e){0==e.j.G||e.J||bn(e.j,e)}function it(e){nt(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,xe(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function st(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||ut(n.h,e)))if(!e.K&&ut(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;yn(n),ln(n)}mn(n),Me(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ue(c(n.Za,n),6e3));if(1>=ct(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else xn(n,11)}else if((e.K||n.g==e)&&yn(n),!N(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(dt(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,xt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=Sn(r,r.J?r.ia:null,r.W),a.K){ht(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(nt(o),et(o)),r.g=a}else pn(r);0<n.i.length&&un(n)}else"stop"!=c[0]&&"close"!=c[0]||xn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?xn(n,7):on(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Oe()}catch(u){}}Ke.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==nn(e)?t.j():this.Y(e)},Ke.prototype.Y=function(e){try{if(e==this.g)e:{const h=nn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||rn(this.g)))){this.J||4!=h||7==t||Oe(),nt(this);var n=this.g.Z();this.X=n;t:if(Ye(this)){var r=rn(this.g);e="";var s=r.length,a=4==nn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){it(this),rt(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Me(12),it(this),rt(this);break e}$e(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,st(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Ze(this,o),e==Qe){4==h&&(this.s=4,Me(14),n=!1),$e(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ge){this.s=4,Me(15),$e(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}$e(this.i,this.l,e,null),st(this,e)}if(Ye(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Me(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),gn(d),d.M=!0,Me(11))}}else $e(this.i,this.l,o,"[Invalid Chunked Response]"),it(this),rt(this)}else $e(this.i,this.l,o,null),st(this,o);4==h&&it(this),this.o&&!this.J&&(4==h?bn(this.j,this):(this.o=!1,et(this)))}else(function(e){const t={};e=(e.g&&2<=nn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(N(e[r]))continue;var n=P(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Me(12)):(this.s=0,Me(13)),it(this),rt(this)}}}catch(h){}},Ke.prototype.cancel=function(){this.J=!0,it(this)},Ke.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Oe(),Me(17)),it(this),this.s=2,rt(this)):tt(this,this.S-e)};var at=class{constructor(e,t){this.g=e,this.map=t}};function ot(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lt(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ct(e){return e.h?1:e.g?e.g.size:0}function ut(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function dt(e,t){e.g?e.g.add(t):e.h=t}function ht(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ft(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return S(e.i)}function pt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}ot.prototype.cancel=function(){if(this.i=ft(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var mt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof gt){this.h=e.h,yt(this,e.j),this.o=e.o,this.g=e.g,bt(this,e.s),this.l=e.l;var t=e.i,n=new Dt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),wt(this,n),this.m=e.m}else e&&(t=String(e).match(mt))?(this.h=!1,yt(this,t[1]||"",!0),this.o=St(t[2]||""),this.g=St(t[3]||"",!0),bt(this,t[4]),this.l=St(t[5]||"",!0),wt(this,t[6]||"",!0),this.m=St(t[7]||"")):(this.h=!1,this.i=new Dt(null,this.h))}function vt(e){return new gt(e)}function yt(e,t,n){e.j=n?St(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function bt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function wt(e,t,n){t instanceof Dt?(e.i=t,function(e,t){t&&!e.j&&(Pt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Rt(this,t),Lt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=_t(t,jt)),e.i=new Dt(t,e.h))}function xt(e,t,n){e.i.set(t,n)}function Et(e){return xt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function St(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function _t(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Nt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Nt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}gt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(_t(t,Tt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(_t(t,Tt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(_t(n,"/"==n.charAt(0)?It:Ct,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",_t(n,At)),e.join("")};var kt,Tt=/[#\/\?@]/g,Ct=/[#\?:]/g,It=/[#\?]/g,jt=/[#\?@]/g,At=/#/g;function Dt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Pt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Rt(e,t){Pt(e),t=Mt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ot(e,t){return Pt(e),t=Mt(e,t),e.g.has(t)}function Lt(e,t,n){Rt(e,t),0<n.length&&(e.i=null,e.g.set(Mt(e,t),S(n)),e.h+=n.length)}function Mt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ft(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Ut(){this.g=new _e}function Vt(e,t,n){const r=n||"";try{pt(e,(function(e,n){let i=e;a(e)&&(i=Ee(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function $t(e){this.l=e.Ub||null,this.j=e.eb||!1}function zt(e,t){fe.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Bt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function qt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ht(e)}function Ht(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Kt(e){let t="";return I(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Wt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Kt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):xt(e,t,n))}function Gt(e){fe.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Dt.prototype).add=function(e,t){Pt(this),this.i=null,e=Mt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Pt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Pt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Pt(this);let t=[];if("string"===typeof e)Ot(this,e)&&(t=t.concat(this.g.get(Mt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Pt(this),this.i=null,Ot(this,e=Mt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},x($t,Ne),$t.prototype.g=function(){return new zt(this.l,this.j)},$t.prototype.i=(kt={},function(){return kt}),x(zt,fe),(e=zt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ht(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ht(this)),this.g&&(this.readyState=3,Ht(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?qt(this):Ht(this),3==this.readyState&&Bt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,qt(this))},e.Qa=function(e){this.g&&(this.response=e,qt(this))},e.ga=function(){this.g&&qt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(zt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),x(Gt,fe);var Qt=/^https?$/i,Jt=["POST","PUT"];function Xt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Yt(e),en(e)}function Yt(e){e.A||(e.A=!0,pe(e,"complete"),pe(e,"error"))}function Zt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=nn(e)||2!=e.Z()))if(e.u&&4==nn(e))ge(e.Ea,0,e);else if(pe(e,"readystatechange"),4==nn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(mt)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Qt.test(a?a.toLowerCase():"")}n=s}if(n)pe(e,"complete"),pe(e,"success");else{e.m=6;try{var o=2<nn(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Yt(e)}}finally{en(e)}}}function en(e,t){if(e.g){tn(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||pe(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function tn(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function nn(e){return e.g?e.g.readyState:0}function rn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(E){return null}}function sn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function an(e){this.Aa=0,this.i=[],this.j=new Ve,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sn("baseRetryDelayMs",5e3,e),this.cb=sn("retryDelaySeedMs",1e4,e),this.Wa=sn("forwardChannelMaxRetries",2,e),this.wa=sn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new ot(e&&e.concurrentRequestLimit),this.Da=new Ut,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function on(e){if(cn(e),3==e.G){var t=e.U++,n=vt(e.I);if(xt(n,"SID",e.K),xt(n,"RID",t),xt(n,"TYPE","terminate"),hn(e,n),(t=new Ke(e,e.j,t)).L=2,t.v=Et(vt(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=_n(t.j,null),t.g.ea(t.v)),t.F=Date.now(),et(t)}En(e)}function ln(e){e.g&&(gn(e),e.g.cancel(),e.g=null)}function cn(e){ln(e),e.u&&(i.clearTimeout(e.u),e.u=null),yn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function un(e){if(!lt(e.h)&&!e.s){e.s=!0;var t=e.Ga;F||$(),U||(F(),U=!0),V.add(t,e),e.B=0}}function dn(e,t){var n;n=t?t.l:e.U++;const r=vt(e.I);xt(r,"SID",e.K),xt(r,"RID",n),xt(r,"AID",e.T),hn(e,r),e.m&&e.o&&Wt(r,e.m,e.o),n=new Ke(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=fn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),dt(e.h,n),Je(n,r,t)}function hn(e,t){e.H&&I(e.H,(function(e,n){xt(t,n,e)})),e.l&&pt({},(function(e,n){xt(t,n,e)}))}function fn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=i[o].g;const l=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),a=!1;else try{Vt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function pn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;F||$(),U||(F(),U=!0),V.add(t,e),e.v=0}}function mn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ue(c(e.Fa,e),wn(e,e.v)),e.v++,!0)}function gn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function vn(e){e.g=new Ke(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=vt(e.qa);xt(t,"RID","rpc"),xt(t,"SID",e.K),xt(t,"AID",e.T),xt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&xt(t,"TO",e.ja),xt(t,"TYPE","xmlhttp"),hn(e,t),e.m&&e.o&&Wt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=Et(vt(t)),n.m=null,n.P=!0,Xe(n,e)}function yn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function bn(e,t){var n=null;if(e.g==t){yn(e),gn(e),e.g=null;var r=2}else{if(!ut(e.h,t))return;n=t.D,ht(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;pe(r=Pe(),new Fe(r,n)),un(e)}else pn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(ct(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ue(c(e.Ga,e,t),wn(e,e.B)),e.B++,!0))}(e,t)||2==r&&mn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:xn(e,5);break;case 4:xn(e,10);break;case 3:xn(e,6);break;default:xn(e,2)}}function wn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function xn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new gt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||yt(r,"https"),Et(r),t?function(e,t){const n=new Ve;if(i.Image){const r=new Image;r.onload=u(Ft,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ft,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ft,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ft,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ve;const n=new AbortController,r=setTimeout((()=>{n.abort(),Ft(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Ft(0,0,!0,t):Ft(0,0,!1,t)})).catch((()=>{clearTimeout(r),Ft(0,0,!1,t)}))}(r.toString(),n)}else Me(2);e.G=0,e.l&&e.l.sa(t),En(e),cn(e)}function En(e){if(e.G=0,e.ka=[],e.l){const t=ft(e.h);0==t.length&&0==e.i.length||(_(e.ka,t),_(e.ka,e.i),e.h.i.length=0,S(e.i),e.i.length=0),e.l.ra()}}function Sn(e,t,n){var r=n instanceof gt?vt(n):new gt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),bt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new gt(null);r&&yt(a,r),t&&(a.g=t),s&&bt(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&xt(r,n,t),xt(r,"VER",e.la),hn(e,r),r}function _n(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Gt(new $t({eb:n})):new Gt(e.pa)).Ha(e.J),t}function Nn(){}function kn(){}function Tn(e,t){fe.call(this),this.g=new an(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!N(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!N(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new jn(this)}function Cn(e){Ie.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function In(){je.call(this),this.status=1}function jn(e){this.g=e}(e=Gt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ze.g(),this.v=this.o?ke(this.o):ke(ze),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Xt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Jt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tn(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Xt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,pe(this,"complete"),pe(this,"abort"),en(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),en(this,!0)),Gt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Zt(this):this.bb())},e.bb=function(){Zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<nn(this)?this.g.status:-1}catch(kt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(kt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Se(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=an.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Me(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=Sn(this,null,this.W),un(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Ke(this,this.j,e);let s=this.o;if(this.S&&(s?(s=j(s),D(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=fn(this,i,t),xt(n=vt(this.I),"RID",e),xt(n,"CVER",22),this.D&&xt(n,"X-HTTP-Session-Id",this.D),hn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Kt(s)))+"&"+t:this.m&&Wt(n,this.m,s)),dt(this.h,i),this.Ua&&xt(n,"TYPE","init"),this.P?(xt(n,"$req",t),xt(n,"SID","null"),i.T=!0,Je(i,n,null)):Je(i,n,t),this.G=2}}else 3==this.G&&(e?dn(this,e):0==this.i.length||lt(this.h)||dn(this))},e.Fa=function(){if(this.u=null,vn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ue(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Me(10),ln(this),vn(this))},e.Za=function(){null!=this.C&&(this.C=null,ln(this),mn(this),Me(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Nn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},kn.prototype.g=function(e,t){return new Tn(e,t)},x(Tn,fe),Tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){on(this.g)},Tn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=Ee(e),e=n);t.i.push(new at(t.Ya++,e)),3==t.G&&un(t)},Tn.prototype.N=function(){this.g.l=null,delete this.j,on(this.g),delete this.g,Tn.aa.N.call(this)},x(Cn,Ie),x(In,je),x(jn,Nn),jn.prototype.ua=function(){pe(this.g,"a")},jn.prototype.ta=function(e){pe(this.g,new Cn(e))},jn.prototype.sa=function(e){pe(this.g,new In)},jn.prototype.ra=function(){pe(this.g,"b")},kn.prototype.createWebChannel=kn.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,y=w.createWebChannelTransport=function(){return new kn},v=w.getStatEventTarget=function(){return Pe()},g=w.Event=Ae,m=w.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Be.NO_ERROR=0,Be.TIMEOUT=8,Be.HTTP_ERROR=6,p=w.ErrorCode=Be,qe.COMPLETE="complete",f=w.EventType=qe,Te.EventType=Ce,Ce.OPEN="a",Ce.CLOSE="b",Ce.ERROR="c",Ce.MESSAGE="d",fe.prototype.listen=fe.prototype.K,h=w.WebChannel=Te,w.FetchXmlHttpFactory=$t,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,d=w.XhrIo=Gt}).apply("undefined"!==typeof b?b:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const x="@firebase/firestore",E="4.7.10";class S{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}S.UNAUTHENTICATED=new S(null),S.GOOGLE_CREDENTIALS=new S("google-credentials-uid"),S.FIRST_PARTY=new S("first-party-uid"),S.MOCK_USER=new S("mock-user");let _="11.5.0";const N=new o.Vy("@firebase/firestore");function k(){return N.logLevel}function T(e){if(N.logLevel<=o.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(j);N.debug(`Firestore (${_}): ${e}`,...i)}}function C(e){if(N.logLevel<=o.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(j);N.error(`Firestore (${_}): ${e}`,...i)}}function I(e){if(N.logLevel<=o.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(j);N.warn(`Firestore (${_}): ${e}`,...i)}}function j(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function A(){const e=`FIRESTORE (${_}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw C(e),new Error(e)}function D(e,t){e||A()}function P(e,t){return e}const R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class O extends l.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class L{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class M{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class F{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(S.UNAUTHENTICATED)))}shutdown(){}}class U{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class V{constructor(e){this.t=e,this.currentUser=S.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){D(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new L;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new L,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{T("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(T("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new L)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(T("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(D("string"==typeof t.accessToken),new M(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return D(null===e||"string"==typeof e),new S(e)}}class ${constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=S.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class z{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new $(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(S.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class B{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,(0,s.xZ)(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){D(void 0===this.o);const n=e=>{null!=e.error&&T("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,T("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{T("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):T("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new B(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(D("string"==typeof e.token),this.R=e.token,new B(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function H(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function K(){return new TextEncoder}class W{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=H(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function G(e,t){return e<t?-1:e>t?1:0}function Q(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return G(r,i);{const s=K(),a=X(s.encode(J(e,n)),s.encode(J(t,n)));return 0!==a?a:G(r,i)}}n+=r>65535?2:1}return G(e.length,t.length)}function J(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function X(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return G(e[n],t[n]);return G(e.length,t.length)}function Y(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}const Z=-62135596800,ee=1e6;class te{static now(){return te.fromMillis(Date.now())}static fromDate(e){return te.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*ee);return new te(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Z)throw new O(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ee}_compareTo(e){return this.seconds===e.seconds?G(this.nanoseconds,e.nanoseconds):G(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Z;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ne{static fromTimestamp(e){return new ne(e)}static min(){return new ne(new te(0,0))}static max(){return new ne(new te(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const re="__name__";class ie{constructor(e,t,n){void 0===t?t=0:t>e.length&&A(),void 0===n?n=e.length-t:n>e.length-t&&A(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ie.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ie?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=ie.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return G(e.length,t.length)}static compareSegments(e,t){const n=ie.isNumericId(e),r=ie.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?ie.extractNumericId(e).compare(ie.extractNumericId(t)):Q(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return r.fromString(e.substring(4,e.length-2))}}class se extends ie{construct(e,t,n){return new se(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new O(R.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new se(e)}static emptyPath(){return new se([])}}const ae=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oe extends ie{construct(e,t,n){return new oe(e,t,n)}static isValidIdentifier(e){return ae.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oe.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===re}static keyField(){return new oe([re])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new O(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new O(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new O(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new O(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new oe(t)}static emptyPath(){return new oe([])}}class le{constructor(e){this.path=e}static fromPath(e){return new le(se.fromString(e))}static fromName(e){return new le(se.fromString(e).popFirst(5))}static empty(){return new le(se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===se.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return se.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new se(e.slice()))}}const ce=-1;class ue{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ue.UNKNOWN_ID=-1;function de(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(1e9===r?new te(n+1,0):new te(n,r));return new fe(i,le.empty(),t)}function he(e){return new fe(e.readTime,e.key,ce)}class fe{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new fe(ne.min(),le.empty(),ce)}static max(){return new fe(ne.max(),le.empty(),ce)}}function pe(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=le.comparator(e.documentKey,t.documentKey),0!==n?n:G(e.largestBatchId,t.largestBatchId))}const me="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ge{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ve(e){if(e.code!==R.FAILED_PRECONDITION||e.message!==me)throw e;T("LocalStore","Unexpectedly lost primary lease")}class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&A(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ye(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ye?t:ye.resolve(t)}catch(e){return ye.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ye.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ye.reject(t)}static resolve(e){return new ye(((t,n)=>{t(e)}))}static reject(e){return new ye(((t,n)=>{n(e)}))}static waitFor(e){return new ye(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=ye.resolve(!1);for(const n of e)t=t.next((e=>e?ye.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new ye(((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next((e=>{s[l]=e,++a,a===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new ye(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function be(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function we(e){return"IndexedDbTransactionError"===e.name}class xe{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.oe(e),this._e=e=>t.writeSequenceNumber(e))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}xe.ae=-1;const Ee=-1;function Se(e){return null==e}function _e(e){return 0===e&&1/e==-1/0}function Ne(e){return"number"==typeof e&&Number.isInteger(e)&&!_e(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const ke="\x01";function Te(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ie(t)),t=Ce(e.get(n),t);return Ie(t)}function Ce(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case ke:n+="\x01\x11";break;default:n+=t}}return n}function Ie(e){return e+ke+"\x01"}const je="remoteDocuments",Ae="owner",De="mutationQueues",Pe="mutations";const Re="documentMutations",Oe="remoteDocumentsV14",Le="remoteDocumentGlobal",Me="targets",Fe="targetDocuments",Ue="targetGlobal",Ve="collectionParents",$e="clientMetadata",ze="bundles",Be="namedQueries",qe="indexConfiguration",He="indexState",Ke="indexEntries",We="documentOverlays",Ge="globals",Qe=[De,Pe,Re,je,Me,Ae,Ue,Fe,$e,Le,Ve,ze,Be],Je=[De,Pe,Re,Oe,Me,Ae,Ue,Fe,$e,Le,Ve,ze,Be,We],Xe=Je,Ye=[...Xe,qe,He,Ke];function Ze(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function et(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function tt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class nt{constructor(e,t){this.comparator=e,this.root=t||it.EMPTY}insert(e,t){return new nt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rt(this.root,e,this.comparator,!1)}getReverseIterator(){return new rt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rt(this.root,e,this.comparator,!0)}}class rt{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:it.RED,this.left=null!=r?r:it.EMPTY,this.right=null!=i?i:it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new it(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return it.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw A();if(this.right.isRed())throw A();const e=this.left.check();if(e!==this.right.check())throw A();return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1,it.EMPTY=new class{constructor(){this.size=0}get key(){throw A()}get value(){throw A()}get color(){throw A()}get left(){throw A()}get right(){throw A()}copy(e,t,n,r,i){return this}insert(e,t,n){return new it(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class st{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new at(this.data.getIterator())}getIteratorFrom(e){return new at(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof st))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new st(this.comparator);return t.data=e,t}}class at{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ot{constructor(e){this.fields=e,e.sort(oe.comparator)}static empty(){return new ot([])}unionWith(e){let t=new st(oe.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ot(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Y(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class lt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new lt("Invalid base64 string: "+e):e}}(e);return new ct(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ct(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return G(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const ut=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dt(e){if(D(!!e),"string"==typeof e){let t=0;const n=ut.exec(e);if(D(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ht(e.seconds),nanos:ht(e.nanos)}}function ht(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ft(e){return"string"==typeof e?ct.fromBase64String(e):ct.fromUint8Array(e)}const pt="server_timestamp",mt="__type__",gt="__previous_value__",vt="__local_write_time__";function yt(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[mt])||void 0===n?void 0:n.stringValue)===pt}function bt(e){const t=e.mapValue.fields[gt];return yt(t)?bt(t):t}function wt(e){const t=dt(e.mapValue.fields[vt].timestampValue);return new te(t.seconds,t.nanos)}class xt{constructor(e,t,n,r,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}const Et="(default)";class St{constructor(e,t){this.projectId=e,this.database=t||Et}static empty(){return new St("","")}get isDefaultDatabase(){return this.database===Et}isEqual(e){return e instanceof St&&e.projectId===this.projectId&&e.database===this.database}}const _t="__type__",Nt="__max__",kt={mapValue:{fields:{__type__:{stringValue:Nt}}}},Tt="__vector__",Ct="value";function It(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?yt(e)?4:Kt(e)?9007199254740991:qt(e)?10:11:A()}function jt(e,t){if(e===t)return!0;const n=It(e);if(n!==It(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return wt(e).isEqual(wt(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=dt(e.timestampValue),r=dt(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ft(e.bytesValue).isEqual(ft(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ht(e.geoPointValue.latitude)===ht(t.geoPointValue.latitude)&&ht(e.geoPointValue.longitude)===ht(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ht(e.integerValue)===ht(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ht(e.doubleValue),r=ht(t.doubleValue);return n===r?_e(n)===_e(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Y(e.arrayValue.values||[],t.arrayValue.values||[],jt);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ze(n)!==Ze(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!jt(n[i],r[i])))return!1;return!0}(e,t);default:return A()}}function At(e,t){return void 0!==(e.values||[]).find((e=>jt(e,t)))}function Dt(e,t){if(e===t)return 0;const n=It(e),r=It(t);if(n!==r)return G(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return G(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ht(e.integerValue||e.doubleValue),r=ht(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Pt(e.timestampValue,t.timestampValue);case 4:return Pt(wt(e),wt(t));case 5:return Q(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ft(e),r=ft(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=G(n[i],r[i]);if(0!==e)return e}return G(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=G(ht(e.latitude),ht(t.latitude));return 0!==n?n:G(ht(e.longitude),ht(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Rt(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a[Ct])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Ct])||void 0===r?void 0:r.arrayValue,u=G((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Rt(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===kt.mapValue&&t===kt.mapValue)return 0;if(e===kt.mapValue)return 1;if(t===kt.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=Q(r[a],s[a]);if(0!==e)return e;const t=Dt(n[r[a]],i[s[a]]);if(0!==t)return t}return G(r.length,s.length)}(e.mapValue,t.mapValue);default:throw A()}}function Pt(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return G(e,t);const n=dt(e),r=dt(t),i=G(n.seconds,r.seconds);return 0!==i?i:G(n.nanos,r.nanos)}function Rt(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Dt(n[i],r[i]);if(e)return e}return G(n.length,r.length)}function Ot(e){return Lt(e)}function Lt(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=dt(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return ft(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return le.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Lt(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Lt(e.fields[i])}`;return n+"}"}(e.mapValue):A()}function Mt(e){switch(It(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=bt(e);return t?16+Mt(t):16;case 5:return 2*e.stringValue.length;case 6:return ft(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Mt(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return et(e.fields,((e,n)=>{t+=e.length+Mt(n)})),t}(e.mapValue);default:throw A()}}function Ft(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ut(e){return!!e&&"integerValue"in e}function Vt(e){return!!e&&"arrayValue"in e}function $t(e){return!!e&&"nullValue"in e}function zt(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Bt(e){return!!e&&"mapValue"in e}function qt(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[_t])||void 0===n?void 0:n.stringValue)===Tt}function Ht(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return et(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Ht(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ht(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Kt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Nt}class Wt{constructor(e){this.value=e}static empty(){return new Wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Bt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ht(t)}setAll(e){let t=oe.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ht(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Bt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Bt(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){et(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Wt(Ht(this.value))}}function Gt(e){const t=[];return et(e.fields,((e,n)=>{const r=new oe([e]);if(Bt(n)){const e=Gt(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new ot(t)}class Qt{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Qt(e,0,ne.min(),ne.min(),ne.min(),Wt.empty(),0)}static newFoundDocument(e,t,n,r){return new Qt(e,1,t,ne.min(),n,r,0)}static newNoDocument(e,t){return new Qt(e,2,t,ne.min(),ne.min(),Wt.empty(),0)}static newUnknownDocument(e,t){return new Qt(e,3,t,ne.min(),ne.min(),Wt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ne.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Jt{constructor(e,t){this.position=e,this.inclusive=t}}function Xt(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?le.comparator(le.fromName(a.referenceValue),n.key):Dt(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Yt(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!jt(e.position[n],t.position[n]))return!1;return!0}class Zt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function en(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class tn{}class nn extends tn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new dn(e,t,n):"array-contains"===t?new mn(e,n):"in"===t?new gn(e,n):"not-in"===t?new vn(e,n):"array-contains-any"===t?new yn(e,n):new nn(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new hn(e,n):new fn(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Dt(t,this.value)):null!==t&&It(this.value)===It(t)&&this.matchesComparison(Dt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return A()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rn extends tn{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new rn(e,t)}matches(e){return sn(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function sn(e){return"and"===e.op}function an(e){return on(e)&&sn(e)}function on(e){for(const t of e.filters)if(t instanceof rn)return!1;return!0}function ln(e){if(e instanceof nn)return e.field.canonicalString()+e.op.toString()+Ot(e.value);if(an(e))return e.filters.map((e=>ln(e))).join(",");{const t=e.filters.map((e=>ln(e))).join(",");return`${e.op}(${t})`}}function cn(e,t){return e instanceof nn?function(e,t){return t instanceof nn&&e.op===t.op&&e.field.isEqual(t.field)&&jt(e.value,t.value)}(e,t):e instanceof rn?function(e,t){return t instanceof rn&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&cn(n,t.filters[r])),!0)}(e,t):void A()}function un(e){return e instanceof nn?function(e){return`${e.field.canonicalString()} ${e.op} ${Ot(e.value)}`}(e):e instanceof rn?function(e){return e.op.toString()+" {"+e.getFilters().map(un).join(" ,")+"}"}(e):"Filter"}class dn extends nn{constructor(e,t,n){super(e,t,n),this.key=le.fromName(n.referenceValue)}matches(e){const t=le.comparator(e.key,this.key);return this.matchesComparison(t)}}class hn extends nn{constructor(e,t){super(e,"in",t),this.keys=pn("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class fn extends nn{constructor(e,t){super(e,"not-in",t),this.keys=pn("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function pn(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>le.fromName(e.referenceValue)))}class mn extends nn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vt(t)&&At(t.arrayValue,this.value)}}class gn extends nn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&At(this.value.arrayValue,t)}}class vn extends nn{constructor(e,t){super(e,"not-in",t)}matches(e){if(At(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!At(this.value.arrayValue,t)}}class yn extends nn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vt(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>At(this.value.arrayValue,e)))}}class bn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.le=null}}function wn(e){return new bn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function xn(e){const t=P(e);if(null===t.le){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ln(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Se(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ot(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ot(e))).join(",")),t.le=e}return t.le}function En(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!en(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!cn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Yt(e.startAt,t.startAt)&&Yt(e.endAt,t.endAt)}function Sn(e){return le.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class _n{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Nn(e,t,n,r,i,s,a,o){return new _n(e,t,n,r,i,s,a,o)}function kn(e){return new _n(e)}function Tn(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Cn(e){return null!==e.collectionGroup}function In(e){const t=P(e);if(null===t.he){t.he=[];const e=new Set;for(const i of t.explicitOrderBy)t.he.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new st(oe.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.he.push(new Zt(r,n))})),e.has(oe.keyField().canonicalString())||t.he.push(new Zt(oe.keyField(),n))}return t.he}function jn(e){const t=P(e);return t.Pe||(t.Pe=An(t,In(e))),t.Pe}function An(e,t){if("F"===e.limitType)return wn(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Zt(e.field,t)}));const n=e.endAt?new Jt(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Jt(e.startAt.position,e.startAt.inclusive):null;return wn(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Dn(e,t){const n=e.filters.concat([t]);return new _n(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Pn(e,t,n){return new _n(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Rn(e,t){return En(jn(e),jn(t))&&e.limitType===t.limitType}function On(e){return`${xn(jn(e))}|lt:${e.limitType}`}function Ln(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>un(e))).join(", ")}]`),Se(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ot(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ot(e))).join(",")),`Target(${t})`}(jn(e))}; limitType=${e.limitType})`}function Mn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):le.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of In(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Xt(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,In(e),t))&&!(e.endAt&&!function(e,t,n){const r=Xt(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,In(e),t))}(e,t)}function Fn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Un(e){return(t,n)=>{let r=!1;for(const i of In(e)){const e=Vn(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Vn(e,t,n){const r=e.field.isKeyField()?le.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Dt(r,i):A()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return A()}}class $n{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){et(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return tt(this.inner)}size(){return this.innerSize}}const zn=new nt(le.comparator);function Bn(){return zn}const qn=new nt(le.comparator);function Hn(){let e=qn;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Kn(e){let t=qn;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Wn(){return Qn()}function Gn(){return Qn()}function Qn(){return new $n((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Jn=new nt(le.comparator),Xn=new st(le.comparator);function Yn(){let e=Xn;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Zn=new st(G);function er(){return Zn}function tr(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_e(t)?"-0":t}}function nr(e){return{integerValue:""+e}}function rr(e,t){return Ne(t)?nr(t):tr(e,t)}class ir{constructor(){this._=void 0}}function sr(e,t,n){return e instanceof lr?function(e,t){const n={fields:{[mt]:{stringValue:pt},[vt]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&yt(t)&&(t=bt(t)),t&&(n.fields[gt]=t),{mapValue:n}}(n,t):e instanceof cr?ur(e,t):e instanceof dr?hr(e,t):function(e,t){const n=or(e,t),r=pr(n)+pr(e.Ie);return Ut(n)&&Ut(e.Ie)?nr(r):tr(e.serializer,r)}(e,t)}function ar(e,t,n){return e instanceof cr?ur(e,t):e instanceof dr?hr(e,t):n}function or(e,t){return e instanceof fr?function(e){return Ut(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class lr extends ir{}class cr extends ir{constructor(e){super(),this.elements=e}}function ur(e,t){const n=mr(t);for(const r of e.elements)n.some((e=>jt(e,r)))||n.push(r);return{arrayValue:{values:n}}}class dr extends ir{constructor(e){super(),this.elements=e}}function hr(e,t){let n=mr(t);for(const r of e.elements)n=n.filter((e=>!jt(e,r)));return{arrayValue:{values:n}}}class fr extends ir{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function pr(e){return ht(e.integerValue||e.doubleValue)}function mr(e){return Vt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class gr{constructor(e,t){this.version=e,this.transformResults=t}}class vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class br{}function wr(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new jr(e.key,vr.none()):new Nr(e.key,e.data,vr.none());{const n=e.data,r=Wt.empty();let i=new st(oe.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new kr(e.key,r,new ot(i.toArray()),vr.none())}}function xr(e,t,n){e instanceof Nr?function(e,t,n){const r=e.value.clone(),i=Cr(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof kr?function(e,t,n){if(!yr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Cr(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Tr(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Er(e,t,n,r){return e instanceof Nr?function(e,t,n,r){if(!yr(e.precondition,t))return n;const i=e.value.clone(),s=Ir(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof kr?function(e,t,n,r){if(!yr(e.precondition,t))return n;const i=Ir(e.fieldTransforms,r,t),s=t.data;return s.setAll(Tr(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return yr(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Sr(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=or(r.transform,e||null);null!=i&&(null===n&&(n=Wt.empty()),n.set(r.field,i))}return n||null}function _r(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Y(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof cr&&t instanceof cr||e instanceof dr&&t instanceof dr?Y(e.elements,t.elements,jt):e instanceof fr&&t instanceof fr?jt(e.Ie,t.Ie):e instanceof lr&&t instanceof lr}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Nr extends br{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class kr extends br{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Tr(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Cr(e,t,n){const r=new Map;D(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,ar(a,o,n[i]))}return r}function Ir(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,sr(e,s,t))}return r}class jr extends br{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ar extends br{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Dr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&xr(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Er(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Er(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Gn();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=wr(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(ne.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Yn())}isEqual(e){return this.batchId===e.batchId&&Y(this.mutations,e.mutations,((e,t)=>_r(e,t)))&&Y(this.baseMutations,e.baseMutations,((e,t)=>_r(e,t)))}}class Pr{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){D(e.mutations.length===n.length);let r=Jn;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Pr(e,t,n,r)}}class Rr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Or{constructor(e,t){this.count=e,this.unchangedNames=t}}var Lr,Mr;function Fr(e){switch(e){case R.OK:return A();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0;default:return A()}}function Ur(e){if(void 0===e)return C("GRPC error has no .code"),R.UNKNOWN;switch(e){case Lr.OK:return R.OK;case Lr.CANCELLED:return R.CANCELLED;case Lr.UNKNOWN:return R.UNKNOWN;case Lr.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Lr.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Lr.INTERNAL:return R.INTERNAL;case Lr.UNAVAILABLE:return R.UNAVAILABLE;case Lr.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Lr.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Lr.NOT_FOUND:return R.NOT_FOUND;case Lr.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Lr.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Lr.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Lr.ABORTED:return R.ABORTED;case Lr.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Lr.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Lr.DATA_LOSS:return R.DATA_LOSS;default:return A()}}(Mr=Lr||(Lr={}))[Mr.OK=0]="OK",Mr[Mr.CANCELLED=1]="CANCELLED",Mr[Mr.UNKNOWN=2]="UNKNOWN",Mr[Mr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mr[Mr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mr[Mr.NOT_FOUND=5]="NOT_FOUND",Mr[Mr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mr[Mr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mr[Mr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mr[Mr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mr[Mr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mr[Mr.ABORTED=10]="ABORTED",Mr[Mr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mr[Mr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mr[Mr.INTERNAL=13]="INTERNAL",Mr[Mr.UNAVAILABLE=14]="UNAVAILABLE",Mr[Mr.DATA_LOSS=15]="DATA_LOSS";let Vr=null;const $r=new r([4294967295,4294967295],0);function zr(e){const t=K().encode(e),n=new i;return n.update(t),new Uint8Array(n.digest())}function Br(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new r([n,i],0),new r([s,a],0)]}class qr{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Hr(`Invalid padding: ${t}`);if(n<0)throw new Hr(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Hr(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Hr(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=r.fromNumber(this.Ee)}Ae(e,t,n){let i=e.add(t.multiply(r.fromNumber(n)));return 1===i.compare($r)&&(i=new r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ee)return!1;const t=zr(e),[n,r]=Br(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);if(!this.Re(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new qr(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ee)return;const t=zr(e),[n,r]=Br(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);this.Ve(e)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Hr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Kr{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Wr.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Kr(ne.min(),r,new nt(G),Bn(),Yn())}}class Wr{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Wr(n,t,Yn(),Yn(),Yn())}}class Gr{constructor(e,t,n,r){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=r}}class Qr{constructor(e,t){this.targetId=e,this.ge=t}}class Jr{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ct.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Xr{constructor(){this.pe=0,this.ye=ei(),this.we=ct.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return 0!==this.pe}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Yn(),t=Yn(),n=Yn();return this.ye.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:A()}})),new Wr(this.we,this.Se,e,t,n)}Me(){this.be=!1,this.ye=ei()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,D(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class Yr{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Bn(),this.$e=Zr(),this.Ue=Zr(),this.Ke=new nt(G)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,(t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:A()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach(((e,n)=>{this.Je(n)&&t(n)}))}Ze(e){const t=e.targetId,n=e.ge.count,r=this.Xe(t);if(r){const i=r.target;if(Sn(i))if(0===n){const e=new le(i.path);this.ze(t,e,Qt.newNoDocument(e,ne.min()))}else D(1===n);else{const r=this.et(t);if(r!==n){const n=this.tt(e),i=n?this.nt(n,e,r):1;if(0!==i){this.Ye(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Vr||Vr.rt(function(e,t,n,r,i){var s,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.ge,this.ke.it(),n,i))}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=ft(n).toUint8Array()}catch(e){if(e instanceof lt)return I("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new qr(s,r,i)}catch(e){return I(e instanceof Hr?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ee?null:a}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.ke.it(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.ze(t,n,null),r++)})),r}ot(e){const t=new Map;this.qe.forEach(((n,r)=>{const i=this.Xe(r);if(i){if(n.current&&Sn(i.target)){const t=new le(i.target.path);this._t(t).has(r)||this.ut(r,t)||this.ze(r,t,Qt.newNoDocument(t,e))}n.ve&&(t.set(r,n.Fe()),n.Me())}}));let n=Yn();this.Ue.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Xe(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.Qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Kr(e,t,this.Ke,this.Qe,n);return this.Qe=Bn(),this.$e=Zr(),this.Ue=Zr(),this.Ke=new nt(G),r}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const r=this.He(e);this.ut(e,t)?r.xe(t,1):r.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Xr,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new st(G),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new st(G),this.$e=this.$e.insert(e,t)),t}Je(e){const t=null!==this.Xe(e);return t||T("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Xr),this.ke.getRemoteKeysForTarget(e).forEach((t=>{this.ze(e,t,null)}))}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Zr(){return new nt(le.comparator)}function ei(){return new nt(le.comparator)}const ti={asc:"ASCENDING",desc:"DESCENDING"},ni={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ri={and:"AND",or:"OR"};class ii{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function si(e,t){return e.useProto3Json||Se(t)?t:{value:t}}function ai(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function oi(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function li(e,t){return ai(e,t.toTimestamp())}function ci(e){return D(!!e),ne.fromTimestamp(function(e){const t=dt(e);return new te(t.seconds,t.nanos)}(e))}function ui(e,t){return di(e,t).canonicalString()}function di(e,t){const n=function(e){return new se(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function hi(e){const t=se.fromString(e);return D(Di(t)),t}function fi(e,t){return ui(e.databaseId,t.path)}function pi(e,t){const n=hi(t);if(n.get(1)!==e.databaseId.projectId)throw new O(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new O(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new le(yi(n))}function mi(e,t){return ui(e.databaseId,t)}function gi(e){const t=hi(e);return 4===t.length?se.emptyPath():yi(t)}function vi(e){return new se(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function yi(e){return D(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function bi(e,t,n){return{name:fi(e,t),fields:n.value.mapValue.fields}}function wi(e,t){let n;if(t instanceof Nr)n={update:bi(e,t.key,t.value)};else if(t instanceof jr)n={delete:fi(e,t.key)};else if(t instanceof kr)n={update:bi(e,t.key,t.data),updateMask:Ai(t.fieldMask)};else{if(!(t instanceof Ar))return A();n={verify:fi(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof lr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof cr)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof dr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof fr)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw A()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:li(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:A()}(e,t.precondition)),n}function xi(e,t){return{documents:[mi(e,t.path)]}}function Ei(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mi(e,i);const s=function(e){if(0!==e.length)return ji(rn.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Ci(e.field),direction:Ni(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=si(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ht:n,parent:i}}function Si(e){let t=gi(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){D(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=_i(e);return t instanceof rn&&an(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new Zt(Ii(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Se(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Jt(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Jt(n,t)}(n.endAt)),Nn(t,i,a,s,o,"F",l,c)}function _i(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ii(e.unaryFilter.field);return nn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ii(e.unaryFilter.field);return nn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ii(e.unaryFilter.field);return nn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ii(e.unaryFilter.field);return nn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return A()}}(e):void 0!==e.fieldFilter?function(e){return nn.create(Ii(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return A()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return rn.create(e.compositeFilter.filters.map((e=>_i(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return A()}}(e.compositeFilter.op))}(e):A()}function Ni(e){return ti[e]}function ki(e){return ni[e]}function Ti(e){return ri[e]}function Ci(e){return{fieldPath:e.canonicalString()}}function Ii(e){return oe.fromServerFormat(e.fieldPath)}function ji(e){return e instanceof nn?function(e){if("=="===e.op){if(zt(e.value))return{unaryFilter:{field:Ci(e.field),op:"IS_NAN"}};if($t(e.value))return{unaryFilter:{field:Ci(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(zt(e.value))return{unaryFilter:{field:Ci(e.field),op:"IS_NOT_NAN"}};if($t(e.value))return{unaryFilter:{field:Ci(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ci(e.field),op:ki(e.op),value:e.value}}}(e):e instanceof rn?function(e){const t=e.getFilters().map((e=>ji(e)));return 1===t.length?t[0]:{compositeFilter:{op:Ti(e.op),filters:t}}}(e):A()}function Ai(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Di(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Pi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ne.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ne.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ct.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Pi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ri{constructor(e){this.Tt=e}}function Oi(e){const t=Si({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Pn(t,t.limit,"L"):t}class Li{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(ht(e.integerValue));else if("doubleValue"in e){const n=ht(e.doubleValue);isNaN(n)?this.ft(t,13):(this.ft(t,15),_e(n)?t.gt(0):t.gt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.ft(t,20),"string"==typeof n&&(n=dt(n)),t.yt(`${n.seconds||""}`),t.gt(n.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(ft(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ft(t,45),t.gt(n.latitude||0),t.gt(n.longitude||0)}else"mapValue"in e?Kt(e)?this.ft(t,Number.MAX_SAFE_INTEGER):qt(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):A()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const n=e.fields||{};this.ft(t,55);for(const r of Object.keys(n))this.wt(r,t),this.Rt(n[r],t)}vt(e,t){var n,r;const i=e.fields||{};this.ft(t,53);const s=Ct,a=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.ft(t,15),t.gt(ht(a)),this.wt(s,t),this.Rt(i[s],t)}Ft(e,t){const n=e.values||[];this.ft(t,50);for(const r of n)this.Rt(r,t)}Dt(e,t){this.ft(t,37),le.fromName(e).path.forEach((e=>{this.ft(t,60),this.Mt(e,t)}))}ft(e,t){e.gt(t)}St(e){e.gt(2)}}Li.xt=new Li;class Mi{constructor(){this.Tn=new Fi}addToCollectionParentIndex(e,t){return this.Tn.add(t),ye.resolve()}getCollectionParents(e,t){return ye.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ye.resolve()}deleteFieldIndex(e,t){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,t){return ye.resolve()}getDocumentsMatchingTarget(e,t){return ye.resolve(null)}getIndexType(e,t){return ye.resolve(0)}getFieldIndexes(e,t){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,t){return ye.resolve(fe.min())}getMinOffsetFromCollectionGroup(e,t){return ye.resolve(fe.min())}updateCollectionGroup(e,t,n){return ye.resolve()}updateIndexEntries(e,t){return ye.resolve()}}class Fi{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new st(se.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new st(se.comparator)).toArray()}}new Uint8Array(0);const Ui={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vi=41943040;class $i{static withCacheSize(e){return new $i(e,$i.DEFAULT_COLLECTION_PERCENTILE,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}$i.DEFAULT_COLLECTION_PERCENTILE=10,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$i.DEFAULT=new $i(Vi,$i.DEFAULT_COLLECTION_PERCENTILE,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$i.DISABLED=new $i(-1,0,0);class zi{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new zi(0)}static Kn(){return new zi(-1)}}const Bi="LruGarbageCollector",qi=1048576;function Hi(e,t){let[n,r]=e,[i,s]=t;const a=G(n,i);return 0===a?G(r,s):a}class Ki{constructor(e){this.Hn=e,this.buffer=new st(Hi),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Hi(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Wi{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return null!==this.Xn}er(e){T(Bi,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){we(e)?T(Bi,"Ignoring IndexedDB error during garbage collection: ",e):await ve(e)}await this.er(3e5)}))}}class Gi{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return ye.resolve(xe.ae);const n=new Ki(t);return this.tr.forEachTarget(e,(e=>n.Zn(e.sequenceNumber))).next((()=>this.tr.rr(e,(e=>n.Zn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(Ui)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ui):this.ir(e,t)))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,r,i,s,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(T("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,l=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),k()<=o.$b.DEBUG&&T("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(a-s)+"ms\n"+`\tRemoved ${i} targets in `+(l-a)+"ms\n"+`\tRemoved ${e} documents in `+(c-l)+"ms\n"+`Total Duration: ${c-u}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Qi(e,t){return new Gi(e,t)}class Ji{constructor(){this.changes=new $n((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ye.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Xi{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Yi{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Er(n.mutation,e,ot.empty(),te.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Yn()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yn();const r=Wn();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Hn();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Wn();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Yn())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Bn();const s=Qn(),a=Qn();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof kr)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Er(a.mutation,t,a.mutation.getFieldMask(),te.now())):s.set(t.key,ot.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new Xi(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=Qn();let r=new nt(((e,t)=>e-t)),i=Yn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||ot.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||Yn()).add(e);r=r.insert(i.batchId,o)}))})).next((()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Gn();l.forEach((e=>{if(!i.has(e)){const r=wr(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return ye.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return le.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Cn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ye.resolve(Wn());let a=ce,o=i;return s.next((t=>ye.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?ye.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,o,t,Yn()))).next((e=>({batchId:a,changes:Kn(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new le(t)).next((e=>{let t=Hn();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Hn();return this.indexManager.getCollectionParents(e,i).next((a=>ye.forEach(a,(a=>{const o=function(e,t){return new _n(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Qt.newInvalidDocument(r)))}));let n=Hn();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Er(s.mutation,r,ot.empty(),te.now()),Mn(t,r)&&(n=n.insert(e,r))})),n}))}}class Zi{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ye.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ci(e.createTime)}}(t)),ye.resolve()}getNamedQuery(e,t){return ye.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(e){return{name:e.name,query:Oi(e.bundledQuery),readTime:ci(e.readTime)}}(t)),ye.resolve()}}class es{constructor(){this.overlays=new nt(le.comparator),this.Rr=new Map}getOverlay(e,t){return ye.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Wn();return ye.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.Et(e,t,r)})),ye.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Rr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Rr.delete(n)),ye.resolve()}getOverlaysForCollection(e,t,n){const r=Wn(),i=t.length+1,s=new le(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ye.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new nt(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Wn(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Wn(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return ye.resolve(a)}Et(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Rr.get(r.largestBatchId).delete(n.key);this.Rr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Rr(t,n));let i=this.Rr.get(t);void 0===i&&(i=Yn(),this.Rr.set(t,i)),this.Rr.set(t,i.add(n.key))}}class ts{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ye.resolve()}}class ns{constructor(){this.Vr=new st(rs.mr),this.gr=new st(rs.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new rs(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.wr(new rs(e,t))}Sr(e,t){e.forEach((e=>this.removeReference(e,t)))}br(e){const t=new le(new se([])),n=new rs(t,e),r=new rs(t,e+1),i=[];return this.gr.forEachInRange([n,r],(e=>{this.wr(e),i.push(e.key)})),i}Dr(){this.Vr.forEach((e=>this.wr(e)))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new le(new se([])),n=new rs(t,e),r=new rs(t,e+1);let i=Yn();return this.gr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new rs(e,0),n=this.Vr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class rs{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return le.comparator(e.key,t.key)||G(e.Cr,t.Cr)}static pr(e,t){return G(e.Cr,t.Cr)||le.comparator(e.key,t.key)}}class is{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new st(rs.mr)}checkEmpty(e){return ye.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Dr(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Mr=this.Mr.add(new rs(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ye.resolve(s)}lookupMutationBatch(e,t){return ye.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Nr(n),i=r<0?0:r;return ye.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(0===this.mutationQueue.length?Ee:this.Fr-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new rs(t,0),r=new rs(t,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([n,r],(e=>{const t=this.Or(e.Cr);i.push(t)})),ye.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new st(G);return t.forEach((e=>{const t=new rs(e,0),r=new rs(e,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([t,r],(e=>{n=n.add(e.Cr)}))})),ye.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;le.isDocumentKey(i)||(i=i.child(""));const s=new rs(new le(i),0);let a=new st(G);return this.Mr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Cr)),!0)}),s),ye.resolve(this.Br(a))}Br(e){const t=[];return e.forEach((e=>{const n=this.Or(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){D(0===this.Lr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Mr;return ye.forEach(t.mutations,(r=>{const i=new rs(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Mr=n}))}qn(e){}containsKey(e,t){const n=new rs(t,0),r=this.Mr.firstAfterOrEqual(n);return ye.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ss{constructor(e){this.kr=e,this.docs=new nt(le.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ye.resolve(n?n.document.mutableCopy():Qt.newInvalidDocument(t))}getEntries(e,t){let n=Bn();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Qt.newInvalidDocument(e))})),ye.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Bn();const s=t.path,a=new le(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||pe(he(a),n)<=0||(r.has(a.key)||Mn(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return ye.resolve(i)}getAllFromCollectionGroup(e,t,n,r){A()}qr(e,t){return ye.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new as(this)}getSize(e){return ye.resolve(this.size)}}class as extends Ji{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(n)})),ye.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}class os{constructor(e){this.persistence=e,this.Qr=new $n((e=>xn(e)),En),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.$r=0,this.Ur=new ns,this.targetCount=0,this.Kr=zi.Un()}forEachTarget(e,t){return this.Qr.forEach(((e,n)=>t(n))),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),ye.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new zi(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ye.resolve()}updateTargetData(e,t){return this.zn(t),ye.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Qr.forEach(((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Qr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),ye.waitFor(i).next((()=>r))}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return ye.resolve(n)}addMatchingKeys(e,t,n){return this.Ur.yr(t,n),ye.resolve()}removeMatchingKeys(e,t,n){this.Ur.Sr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),ye.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),ye.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ur.vr(t);return ye.resolve(n)}containsKey(e,t){return ye.resolve(this.Ur.containsKey(t))}}class ls{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new xe(0),this.zr=!1,this.zr=!0,this.jr=new ts,this.referenceDelegate=e(this),this.Hr=new os(this),this.indexManager=new Mi,this.remoteDocumentCache=function(e){return new ss(e)}((e=>this.referenceDelegate.Jr(e))),this.serializer=new Ri(t),this.Yr=new Zi(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new es,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new is(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){T("MemoryPersistence","Starting transaction:",e);const r=new cs(this.Gr.next());return this.referenceDelegate.Zr(),n(r).next((e=>this.referenceDelegate.Xr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}ei(e,t){return ye.or(Object.values(this.Wr).map((n=>()=>n.containsKey(e,t))))}}class cs extends ge{constructor(e){super(),this.currentSequenceNumber=e}}class us{constructor(e){this.persistence=e,this.ti=new ns,this.ni=null}static ri(e){return new us(e)}get ii(){if(this.ni)return this.ni;throw A()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),ye.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),ye.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ye.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach((e=>this.ii.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.ii.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.ii,(n=>{const r=le.fromPath(n);return this.si(e,r).next((e=>{e||t.removeEntry(r,ne.min())}))})).next((()=>(this.ni=null,t.apply(e))))}updateLimboDocument(e,t){return this.si(e,t).next((e=>{e?this.ii.delete(t.toString()):this.ii.add(t.toString())}))}Jr(e){return 0}si(e,t){return ye.or([()=>ye.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class ds{constructor(e,t){this.persistence=e,this.oi=new $n((e=>Te(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Qi(this,t)}static ri(e,t){return new ds(e,t)}Zr(){}Xr(e){return ye.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}sr(e){let t=0;return this.rr(e,(e=>{t++})).next((()=>t))}rr(e,t){return ye.forEach(this.oi,((n,r)=>this.ar(e,n,r).next((e=>e?ye.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.qr(e,(r=>this.ar(e,r,t).next((e=>{e||(n++,i.removeEntry(r,ne.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ye.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),ye.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),ye.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ye.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Mt(e.data.value)),t}ar(e,t,n){return ye.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.oi.get(t);return ye.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class hs{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=r}static Yi(e,t){let n=Yn(),r=Yn();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new hs(e,t.fromCache,n,r)}}class fs{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ps{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=(0,l.nr)()?8:be((0,l.ZQ)())>0?6:4}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.rs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ss(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new fs;return this._s(e,t,n).next((r=>{if(i.result=r,this.Xi)return this.us(e,t,n,r.size)}))})).next((()=>i.result))}us(e,t,n,r){return n.documentReadCount<this.es?(k()<=o.$b.DEBUG&&T("QueryEngine","SDK will not create cache indexes for query:",Ln(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ye.resolve()):(k()<=o.$b.DEBUG&&T("QueryEngine","Query:",Ln(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ts*r?(k()<=o.$b.DEBUG&&T("QueryEngine","The SDK decides to create cache indexes for query:",Ln(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jn(t))):ye.resolve())}rs(e,t){if(Tn(t))return ye.resolve(null);let n=jn(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Pn(t,null,"F"),n=jn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Yn(...r);return this.ns.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.cs(t,r);return this.ls(t,s,i,n.readTime)?this.rs(e,Pn(t,null,"F")):this.hs(e,s,t,n)}))))})))))}ss(e,t,n,r){return Tn(t)||r.isEqual(ne.min())?ye.resolve(null):this.ns.getDocuments(e,n).next((i=>{const s=this.cs(t,i);return this.ls(t,s,n,r)?ye.resolve(null):(k()<=o.$b.DEBUG&&T("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ln(t)),this.hs(e,s,t,de(r,ce)).next((e=>e)))}))}cs(e,t){let n=new st(Un(e));return t.forEach(((t,r)=>{Mn(e,r)&&(n=n.add(r))})),n}ls(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}_s(e,t,n){return k()<=o.$b.DEBUG&&T("QueryEngine","Using full collection scan to execute query:",Ln(t)),this.ns.getDocumentsMatchingQuery(e,t,fe.min(),n)}hs(e,t,n,r){return this.ns.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const ms="LocalStore",gs=3e8;class vs{constructor(e,t,n,r){this.persistence=e,this.Ps=t,this.serializer=r,this.Ts=new nt(G),this.Is=new $n((e=>xn(e)),En),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yi(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ts)))}}function ys(e,t,n,r){return new vs(e,t,n,r)}async function bs(e,t){const n=P(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.As(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let a=Yn();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({Rs:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function ws(e){const t=P(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Hr.getLastRemoteSnapshotVersion(e)))}function xs(e,t,n){let r=Yn(),i=Yn();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Bn();return n.forEach(((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ne.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):T(ms,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),{Vs:r,fs:i}}))}function Es(e,t){const n=P(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=Ee),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Ss(e,t){const n=P(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Hr.getTargetData(e,t).next((i=>i?(r=i,ye.resolve(r)):n.Hr.allocateTargetId(e).next((i=>(r=new Pi(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Hr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(e.targetId,e),n.Is.set(t,e.targetId)),e}))}async function _s(e,t,n){const r=P(e),i=r.Ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!we(e))throw e;T(ms,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ts=r.Ts.remove(t),r.Is.delete(i.target)}function Ns(e,t,n){const r=P(e);let i=ne.min(),s=Yn();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=P(e),i=r.Is.get(n);return void 0!==i?ye.resolve(r.Ts.get(i)):r.Hr.getTargetData(t,n)}(r,e,jn(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Ps.getDocumentsMatchingQuery(e,t,n?i:ne.min(),n?s:Yn()))).next((e=>(ks(r,Fn(t),e),{documents:e,gs:s})))))}function ks(e,t,n){let r=e.Es.get(t)||ne.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Es.set(t,r)}class Ts{constructor(){this.activeTargetIds=er()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Cs{constructor(){this.ho=new Ts,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Ts,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Is{To(e){}shutdown(){}}const js="ConnectivityMonitor";class As{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){T(js,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){T(js,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ds=null;function Ps(){return null===Ds?Ds=268435456+Math.round(2147483648*Math.random()):Ds++,"0x"+Ds.toString(16)}const Rs="RestConnection",Os={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ls{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${r}`,this.wo=this.databaseId.database===Et?`project_id=${n}`:`project_id=${n}&database_id=${r}`}So(e,t,n,r,i){const s=Ps(),a=this.bo(e,t.toUriEncodedString());T(Rs,`Sending RPC '${e}' ${s}:`,a,n);const o={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(o,r,i),this.vo(e,a,o,n).then((t=>(T(Rs,`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw I(Rs,`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t}))}Co(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=Os[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}class Ms{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}const Fs="WebChannelConnection";class Us extends Ls{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,r){const i=Ps();return new Promise(((s,a)=>{const o=new d;o.setWithCredentials(!0),o.listenOnce(f.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case p.NO_ERROR:const t=o.getResponseJson();T(Fs,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case p.TIMEOUT:T(Fs,`RPC '${e}' ${i} timed out`),a(new O(R.DEADLINE_EXCEEDED,"Request time out"));break;case p.HTTP_ERROR:const n=o.getStatus();if(T(Fs,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(t)>=0?t:R.UNKNOWN}(t.status);a(new O(e,t.message))}else a(new O(R.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new O(R.UNAVAILABLE,"Connection failed."));break;default:A()}}finally{T(Fs,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);T(Fs,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",l,n,15)}))}Wo(e,t,n){const r=Ps(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=y(),a=v(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Do(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");T(Fs,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=s.createWebChannel(c,o);let d=!1,f=!1;const p=new Ms({Fo:t=>{f?T(Fs,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(T(Fs,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),T(Fs,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Mo:()=>u.close()}),b=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return b(u,h.EventType.OPEN,(()=>{f||(T(Fs,`RPC '${e}' stream ${r} transport opened.`),p.Qo())})),b(u,h.EventType.CLOSE,(()=>{f||(f=!0,T(Fs,`RPC '${e}' stream ${r} transport closed`),p.Uo())})),b(u,h.EventType.ERROR,(t=>{f||(f=!0,I(Fs,`RPC '${e}' stream ${r} transport errored:`,t),p.Uo(new O(R.UNAVAILABLE,"The operation could not be completed")))})),b(u,h.EventType.MESSAGE,(t=>{var n;if(!f){const i=t.data[0];D(!!i);const s=i,a=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){T(Fs,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=Lr[e];if(void 0!==t)return Ur(t)}(t),i=a.message;void 0===n&&(n=R.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),f=!0,p.Uo(new O(n,i)),u.close()}else T(Fs,`RPC '${e}' stream ${r} received:`,i),p.Ko(i)}})),b(a,g.STAT_EVENT,(t=>{t.stat===m.PROXY?T(Fs,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===m.NOPROXY&&T(Fs,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.$o()}),0),p}}function Vs(){return"undefined"!=typeof document?document:null}function $s(e){return new ii(e,!0)}class zs{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ti=e,this.timerId=t,this.Go=n,this.zo=r,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),r=Math.max(0,t-n);r>0&&T("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,(()=>(this.Yo=Date.now(),e()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}const Bs="PersistentStream";class qs{constructor(e,t,n,r,i,s,a,o){this.Ti=e,this.n_=n,this.r_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new zs(e,t)}u_(){return 1===this.state||5===this.state||this.c_()}c_(){return 2===this.state||3===this.state}start(){this.__=0,4!==this.state?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==e?this.a_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(C(t.toString()),C("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===R.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.i_===t&&this.V_(n,r)}),(t=>{e((()=>{const e=new O(R.UNKNOWN,"Fetching auth token failed: "+t.message);return this.m_(e)}))}))}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((e=>{n((()=>this.m_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.__?this.g_(e):this.onNext(e)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(e){return T(Bs,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget((()=>this.i_===e?t():(T(Bs,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Hs extends qs{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:A()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(D(void 0===t||"string"==typeof t),ct.fromBase64String(t||"")):(D(void 0===t||t instanceof Buffer||t instanceof Uint8Array),ct.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?R.UNKNOWN:Ur(e.code);return new O(t,e.message||"")}(a);n=new Jr(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=pi(e,r.document.name),s=ci(r.document.updateTime),a=r.document.createTime?ci(r.document.createTime):ne.min(),o=new Wt({mapValue:{fields:r.document.fields}}),l=Qt.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Gr(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=pi(e,r.document),s=r.readTime?ci(r.readTime):ne.min(),a=Qt.newNoDocument(i,s),o=r.removedTargetIds||[];n=new Gr([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=pi(e,r.document),s=r.removedTargetIds||[];n=new Gr([],s,i,null)}else{if(!("filter"in t))return A();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Or(r,i),a=e.targetId;n=new Qr(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ne.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ne.min():t.readTime?ci(t.readTime):ne.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=vi(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Sn(r)?{documents:xi(e,r)}:{query:Ei(e,r).ht},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=oi(e,t.resumeToken);const r=si(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ne.min())>0){n.readTime=ai(e,t.snapshotVersion.toTimestamp());const r=si(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return A()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=vi(this.serializer),t.removeTarget=e,this.I_(t)}}class Ks extends qs{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return D(!!e.streamToken),this.lastStreamToken=e.streamToken,D(!e.writeResults||0===e.writeResults.length),this.listener.D_()}onNext(e){D(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=function(e,t){return e&&e.length>0?(D(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?ci(e.updateTime):ci(t);return n.isEqual(ne.min())&&(n=ci(t)),new gr(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=ci(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=vi(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>wi(this.serializer,e)))};this.I_(t)}}class Ws{}class Gs extends Ws{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new O(R.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,a]=i;return this.connection.So(e,di(t,n),r,s,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new O(R.UNKNOWN,e.toString())}))}Co(e,t,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[a,o]=s;return this.connection.Co(e,di(t,n),r,a,o,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new O(R.UNKNOWN,e.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class Qs{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(e){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,"Online"===e&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(C(t),this.N_=!1):T("OnlineStateTracker",t)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}const Js="RemoteStore";class Xs{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To((e=>{n.enqueueAndForget((async()=>{aa(this)&&(T(Js,"Restarting streams for network reachability change."),await async function(e){const t=P(e);t.W_.add(4),await Zs(t),t.j_.set("Unknown"),t.W_.delete(4),await Ys(t)}(this))}))})),this.j_=new Qs(n,r)}}async function Ys(e){if(aa(e))for(const t of e.G_)await t(!0)}async function Zs(e){for(const t of e.G_)await t(!1)}function ea(e,t){const n=P(e);n.K_.has(t.targetId)||(n.K_.set(t.targetId,t),sa(n)?ia(n):Na(n).c_()&&na(n,t))}function ta(e,t){const n=P(e),r=Na(n);n.K_.delete(t),r.c_()&&ra(n,t),0===n.K_.size&&(r.c_()?r.P_():aa(n)&&n.j_.set("Unknown"))}function na(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ne.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Na(e).y_(t)}function ra(e,t){e.H_.Ne(t),Na(e).w_(t)}function ia(e){e.H_=new Yr({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.K_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),Na(e).start(),e.j_.B_()}function sa(e){return aa(e)&&!Na(e).u_()&&e.K_.size>0}function aa(e){return 0===P(e).W_.size}function oa(e){e.H_=void 0}async function la(e){e.j_.set("Online")}async function ca(e){e.K_.forEach(((t,n)=>{na(e,t)}))}async function ua(e,t){oa(e),sa(e)?(e.j_.q_(t),ia(e)):e.j_.set("Unknown")}async function da(e,t,n){if(e.j_.set("Online"),t instanceof Jr&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.K_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.K_.delete(r),e.H_.removeTarget(r))}(e,t)}catch(n){T(Js,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ha(e,n)}else if(t instanceof Gr?e.H_.We(t):t instanceof Qr?e.H_.Ze(t):e.H_.je(t),!n.isEqual(ne.min()))try{const t=await ws(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.H_.ot(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.K_.get(r);i&&e.K_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.K_.get(t);if(!r)return;e.K_.set(t,r.withResumeToken(ct.EMPTY_BYTE_STRING,r.snapshotVersion)),ra(e,t);const i=new Pi(r.target,t,n,r.sequenceNumber);na(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){T(Js,"Failed to raise snapshot:",t),await ha(e,t)}}async function ha(e,t,n){if(!we(t))throw t;e.W_.add(1),await Zs(e),e.j_.set("Offline"),n||(n=()=>ws(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{T(Js,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await Ys(e)}))}function fa(e,t){return t().catch((n=>ha(e,n,t)))}async function pa(e){const t=P(e),n=ka(t);let r=t.U_.length>0?t.U_[t.U_.length-1].batchId:Ee;for(;ma(t);)try{const e=await Es(t.localStore,r);if(null===e){0===t.U_.length&&n.P_();break}r=e.batchId,ga(t,e)}catch(e){await ha(t,e)}va(t)&&ya(t)}function ma(e){return aa(e)&&e.U_.length<10}function ga(e,t){e.U_.push(t);const n=ka(e);n.c_()&&n.S_&&n.b_(t.mutations)}function va(e){return aa(e)&&!ka(e).u_()&&e.U_.length>0}function ya(e){ka(e).start()}async function ba(e){ka(e).C_()}async function wa(e){const t=ka(e);for(const n of e.U_)t.b_(n.mutations)}async function xa(e,t,n){const r=e.U_.shift(),i=Pr.from(r,t,n);await fa(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await pa(e)}async function Ea(e,t){t&&ka(e).S_&&await async function(e,t){if(function(e){return Fr(e)&&e!==R.ABORTED}(t.code)){const n=e.U_.shift();ka(e).h_(),await fa(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await pa(e)}}(e,t),va(e)&&ya(e)}async function Sa(e,t){const n=P(e);n.asyncQueue.verifyOperationInProgress(),T(Js,"RemoteStore received new credentials");const r=aa(n);n.W_.add(3),await Zs(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await Ys(n)}async function _a(e,t){const n=P(e);t?(n.W_.delete(2),await Ys(n)):t||(n.W_.add(2),await Zs(n),n.j_.set("Unknown"))}function Na(e){return e.J_||(e.J_=function(e,t,n){const r=P(e);return r.M_(),new Hs(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:la.bind(null,e),No:ca.bind(null,e),Lo:ua.bind(null,e),p_:da.bind(null,e)}),e.G_.push((async t=>{t?(e.J_.h_(),sa(e)?ia(e):e.j_.set("Unknown")):(await e.J_.stop(),oa(e))}))),e.J_}function ka(e){return e.Y_||(e.Y_=function(e,t,n){const r=P(e);return r.M_(),new Ks(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:()=>Promise.resolve(),No:ba.bind(null,e),Lo:Ea.bind(null,e),D_:wa.bind(null,e),v_:xa.bind(null,e)}),e.G_.push((async t=>{t?(e.Y_.h_(),await pa(e)):(await e.Y_.stop(),e.U_.length>0&&(T(Js,`Stopping write stream with ${e.U_.length} pending writes`),e.U_=[]))}))),e.Y_}class Ta{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new L,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new Ta(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new O(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ca(e,t){if(C("AsyncQueue",`${t}: ${e}`),we(e))return new O(R.UNAVAILABLE,`${t}: ${e}`);throw e}class Ia{static emptySet(e){return new Ia(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||le.comparator(t.key,n.key):(e,t)=>le.comparator(e.key,t.key),this.keyedMap=Hn(),this.sortedSet=new nt(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ia))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ia;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ja{constructor(){this.Z_=new nt(le.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?0!==e.type&&3===n.type?this.Z_=this.Z_.insert(t,e):3===e.type&&1!==n.type?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Z_=this.Z_.remove(t):1===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):A():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Aa{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Aa(e,t,Ia.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Da{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some((e=>e.ra()))}}class Pa{constructor(){this.queries=Ra(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(e,t){const n=P(e),r=n.queries;n.queries=Ra(),r.forEach(((e,n)=>{for(const r of n.ta)r.onError(t)}))}(this,new O(R.ABORTED,"Firestore shutting down"))}}function Ra(){return new $n((e=>On(e)),Rn)}async function Oa(e,t){const n=P(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.na()&&t.ra()&&(r=2):(s=new Da,r=t.ra()?0:1);try{switch(r){case 0:s.ea=await n.onListen(i,!0);break;case 1:s.ea=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Ca(e,`Initialization of query '${Ln(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.ta.push(t),t.sa(n.onlineState),s.ea&&t.oa(s.ea)&&Ua(n)}async function La(e,t){const n=P(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.ta.indexOf(t);e>=0&&(s.ta.splice(e,1),0===s.ta.length?i=t.ra()?0:1:!s.na()&&t.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ma(e,t){const n=P(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.ta)e.oa(i)&&(r=!0);t.ea=i}}r&&Ua(n)}function Fa(e,t,n){const r=P(e),i=r.queries.get(t);if(i)for(const s of i.ta)s.onError(n);r.queries.delete(t)}function Ua(e){e.ia.forEach((e=>{e.next()}))}var Va,$a;($a=Va||(Va={}))._a="default",$a.Cache="cache";class za{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Aa(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache)return!0;if(!this.ra())return!0;const n="Offline"!==t;return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Pa(e){e=Aa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Va.Cache}}class Ba{constructor(e){this.key=e}}class qa{constructor(e){this.key=e}}class Ha{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Yn(),this.mutatedKeys=Yn(),this.ya=Un(e),this.wa=new Ia(this.ya)}get Sa(){return this.fa}ba(e,t){const n=t?t.Da:new ja,r=t?t.wa:this.wa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Mn(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.va(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.ya(u,o)>0||l&&this.ya(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{wa:s,Da:n,ls:a,mutatedKeys:i}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const s=e.Da.X_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return A()}};return n(e)-n(t)}(e.type,t.type)||this.ya(e.doc,t.doc))),this.Ca(n),r=null!=r&&r;const a=t&&!r?this.Fa():[],o=0===this.pa.size&&this.current&&!r?1:0,l=o!==this.ga;return this.ga=o,0!==s.length||l?{snapshot:new Aa(this.query,e.wa,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({wa:this.wa,Da:new ja,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach((e=>this.fa=this.fa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.fa=this.fa.delete(e))),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Yn(),this.wa.forEach((e=>{this.xa(e.key)&&(this.pa=this.pa.add(e.key))}));const t=[];return e.forEach((e=>{this.pa.has(e)||t.push(new qa(e))})),this.pa.forEach((n=>{e.has(n)||t.push(new Ba(n))})),t}Oa(e){this.fa=e.gs,this.pa=Yn();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Aa.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,0===this.ga,this.hasCachedResults)}}const Ka="SyncEngine";class Wa{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Ga{constructor(e){this.key=e,this.Ba=!1}}class Qa{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new $n((e=>On(e)),Rn),this.qa=new Map,this.Qa=new Set,this.$a=new nt(le.comparator),this.Ua=new Map,this.Ka=new ns,this.Wa={},this.Ga=new Map,this.za=zi.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}async function Ja(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=yo(e);let i;const s=r.ka.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await Ya(r,t,n,!0),i}async function Xa(e,t){const n=yo(e);await Ya(n,t,!0,!1)}async function Ya(e,t,n,r){const i=await Ss(e.localStore,jn(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await Za(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&ea(e.remoteStore,i),o}async function Za(e,t,n,r,i){e.Ha=(t,n,r)=>async function(e,t,n,r){let i=t.view.ba(n);i.ls&&(i=await Ns(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ba(n,i)})));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return ho(e,t.targetId,o.Ma),o.snapshot}(e,t,n,r);const s=await Ns(e.localStore,t,!0),a=new Ha(t,s.gs),o=a.ba(s.documents),l=Wr.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);ho(e,n,c.Ma);const u=new Wa(t,n,a);return e.ka.set(t,u),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),c.snapshot}async function eo(e,t,n){const r=P(e),i=r.ka.get(t),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter((e=>!Rn(e,t)))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await _s(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ta(r.remoteStore,i.targetId),co(r,i.targetId)})).catch(ve)):(co(r,i.targetId),await _s(r.localStore,i.targetId,!0))}async function to(e,t){const n=P(e),r=n.ka.get(t),i=n.qa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ta(n.remoteStore,r.targetId))}async function no(e,t){const n=P(e);try{const e=await function(e,t){const n=P(e),r=t.snapshotVersion;let i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;const a=[];t.targetChanges.forEach(((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Hr.removeMatchingKeys(e,s.removedDocuments,o).next((()=>n.Hr.addMatchingKeys(e,s.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(ct.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=gs||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&a.push(n.Hr.updateTargetData(e,c))}));let o=Bn(),l=Yn();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(xs(e,s,t.documentUpdates).next((e=>{o=e.Vs,l=e.fs}))),!r.isEqual(ne.min())){const t=n.Hr.getLastRemoteSnapshotVersion(e).next((t=>n.Hr.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return ye.waitFor(a).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.Ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ua.get(t);r&&(D(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ba=!0:e.modifiedDocuments.size>0?D(r.Ba):e.removedDocuments.size>0&&(D(r.Ba),r.Ba=!1))})),await mo(n,e,t)}catch(e){await ve(e)}}function ro(e,t,n){const r=P(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ka.forEach(((n,r)=>{const i=r.view.sa(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=P(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.ta)i.sa(t)&&(r=!0)})),r&&Ua(n)}(r.eventManager,t),e.length&&r.La.p_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function io(e,t,n){const r=P(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ua.get(t),s=i&&i.key;if(s){let e=new nt(le.comparator);e=e.insert(s,Qt.newNoDocument(s,ne.min()));const n=Yn().add(s),i=new Kr(ne.min(),new Map,new nt(G),e,n);await no(r,i),r.$a=r.$a.remove(s),r.Ua.delete(t),po(r)}else await _s(r.localStore,t,!1).then((()=>co(r,t,n))).catch(ve)}async function so(e,t){const n=P(e),r=t.batch.batchId;try{const e=await function(e,t){const n=P(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=ye.resolve();return s.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);D(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Yn();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);lo(n,r,null),oo(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mo(n,e)}catch(e){await ve(e)}}async function ao(e,t,n){const r=P(e);try{const e=await function(e,t){const n=P(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(D(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);lo(r,t,n),oo(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await mo(r,e)}catch(n){await ve(n)}}function oo(e,t){(e.Ga.get(t)||[]).forEach((e=>{e.resolve()})),e.Ga.delete(t)}function lo(e,t,n){const r=P(e);let i=r.Wa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Wa[r.currentUser.toKey()]=i}}function co(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.qa.get(t))e.ka.delete(r),n&&e.La.Ja(r,n);e.qa.delete(t),e.isPrimaryClient&&e.Ka.br(t).forEach((t=>{e.Ka.containsKey(t)||uo(e,t)}))}function uo(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);null!==n&&(ta(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ua.delete(n),po(e))}function ho(e,t,n){for(const r of n)r instanceof Ba?(e.Ka.addReference(r.key,t),fo(e,r)):r instanceof qa?(T(Ka,"Document no longer in limbo: "+r.key),e.Ka.removeReference(r.key,t),e.Ka.containsKey(r.key)||uo(e,r.key)):A()}function fo(e,t){const n=t.key,r=n.path.canonicalString();e.$a.get(n)||e.Qa.has(r)||(T(Ka,"New document in limbo: "+n),e.Qa.add(r),po(e))}function po(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new le(se.fromString(t)),r=e.za.next();e.Ua.set(r,new Ga(n)),e.$a=e.$a.insert(n,r),ea(e.remoteStore,new Pi(jn(kn(n.path)),r,"TargetPurposeLimboResolution",xe.ae))}}async function mo(e,t,n){const r=P(e),i=[],s=[],a=[];r.ka.isEmpty()||(r.ka.forEach(((e,o)=>{a.push(r.Ha(o,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=hs.Yi(o.targetId,e);s.push(t)}})))})),await Promise.all(a),r.La.p_(i),await async function(e,t){const n=P(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>ye.forEach(t,(t=>ye.forEach(t.Hi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>ye.forEach(t.Ji,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!we(e))throw e;T(ms,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ts=n.Ts.insert(e,i)}}}(r.localStore,s))}async function go(e,t){const n=P(e);if(!n.currentUser.isEqual(t)){T(Ka,"User change. New user:",t.toKey());const e=await bs(n.localStore,t);n.currentUser=t,function(e,t){e.Ga.forEach((e=>{e.forEach((e=>{e.reject(new O(R.CANCELLED,t))}))})),e.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await mo(n,e.Rs)}}function vo(e,t){const n=P(e),r=n.Ua.get(t);if(r&&r.Ba)return Yn().add(r.key);{let e=Yn();const r=n.qa.get(t);if(!r)return e;for(const t of r){const r=n.ka.get(t);e=e.unionWith(r.view.Sa)}return e}}function yo(e){const t=P(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=no.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vo.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=io.bind(null,t),t.La.p_=Ma.bind(null,t.eventManager),t.La.Ja=Fa.bind(null,t.eventManager),t}function bo(e){const t=P(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=so.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ao.bind(null,t),t}class wo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$s(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return ys(this.persistence,new ps,e.initialUser,this.serializer)}Xa(e){return new ls(us.ri,this.serializer)}Za(e){return new Cs}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wo.provider={build:()=>new wo};class xo extends wo{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){D(this.persistence.referenceDelegate instanceof ds);const n=this.persistence.referenceDelegate.garbageCollector;return new Wi(n,e.asyncQueue,t)}Xa(e){const t=void 0!==this.cacheSizeBytes?$i.withCacheSize(this.cacheSizeBytes):$i.DEFAULT;return new ls((e=>ds.ri(e,t)),this.serializer)}}class Eo{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ro(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=go.bind(null,this.syncEngine),await _a(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Pa}createDatastore(e){const t=$s(e.databaseInfo.databaseId),n=function(e){return new Us(e)}(e.databaseInfo);return function(e,t,n,r){return new Gs(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Xs(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>ro(this.syncEngine,e,0)),As.D()?new As:new Is)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new Qa(e,t,n,r,i,s);return a&&(o.ja=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=P(e);T(Js,"RemoteStore shutting down."),t.W_.add(5),await Zs(t),t.z_.shutdown(),t.j_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Eo.provider={build:()=>new Eo};class So{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):C("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const _o="FirestoreClient";class No{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=S.UNAUTHENTICATED,this.clientId=W.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{T(_o,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(T(_o,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new L;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ca(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function ko(e,t){e.asyncQueue.verifyOperationInProgress(),T(_o,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await bs(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function To(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Co(e);T(_o,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Sa(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Sa(t.remoteStore,n))),e._onlineComponents=t}async function Co(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){T(_o,"Using user provided OfflineComponentProvider");try{await ko(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===R.FAILED_PRECONDITION||e.code===R.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;I("Error using user provided cache. Falling back to memory cache: "+n),await ko(e,new wo)}}else T(_o,"Using default OfflineComponentProvider"),await ko(e,new xo(void 0));return e._offlineComponents}async function Io(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(T(_o,"Using user provided OnlineComponentProvider"),await To(e,e._uninitializedComponentsProvider._online)):(T(_o,"Using default OnlineComponentProvider"),await To(e,new Eo))),e._onlineComponents}function jo(e){return Io(e).then((e=>e.syncEngine))}async function Ao(e){const t=await Io(e),n=t.eventManager;return n.onListen=Ja.bind(null,t.syncEngine),n.onUnlisten=eo.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Xa.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=to.bind(null,t.syncEngine),n}function Do(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new L;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new So({next:o=>{s.su(),t.enqueueAndForget((()=>La(e,a)));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new O(R.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new O(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new za(kn(n.path),s,{includeMetadataChanges:!0,Ta:!0});return Oa(e,a)}(await Ao(e),e.asyncQueue,t,n,r))),r.promise}function Po(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new L;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new So({next:n=>{s.su(),t.enqueueAndForget((()=>La(e,a))),n.fromCache&&"server"===r.source?i.reject(new O(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new za(n,s,{includeMetadataChanges:!0,Ta:!0});return Oa(e,a)}(await Ao(e),e.asyncQueue,t,n,r))),r.promise}function Ro(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Oo=new Map;function Lo(e,t,n){if(!n)throw new O(R.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Mo(e){if(!le.isDocumentKey(e))throw new O(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Fo(e){if(le.isDocumentKey(e))throw new O(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Uo(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":A()}function Vo(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new O(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uo(e);throw new O(R.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}const $o="firestore.googleapis.com",zo=!0;class Bo{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new O(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$o,this.ssl=zo}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:zo;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Vi;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<qi)throw new O(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new O(R.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ro(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new O(R.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new O(R.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new O(R.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qo{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bo({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new O(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bo(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new F;switch(e.type){case"firstParty":return new z(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new O(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Oo.get(e);t&&(T("ComponentProvider","Removing Datastore"),Oo.delete(e),t.terminate())}(this),Promise.resolve()}}class Ho{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ho(this.firestore,e,this._query)}}class Ko{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ko(this.firestore,e,this._key)}}class Wo extends Ho{constructor(e,t,n){super(e,t,kn(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ko(this.firestore,null,new le(e))}withConverter(e){return new Wo(this.firestore,e,this._path)}}function Go(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,l.Ku)(e),Lo("collection","path",t),e instanceof qo){const n=se.fromString(t,...r);return Fo(n),new Wo(e,null,n)}{if(!(e instanceof Ko||e instanceof Wo))throw new O(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(se.fromString(t,...r));return Fo(n),new Wo(e.firestore,null,n)}}function Qo(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,l.Ku)(e),1===arguments.length&&(t=W.newId()),Lo("doc","path",t),e instanceof qo){const n=se.fromString(t,...r);return Mo(n),new Ko(e,null,new le(n))}{if(!(e instanceof Ko||e instanceof Wo))throw new O(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(se.fromString(t,...r));return Mo(n),new Ko(e.firestore,e instanceof Wo?e.converter:null,new le(n))}}const Jo="AsyncQueue";class Xo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new zs(this,"async_queue_retry"),this.Su=()=>{const e=Vs();e&&T(Jo,"Visibility state changed to "+e.visibilityState),this.a_.t_()},this.bu=e;const t=Vs();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Vs();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise((()=>{}));const t=new L;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Vu.push(e),this.Cu())))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!we(e))throw e;T(Jo,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(e){const t=this.bu.then((()=>(this.pu=!0,e().catch((e=>{this.gu=e,this.pu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw C("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.pu=!1,e))))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const r=Ta.createAndSchedule(this,e,t,n,(e=>this.Fu(e)));return this.fu.push(r),r}Du(){this.gu&&A()}verifyOperationInProgress(){}async Mu(){let e;do{e=this.bu,await e}while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then((()=>{this.fu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.fu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Mu()}))}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class Yo extends qo{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Xo,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xo(e),this._firestoreClient=void 0,await e}}}function Zo(e,t){const n="object"==typeof e?e:(0,s.Sx)(),r="string"==typeof e?e:t||Et,i=(0,s.j6)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(0,l.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Vo(e,qo))._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:e._getEmulatorOptions()}),o=`${t}:${n}`;s.host!==$o&&s.host!==o&&I("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},s),{host:o,ssl:!1,emulatorOptions:r});if(!(0,l.bD)(c,a)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=S.MOCK_USER;else{t=(0,l.Fy)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new O(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new S(s)}e._authCredentials=new U(new M(t,n))}}(i,...e)}return i}function el(e){if(e._terminated)throw new O(R.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||tl(e),e._firestoreClient}function tl(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new xt(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ro(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new No(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class nl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nl(ct.fromBase64String(e))}catch(e){throw new O(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new nl(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class rl{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new O(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oe(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class il{constructor(e){this._methodName=e}}class sl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return G(this._lat,e._lat)||G(this._long,e._long)}}class al{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const ol=/^__.*__$/;class ll{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new kr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nr(e,this.data,t,this.fieldTransforms)}}class cl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new kr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ul(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw A()}}class dl{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new dl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.$u(e),r}Uu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.Bu(),r}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return kl(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(0===e.length)throw this.Wu("Document fields must not be empty");if(ul(this.Lu)&&ol.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class hl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||$s(e)}ju(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new dl({Lu:e,methodName:t,zu:n,path:oe.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fl(e){const t=e._freezeSettings(),n=$s(e._databaseId);return new hl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function pl(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.ju(s.merge||s.mergeFields?2:0,t,n,i);El("Data must be an object, but it was:",a,r);const o=wl(r,a);let l,c;if(s.merge)l=new ot(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Sl(t,r,n);if(!a.contains(i))throw new O(R.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Tl(e,i)||e.push(i)}l=new ot(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new ll(new Wt(o),l,c)}class ml extends il{_toFieldTransform(e){if(2!==e.Lu)throw 1===e.Lu?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ml}}function gl(e,t,n,r){const i=e.ju(1,t,n);El("Data must be an object, but it was:",i,r);const s=[],a=Wt.empty();et(r,((e,r)=>{const o=Nl(t,e,n);r=(0,l.Ku)(r);const c=i.Uu(o);if(r instanceof ml)s.push(o);else{const e=bl(r,c);null!=e&&(s.push(o),a.set(o,e))}}));const o=new ot(s);return new cl(a,o,i.fieldTransforms)}function vl(e,t,n,r,i,s){const a=e.ju(1,t,n),o=[Sl(t,r,n)],c=[i];if(s.length%2!=0)throw new O(R.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let l=0;l<s.length;l+=2)o.push(Sl(t,s[l])),c.push(s[l+1]);const u=[],d=Wt.empty();for(let f=o.length-1;f>=0;--f)if(!Tl(u,o[f])){const e=o[f];let t=c[f];t=(0,l.Ku)(t);const n=a.Uu(e);if(t instanceof ml)u.push(e);else{const r=bl(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new ot(u);return new cl(d,h,a.fieldTransforms)}function yl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return bl(n,e.ju(r?4:3,t))}function bl(e,t){if(xl(e=(0,l.Ku)(e)))return El("Unsupported field value:",t,e),wl(e,t);if(e instanceof il)return function(e,t){if(!ul(t.Lu))throw t.Wu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Wu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&4!==t.Lu)throw t.Wu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=bl(i,t.Ku(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,l.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return rr(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=te.fromDate(e);return{timestampValue:ai(t.serializer,n)}}if(e instanceof te){const n=new te(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ai(t.serializer,n)}}if(e instanceof sl)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof nl)return{bytesValue:oi(t.serializer,e._byteString)};if(e instanceof Ko){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Wu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ui(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof al)return function(e,t){return{mapValue:{fields:{[_t]:{stringValue:Tt},[Ct]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Wu("VectorValues must only contain numeric values.");return tr(t.serializer,e)}))}}}}}}(e,t);throw t.Wu(`Unsupported field value: ${Uo(e)}`)}(e,t)}function wl(e,t){const n={};return tt(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):et(e,((e,r)=>{const i=bl(r,t.qu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function xl(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof te||e instanceof sl||e instanceof nl||e instanceof Ko||e instanceof il||e instanceof al)}function El(e,t,n){if(!xl(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Uo(n);throw"an object"===r?t.Wu(e+" a custom object"):t.Wu(e+" "+r)}}function Sl(e,t,n){if((t=(0,l.Ku)(t))instanceof rl)return t._internalPath;if("string"==typeof t)return Nl(e,t);throw kl("Field path arguments must be of type string or ",e,!1,void 0,n)}const _l=new RegExp("[~\\*/\\[\\]]");function Nl(e,t,n){if(t.search(_l)>=0)throw kl(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new rl(...t.split("."))._internalPath}catch(r){throw kl(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function kl(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new O(R.INVALID_ARGUMENT,o+e+l)}function Tl(e,t){return e.some((e=>e.isEqual(t)))}class Cl{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ko(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Il(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jl("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Il extends Cl{data(){return super.data()}}function jl(e,t){return"string"==typeof t?Nl(e,t):t instanceof rl?t._internalPath:t._delegate._internalPath}function Al(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new O(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dl{}class Pl extends Dl{}function Rl(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Dl&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Ml)).length,n=e.filter((e=>e instanceof Ol)).length;if(t>1||t>0&&n>0)throw new O(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Ol extends Pl{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Ol(e,t,n)}_apply(e){const t=this._parse(e);return zl(e._query,t),new Ho(e.firestore,e.converter,Dn(e._query,t))}_parse(e){const t=fl(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new O(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){$l(a,s);const t=[];for(const n of a)t.push(Vl(r,e,n));o={arrayValue:{values:t}}}else o=Vl(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||$l(a,s),o=yl(n,t,a,"in"===s||"not-in"===s);return nn.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Ll(e,t,n){const r=t,i=jl("where",e);return Ol._create(i,r,n)}class Ml extends Dl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ml(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:rn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)zl(n,i),n=Dn(n,i)}(e._query,t),new Ho(e.firestore,e.converter,Dn(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Fl extends Pl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Fl(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new O(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new O(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zt(t,n)}(e._query,this._field,this._direction);return new Ho(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new _n(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Ul(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=jl("orderBy",e);return Fl._create(n,t)}function Vl(e,t,n){if("string"==typeof(n=(0,l.Ku)(n))){if(""===n)throw new O(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cn(t)&&-1!==n.indexOf("/"))throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(se.fromString(n));if(!le.isDocumentKey(r))throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ft(e,new le(r))}if(n instanceof Ko)return Ft(e,n._key);throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uo(n)}.`)}function $l(e,t){if(!Array.isArray(e)||0===e.length)throw new O(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function zl(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new O(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new O(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Bl{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(It(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ft(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw A()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return et(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Ct].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>ht(e.doubleValue)));return new al(i)}convertGeoPoint(e){return new sl(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=bt(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(wt(e));default:return null}}convertTimestamp(e){const t=dt(e);return new te(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=se.fromString(e);D(Di(n));const r=new St(n.get(1),n.get(3)),i=new le(n.popFirst(5));return r.isEqual(t)||C(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function ql(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Hl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kl extends Cl{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Wl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(jl("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Wl extends Kl{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Gl{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Hl(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Wl(this._firestore,this._userDataWriter,n.key,n,new Hl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new O(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Wl(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Hl(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Wl(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Hl(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Ql(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Ql(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return A()}}function Jl(e){e=Vo(e,Ko);const t=Vo(e.firestore,Yo);return Do(el(t),e._key).then((n=>ic(t,e,n)))}class Xl extends Bl{constructor(e){super(),this.firestore=e}convertBytes(e){return new nl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ko(this.firestore,null,t)}}function Yl(e){e=Vo(e,Ho);const t=Vo(e.firestore,Yo),n=el(t),r=new Xl(t);return Al(e._query),Po(n,e._query).then((n=>new Gl(t,r,e,n)))}function Zl(e,t,n){e=Vo(e,Ko);const r=Vo(e.firestore,Yo),i=ql(e.converter,t,n);return rc(r,[pl(fl(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,vr.none())])}function ec(e,t,n){e=Vo(e,Ko);const r=Vo(e.firestore,Yo),i=fl(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),c=3;c<a;c++)o[c-3]=arguments[c];return s="string"==typeof(t=(0,l.Ku)(t))||t instanceof rl?vl(i,"updateDoc",e._key,t,n,o):gl(i,"updateDoc",e._key,t),rc(r,[s.toMutation(e._key,vr.exists(!0))])}function tc(e){return rc(Vo(e.firestore,Yo),[new jr(e._key,vr.none())])}function nc(e,t){const n=Vo(e.firestore,Yo),r=Qo(e),i=ql(e.converter,t);return rc(n,[pl(fl(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,vr.exists(!1))]).then((()=>r))}function rc(e,t){return function(e,t){const n=new L;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=bo(e);try{const e=await function(e,t){const n=P(e),r=te.now(),i=t.reduce(((e,t)=>e.add(t.key)),Yn());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=Bn(),l=Yn();return n.ds.getEntries(e,i).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((i=>{s=i;const a=[];for(const e of t){const t=Sr(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new kr(e.key,t,Gt(t.value.mapValue),vr.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:Kn(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Wa[e.currentUser.toKey()];r||(r=new nt(G)),r=r.insert(t,n),e.Wa[e.currentUser.toKey()]=r}(r,e.batchId,n),await mo(r,e.changes),await pa(r.remoteStore)}catch(e){const t=Ca(e,"Failed to persist write");n.reject(t)}}(await jo(e),t,n))),n.promise}(el(e),t)}function ic(e,t,n){const r=n.docs.get(t._key),i=new Xl(e);return new Kl(e,i,t._key,r,new Hl(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){_=e}(s.MF),(0,s.om)(new a.uA("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new Yo(new V(e.getProvider("auth-internal")),new q(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new O(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new St(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),(0,s.KO)(x,E,e),(0,s.KO)(x,E,"esm2017")}()},529:(e,t,n)=>{n.d(t,{cY:()=>p,FA:()=>T,g:()=>k,dM:()=>N,u:()=>o,Uj:()=>a,Fy:()=>m,tD:()=>O,bD:()=>j,hp:()=>R,T9:()=>h,Tj:()=>u,yU:()=>d,XA:()=>f,Ku:()=>F,ZQ:()=>g,sr:()=>b,c1:()=>y,Im:()=>I,lT:()=>x,zW:()=>S,jZ:()=>v,lV:()=>w,nr:()=>E,Am:()=>D,I9:()=>P,eX:()=>_});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==a||null==o||null==l)throw new s;const c=t<<2|a>>4;if(r.push(c),64!==o){const e=a<<4&240|o>>2;if(r.push(e),64!==l){const e=o<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class s extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},o=function(e){try{return i.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const l=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,c=()=>{try{return l()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ROUTER_BASE_URL:"."}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&o(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},u=e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},d=e=>{const t=u(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},h=()=>{var e;return null===(e=c())||void 0===e?void 0:e.config},f=e=>{var t;return null===(t=c())||void 0===t?void 0:t[`_${e}`]};class p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function m(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(s)),""].join(".")}function g(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function v(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function y(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function b(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function w(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function x(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function E(){return!function(){var e;const t=null===(e=c())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S(){try{return"object"===typeof indexedDB}catch(e){return!1}}function _(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}function N(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class k extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,k.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,T.prototype.create)}}class T{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(C,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new k(n,s,t)}}const C=/\{\$([^}]+)}/g;function I(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function j(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(A(n)&&A(s)){if(!j(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function A(e){return null!==e&&"object"===typeof e}function D(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function P(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function R(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function O(e,t){const n=new L(e,t);return n.subscribe.bind(n)}class L{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=M),void 0===r.error&&(r.error=M),void 0===r.complete&&(r.complete=M);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function M(){}function F(e){return e&&e._delegate?e._delegate:e}},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function $(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case N:return"Profiler";case _:return"StrictMode";case I:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Y(e,t){X(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,_e=null;function Ne(e){if(e=bi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=xi(t),Ee(e.stateNode,e.type,t))}}function ke(e){Se?_e?_e.push(e):_e=[e]:Se=e}function Te(){if(Se){var e=Se,t=_e;if(_e=Se=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Ce(e,t){return e(t)}function Ie(){}var je=!1;function Ae(e,t,n){if(je)return e(t,n);je=!0;try{return Ce(e,t,n)}finally{je=!1,(null!==Se||null!==_e)&&(Ie(),Te())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){Pe=!1}function Oe(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,Me=e}};function $e(e,t,n,r,i,s,a,o,l){Le=!1,Me=null,Oe.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(ze(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return qe(i),e;if(a===r)return qe(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Je=i.unstable_requestPaint,Xe=i.unstable_now,Ye=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=dt(o):0!==(s&=a)&&(r=dt(s))}else 0!==(a=n&~i)?r=dt(a):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,Et,St,_t,Nt,kt=!1,Tt=[],Ct=null,It=null,jt=null,At=new Map,Dt=new Map,Pt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=yi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Nt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){kt=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==It&&Ft(It)&&(It=null),null!==jt&&Ft(jt)&&(jt=null),At.forEach(Ut),Dt.forEach(Ut)}function $t(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return $t(t,e)}if(0<Tt.length){$t(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&$t(Ct,e),null!==It&&$t(It,e),null!==jt&&$t(jt,e),At.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var Bt=w.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var i=bt,s=Bt.transition;Bt.transition=null;try{bt=1,Wt(e,t,n,r)}finally{bt=i,Bt.transition=s}}function Kt(e,t,n,r){var i=bt,s=Bt.transition;Bt.transition=null;try{bt=4,Wt(e,t,n,r)}finally{bt=i,Bt.transition=s}}function Wt(e,t,n,r){if(qt){var i=Qt(e,t,n,r);if(null===i)qr(e,t,r,Gt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,i),!0;case"dragenter":return It=Lt(It,e,t,n,r,i),!0;case"mouseover":return jt=Lt(jt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return At.set(s,Lt(At.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dt.set(s,Lt(Dt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&xt(s),null===(s=Qt(e,t,n,r))&&qr(e,t,r,Gt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=yi(e=xe(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Yt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Yt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=M({},cn,{view:0,detail:0}),hn=sn(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},dn,{relatedTarget:0})),vn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(yn),wn=sn(M({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Nn(){return _n}var kn=M({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(kn),Cn=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn})),jn=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(An),Pn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Mn=u&&(!Rn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Hn(e,t,n,r){ke(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Wn=null;function Gn(e){Fr(e,0)}function Qn(e){if(W(wi(e)))return e}function Jn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Yn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Yn=Zn}else Yn=!1;Xn=Yn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Wn=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn(Wn)){var t=[];Hn(t,Wn,e,xe(e)),Ae(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Wn)}function sr(e,t){if("click"===e)return Qn(t)}function ar(e,t){if("input"===e||"change"===e)return Qn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},_r={};function Nr(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Sr[e]=n[t];return e}u&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var kr=Nr("animationend"),Tr=Nr("animationiteration"),Cr=Nr("animationstart"),Ir=Nr("transitionend"),jr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){jr.set(e,t),l(t,[e])}for(var Pr=0;Pr<Ar.length;Pr++){var Rr=Ar[Pr];Dr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Dr(kr,"onAnimationEnd"),Dr(Tr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if($e.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,c),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var $r="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[$r]){e[$r]=!0,a.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$r]||(t[$r]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Jt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=yi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Ae((function(){var r=s,i=xe(n),a=[];e:{var o=jr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case kr:case Tr:case Cr:l=vn;break;case Ir:l=jn;break;case"scroll":l=hn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=De(p,h))&&u.push(Hr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:wi(l),f=null==c?o:wi(c),(o=new u(m,p+"leave",l,n,i)).target=d,o.relatedTarget=f,m=null,yi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Wr(f))p++;for(f=0,m=h;m;m=Wr(m))f++;for(;0<p-f;)u=Wr(u),p--;for(;0<f-p;)h=Wr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Wr(u),h=Wr(h)}u=null}else u=null;null!==l&&Gr(a,o,l,u,!1),null!==c&&null!==d&&Gr(a,d,c,u,!0)}if("select"===(l=(o=r?wi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Jn;else if(qn(o))if(Xn)g=ar;else{g=ir;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(a,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?wi(r):window,e){case"focusin":(qn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(a,n,i)}var y;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(y=en()):(Yt="value"in(Xt=i)?Xt.value:Xt.textContent,zn=!0)),0<(v=Kr(r,b)).length&&(b=new wn(b,e,null,n,i),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=$n(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return $n(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Rn&&Vn(e,t)?(e=en(),Zt=Yt=Xt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Fr(a,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=De(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=De(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=De(n,s))&&a.unshift(Hr(n,l,o)):i||null!=(l=De(n,s))&&a.push(Hr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Jr,"")}function Yr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xi(e){return e[fi]||null}var Ei=[],Si=-1;function _i(e){return{current:e}}function Ni(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function ki(e,t){Si++,Ei[Si]=e.current,e.current=t}var Ti={},Ci=_i(Ti),Ii=_i(!1),ji=Ti;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ni(Ii),Ni(Ci)}function Ri(e,t,n){if(Ci.current!==Ti)throw Error(s(168));ki(Ci,t),ki(Ii,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,B(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,ji=Ci.current,ki(Ci,e),ki(Ii,Ii.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Oi(e,t,ji),r.__reactInternalMemoizedMergedChildContext=e,Ni(Ii),Ni(Ci),ki(Ci,e)):Ni(Ii),ki(Ii,n)}var Fi=null,Ui=!1,Vi=!1;function $i(e){null===Fi?Fi=[e]:Fi.push(e)}function zi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),We(Ze,zi),i}finally{bt=t,Vi=!1}}return null}var Bi=[],qi=0,Hi=null,Ki=0,Wi=[],Gi=0,Qi=null,Ji=1,Xi="";function Yi(e,t){Bi[qi++]=Ki,Bi[qi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Wi[Gi++]=Ji,Wi[Gi++]=Xi,Wi[Gi++]=Qi,Qi=e;var r=Ji;e=Xi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ji=1<<32-at(t)+i|n<<i|r,Xi=s+e}else Ji=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&(Yi(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=Bi[--qi],Bi[qi]=null,Ki=Bi[--qi],Bi[qi]=null;for(;e===Qi;)Qi=Wi[--Gi],Wi[Gi]=null,Xi=Wi[--Gi],Wi[Gi]=null,Ji=Wi[--Gi],Wi[Gi]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Ji,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=w.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&ys(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case E:return(t=Fc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case D:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:d(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function m(i,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===o.length)return n(i,d),is&&Yi(i,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return is&&Yi(i,m),c}for(d=r(i,d);m<o.length;m++)null!==(g=p(d,i,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),is&&Yi(i,m),c}function g(i,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),is&&Yi(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return is&&Yi(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),is&&Yi(i,g),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&ys(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=gs(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===S?((s=Oc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Rc(a.type,a.key,a.props,null,r.mode,l)).ref=gs(r,s,a),l.return=r,r=l)}return o(r);case E:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(a,r.mode,l)).return=r,r=s}return o(r);case D:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(O(a))return g(r,s,a,l);vs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Mc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var ws=bs(!0),xs=bs(!1),Es=_i(null),Ss=null,_s=null,Ns=null;function ks(){Ns=_s=Ss=null}function Ts(e){var t=Es.current;Ni(Es),e._currentValue=t}function Cs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){Ss=e,Ns=_s=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function js(e){var t=e._currentValue;if(Ns!==e)if(e={context:e,memoizedValue:t,next:null},null===_s){if(null===Ss)throw Error(s(308));_s=e,Ss.dependencies={lanes:0,firstContext:e}}else _s=_s.next=e;return t}var As=null;function Ds(e){null===As?As=[e]:As.push(e)}function Ps(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ds(t)):(n.next=i.next,i.next=n),t.interleaved=n,Rs(e,r)}function Rs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Os=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Rs(e,n)}return null===(i=r.interleaved)?(t.next=t,Ds(r)):(t.next=i.next,i.next=t),r.interleaved=t,Rs(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function $s(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zs(e,t,n,r){var i=e.updateQueue;Os=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Os=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ll|=a,e.lanes=a,e.memoizedState=d}}function Bs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var qs={},Hs=_i(qs),Ks=_i(qs),Ws=_i(qs);function Gs(e){if(e===qs)throw Error(s(174));return e}function Qs(e,t){switch(ki(Ws,t),ki(Ks,e),ki(Hs,qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ni(Hs),ki(Hs,t)}function Js(){Ni(Hs),Ni(Ks),Ni(Ws)}function Xs(e){Gs(Ws.current);var t=Gs(Hs.current),n=le(t,e.type);t!==n&&(ki(Ks,e),ki(Hs,n))}function Ys(e){Ks.current===e&&(Ni(Hs),Ni(Ks))}var Zs=_i(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=w.ReactCurrentDispatcher,ia=w.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function fa(){throw Error(s(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,i,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Ya:Za,e=n(r,i),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,i)}while(ua)}if(ra.current=Xa,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ga(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((sa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,aa.lanes|=a,Ll|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ea(){}function Sa(e,t){var n=aa,r=ya(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,bo=!0),r=r.queue,Oa(ka.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,ja(9,Na.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(s(349));0!==(30&sa)||_a(n,t,i)}return i}function _a(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Na(e,t,n,r){t.value=n,t.getSnapshot=r,Ta(t)&&Ca(e)}function ka(e,t,n){return n((function(){Ta(t)&&Ca(e)}))}function Ta(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ca(e){var t=Rs(e,1);null!==t&&nc(t,e,1,-1)}function Ia(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Wa.bind(null,aa,e),[t.memoizedState,e]}function ja(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Aa(){return ya().memoizedState}function Da(e,t,n,r){var i=va();aa.flags|=e,i.memoizedState=ja(1|t,n,void 0,void 0===r?null:r)}function Pa(e,t,n,r){var i=ya();r=void 0===r?null:r;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==r&&pa(r,a.deps))return void(i.memoizedState=ja(t,n,s,r))}aa.flags|=e,i.memoizedState=ja(1|t,n,s,r)}function Ra(e,t){return Da(8390656,8,e,t)}function Oa(e,t){return Pa(2048,8,e,t)}function La(e,t){return Pa(4,2,e,t)}function Ma(e,t){return Pa(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4,4,Fa.bind(null,t,e),n)}function Va(){}function $a(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function za(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ba(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),aa.lanes|=n,Ll|=n,e.baseState=!0),t)}function qa(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{bt=n,ia.transition=r}}function Ha(){return ya().memoizedState}function Ka(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ga(e))Qa(t,n);else if(null!==(n=Ps(e,t,n,r))){nc(n,e,r,ec()),Ja(n,t,r)}}function Wa(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ga(e))Qa(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Ds(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ps(e,t,i,r))&&(nc(n,e,r,i=ec()),Ja(n,t,r))}}function Ga(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Qa(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xa={readContext:js,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Ya={readContext:js,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:js,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ia,useDebugValue:Va,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ia(!1),t=e[0];return e=qa.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,i=va();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Il)throw Error(s(349));0!==(30&sa)||_a(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ra(ka.bind(null,r,a,e),[e]),r.flags|=2048,ja(9,Na.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Il.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Ji&~(1<<32-at(Ji)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:js,useCallback:$a,useContext:js,useEffect:Oa,useImperativeHandle:Ua,useInsertionEffect:La,useLayoutEffect:Ma,useMemo:za,useReducer:wa,useRef:Aa,useState:function(){return wa(ba)},useDebugValue:Va,useDeferredValue:function(e){return Ba(ya(),oa.memoizedState,e)},useTransition:function(){return[wa(ba)[0],ya().memoizedState]},useMutableSource:Ea,useSyncExternalStore:Sa,useId:Ha,unstable_isNewReconciler:!1},eo={readContext:js,useCallback:$a,useContext:js,useEffect:Oa,useImperativeHandle:Ua,useInsertionEffect:La,useLayoutEffect:Ma,useMemo:za,useReducer:xa,useRef:Aa,useState:function(){return xa(ba)},useDebugValue:Va,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:Ba(t,oa.memoizedState,e)},useTransition:function(){return[xa(ba)[0],ya().memoizedState]},useMutableSource:Ea,useSyncExternalStore:Sa,useId:Ha,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(nc(t,e,r,n),Vs(t,e,r))}};function io(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function so(e,t,n){var r=!1,i=Ti,s=t.contextType;return"object"===typeof s&&null!==s?s=js(s):(i=Di(t)?ji:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ti),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=js(s):(s=Di(t)?ji:Ci.current,i.context=Ai(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),zs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=$(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Hl=r),uo(0,t)},n}function po(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Nc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yo=w.ReactCurrentOwner,bo=!1;function wo(e,t,n,r){t.child=null===e?xs(t,null,n,r):ws(t,e.child,n,r)}function xo(e,t,n,r,i){n=n.render;var s=t.ref;return Is(t,i),r=ma(e,t,n,r,s,i),n=ga(),null===e||bo?(is&&n&&es(t),t.flags|=1,wo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qo(e,t,i))}function Eo(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,So(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return qo(e,t,i)}return t.flags|=1,(e=Pc(s,r)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,qo(e,t,i);0!==(131072&e.flags)&&(bo=!0)}}return ko(e,t,n,r,i)}function _o(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Pl,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Pl,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Pl,Dl),Dl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Pl,Dl),Dl|=r;return wo(e,t,i,n),t.child}function No(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ko(e,t,n,r,i){var s=Di(n)?ji:Ci.current;return s=Ai(t,s),Is(t,i),n=ma(e,t,n,r,s,i),r=ga(),null===e||bo?(is&&r&&es(t),t.flags|=1,wo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qo(e,t,i))}function To(e,t,n,r,i){if(Di(n)){var s=!0;Li(t)}else s=!1;if(Is(t,i),null===t.stateNode)Bo(e,t),so(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=js(c):c=Ai(t,c=Di(n)?ji:Ci.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Os=!1;var h=t.memoizedState;a.state=h,zs(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Ii.current||Os?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Os||io(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ms(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=js(l):l=Ai(t,l=Di(n)?ji:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,r,l),Os=!1,h=t.memoizedState,a.state=h,zs(t,r,a,i);var p=t.memoizedState;o!==d||h!==p||Ii.current||Os?("function"===typeof f&&(no(t,n,f,r),p=t.memoizedState),(c=Os||io(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Co(e,t,n,r,s,i)}function Co(e,t,n,r,i,s){No(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Mi(t,n,!1),qo(e,t,s);r=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,o,s)):wo(e,t,o,s),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Io(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),Qs(e,t.containerInfo)}function jo(e,t,n,r,i){return fs(),ps(i),t.flags|=256,wo(e,t,n,r),t.child}var Ao,Do,Po,Ro,Oo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,n){var r,i=t.pendingProps,a=Zs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),ki(Zs,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,i,0,null),e=Oc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Oo,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(a=Oc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Oo,a);if(0===(1&t.mode))return Uo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Uo(e,t,o,r=co(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Il)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Rs(e,i),nc(r,e,i,-1))}return mc(),Uo(e,t,o,r=co(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Wi[Gi++]=Ji,Wi[Gi++]=Xi,Wi[Gi++]=Qi,Ji=e.id,Xi=e.overflow,Qi=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Pc(r,o):(o=Oc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,i}return e=(o=e.child).sibling,i=Pc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,n,r){return null!==r&&ps(r),ws(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Cs(e.return,t,n)}function $o(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function zo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wo(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vo(e,n,t);else if(19===e.tag)Vo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),$o(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}$o(t,!0,n,null,s);break;case"together":$o(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wo(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Di(t.type)&&Pi(),Ko(t),null;case 3:return r=t.stateNode,Js(),Ni(Ii),Ni(Ci),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Do(e,t),Ko(t),null;case 5:Ys(t);var i=Gs(Ws.current);if(n=t.type,null!==e&&null!=t.stateNode)Po(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ko(t),null}if(e=Gs(Hs.current),ds(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Yr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Yr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Ao(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":J(e,r),i=Q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Ro(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Gs(Ws.current),Gs(Hs.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Yr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Yr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ko(t),null;case 13:if(Ni(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,a=!1;else if(a=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hi]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),a=!1}else null!==ss&&(ac(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Rl&&(Rl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Js(),Do(e,t),null===e&&zr(t.stateNode.containerInfo),Ko(t),null;case 10:return Ts(t.type._context),Ko(t),null;case 19:if(Ni(Zs),null===(a=t.memoizedState))return Ko(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ho(a,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Ho(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>zl&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Ko(t),null}else 2*Xe()-a.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=Zs.current,ki(Zs,r?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Go(e,t){switch(ts(t),t.tag){case 1:return Di(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Js(),Ni(Ii),Ni(Ci),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ys(t),null;case 13:if(Ni(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ni(Zs),null;case 4:return Js(),null;case 10:return Ts(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ao=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Do=function(){},Po=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Gs(Hs.current);var s,a=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),a=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ro=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qo=!1,Jo=!1,Xo="function"===typeof WeakSet?WeakSet:Set,Yo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_c(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){_c(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Jo||Zo(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&el(n,t,a),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Jo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){_c(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Jo=(r=Jo)||null!==n.memoizedState,hl(e,t,n),Jo=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(a,o,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){_c(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){_c(e,e.return,g)}try{nl(5,e,e.return)}catch(g){_c(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){_c(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(i,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":Y(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){_c(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){_c(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){_c(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||($l=Xe())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Jo=(u=Jo)||d,ml(t,e),Jo=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Yo=e,d=e.child;null!==d;){for(h=Yo=d;null!==Yo;){switch(p=(f=Yo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){_c(r,n,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==p?(p.return=f,Yo=p):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){_c(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){_c(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ol(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(s(161))}}catch(o){_c(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Yo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Yo;){var i=Yo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Qo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=Qo;var c=Jo;if(Qo=a,(Jo=l)&&!c)for(Yo=i;null!==Yo;)l=(a=Yo).child,22===a.tag&&null!==a.memoizedState?El(i):null!==l?(l.return=a,Yo=l):El(i);for(;null!==s;)Yo=s,bl(s,t,n),s=s.sibling;Yo=i,Qo=o,Jo=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Yo=s):wl(e)}}function wl(e){for(;null!==Yo;){var t=Yo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Jo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Bs(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(s(163))}Jo||512&t.flags&&il(t)}catch(f){_c(t,t.return,f)}}if(t===e){Yo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Yo=n;break}Yo=t.return}}function xl(e){for(;null!==Yo;){var t=Yo;if(t===e){Yo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Yo=n;break}Yo=t.return}}function El(e){for(;null!==Yo;){var t=Yo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){_c(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){_c(t,i,l)}}var s=t.return;try{il(t)}catch(l){_c(t,s,l)}break;case 5:var a=t.return;try{il(t)}catch(l){_c(t,a,l)}}}catch(l){_c(t,t.return,l)}if(t===e){Yo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Yo=o;break}Yo=t.return}}var Sl,_l=Math.ceil,Nl=w.ReactCurrentDispatcher,kl=w.ReactCurrentOwner,Tl=w.ReactCurrentBatchConfig,Cl=0,Il=null,jl=null,Al=0,Dl=0,Pl=_i(0),Rl=0,Ol=null,Ll=0,Ml=0,Fl=0,Ul=null,Vl=null,$l=0,zl=1/0,Bl=null,ql=!1,Hl=null,Kl=null,Wl=!1,Gl=null,Ql=0,Jl=0,Xl=null,Yl=-1,Zl=0;function ec(){return 0!==(6&Cl)?Xe():-1!==Yl?Yl:Yl=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Al?Al&-Al:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,r){if(50<Jl)throw Jl=0,Xl=null,Error(s(185));vt(e,n,r),0!==(2&Cl)&&e===Il||(e===Il&&(0===(2&Cl)&&(Ml|=n),4===Rl&&oc(e,Al)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(zl=Xe()+500,Ui&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Il?Al:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Ui=!0,$i(e)}(lc.bind(null,e)):$i(lc.bind(null,e)),ai((function(){0===(6&Cl)&&zi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Yl=-1,Zl=0,0!==(6&Cl))throw Error(s(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Cl;Cl|=2;var a=pc();for(Il===e&&Al===t||(Bl=null,zl=Xe()+500,hc(e,t));;)try{yc();break}catch(l){fc(e,l)}ks(),Nl.current=a,Cl=i,null!==jl?t=0:(Il=null,Al=0,t=Rl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ol,hc(e,0),oc(e,r),rc(e,Xe()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=pt(e))&&(r=a,t=sc(e,a))),1===t))throw n=Ol,hc(e,0),oc(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,Vl,Bl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=$l+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Vl,Bl),t);break}xc(e,Vl,Bl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_l(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Vl,Bl),r);break}xc(e,Vl,Bl);break;default:throw Error(s(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vl,Vl=n,null!==t&&ac(t)),e}function ac(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function oc(e,t){for(t&=~Fl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(s(327));Ec();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ol,hc(e,0),oc(e,t),rc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Vl,Bl),rc(e,Xe()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(zl=Xe()+500,Ui&&zi())}}function uc(e){null!==Gl&&0===Gl.tag&&0===(6&Cl)&&Ec();var t=Cl;Cl|=1;var n=Tl.transition,r=bt;try{if(Tl.transition=null,bt=1,e)return e()}finally{bt=r,Tl.transition=n,0===(6&(Cl=t))&&zi()}}function dc(){Dl=Pl.current,Ni(Pl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==jl)for(n=jl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:Js(),Ni(Ii),Ni(Ci),na();break;case 5:Ys(r);break;case 4:Js();break;case 13:case 19:Ni(Zs);break;case 10:Ts(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Il=e,jl=e=Pc(e.current,null),Al=Dl=t,Rl=0,Ol=null,Fl=Ml=Ll=0,Vl=Ul=null,null!==As){for(t=0;t<As.length;t++)if(null!==(r=(n=As[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}As=null}return e}function fc(e,t){for(;;){var n=jl;try{if(ks(),ra.current=Xa,ca){for(var r=aa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(sa=0,la=oa=aa=null,ua=!1,da=0,kl.current=null,null===n||null===n.return){Rl=1,Ol=t,jl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&mo(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(a,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),ps(lo(c,l));break e}}a=c=lo(c,l),4!==Rl&&(Rl=2),null===Ul?Ul=[a]:Ul.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,$s(a,fo(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,$s(a,po(a,l,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(w){t=w,jl===n&&null!==n&&(jl=n=n.return);continue}break}}function pc(){var e=Nl.current;return Nl.current=Xa,null===e?Xa:e}function mc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Il||0===(268435455&Ll)&&0===(268435455&Ml)||oc(Il,Al)}function gc(e,t){var n=Cl;Cl|=2;var r=pc();for(Il===e&&Al===t||(Bl=null,hc(e,t));;)try{vc();break}catch(i){fc(e,i)}if(ks(),Cl=n,Nl.current=r,null!==jl)throw Error(s(261));return Il=null,Al=0,Rl}function vc(){for(;null!==jl;)bc(jl)}function yc(){for(;null!==jl&&!Qe();)bc(jl)}function bc(e){var t=Sl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?wc(e):jl=t,kl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wo(n,t,Dl)))return void(jl=n)}else{if(null!==(n=Go(n,t)))return n.flags&=32767,void(jl=n);if(null===e)return Rl=6,void(jl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(jl=t);jl=t=e}while(null!==t);0===Rl&&(Rl=5)}function xc(e,t,n){var r=bt,i=Tl.transition;try{Tl.transition=null,bt=1,function(e,t,n,r){do{Ec()}while(null!==Gl);if(0!==(6&Cl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Il&&(jl=Il=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wl||(Wl=!0,Ic(tt,(function(){return Ec(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Tl.transition,Tl.transition=null;var o=bt;bt=1;var l=Cl;Cl|=4,kl.current=null,function(e,t){if(ei=qt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,Yo=t;null!==Yo;)if(e=(t=Yo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Yo=e;else for(;null!==Yo;){t=Yo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(x){_c(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Yo=e;break}Yo=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Je(),Cl=l,bt=o,Tl.transition=a}else e.current=n;if(Wl&&(Wl=!1,Gl=e,Ql=i),a=e.pendingLanes,0===a&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ql)throw ql=!1,e=Hl,Hl=null,e;0!==(1&Ql)&&0!==e.tag&&Ec(),a=e.pendingLanes,0!==(1&a)?e===Xl?Jl++:(Jl=0,Xl=e):Jl=0,zi()}(e,t,n,r)}finally{Tl.transition=i,bt=r}return null}function Ec(){if(null!==Gl){var e=wt(Ql),t=Tl.transition,n=bt;try{if(Tl.transition=null,bt=16>e?16:e,null===Gl)var r=!1;else{if(e=Gl,Gl=null,Ql=0,0!==(6&Cl))throw Error(s(331));var i=Cl;for(Cl|=4,Yo=e.current;null!==Yo;){var a=Yo,o=a.child;if(0!==(16&Yo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Yo=u;null!==Yo;){var d=Yo;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Yo=h;else for(;null!==Yo;){var f=(d=Yo).sibling,p=d.return;if(sl(d),d===u){Yo=null;break}if(null!==f){f.return=p,Yo=f;break}Yo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Yo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Yo=o;else e:for(;null!==Yo;){if(0!==(2048&(a=Yo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Yo=y;break e}Yo=a.return}}var b=e.current;for(Yo=b;null!==Yo;){var w=(o=Yo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Yo=w;else e:for(o=b;null!==Yo;){if(0!==(2048&(l=Yo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(E){_c(l,l.return,E)}if(l===o){Yo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Yo=x;break e}Yo=l.return}}if(Cl=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{bt=n,Tl.transition=t}}return!1}function Sc(e,t,n){e=Us(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function _c(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Us(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Nc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Al&n)===n&&(4===Rl||3===Rl&&(130023424&Al)===Al&&500>Xe()-$l?hc(e,0):Fl|=n),rc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Rs(e,t))&&(vt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),kc(e,n)}function Ic(e,t){return We(e,t)}function jc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new jc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Dc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Oc(n.children,i,a,t);case _:o=8,i|=8;break;case N:return(e=Ac(12,n,t,2|i)).elementType=N,e.lanes=a,e;case I:return(e=Ac(13,n,t,i)).elementType=I,e.lanes=a,e;case j:return(e=Ac(19,n,t,i)).elementType=j,e.lanes=a,e;case P:return Lc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:o=10;break e;case T:o=9;break e;case C:o=11;break e;case A:o=14;break e;case D:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ac(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Oc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,s,a,o,l){return e=new Uc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ac(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function $c(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Di(n))return Oi(e,n,t)}return t}function zc(e,t,n,r,i,s,a,o,l){return(e=Vc(n,r,!0,e,0,s,0,o,l)).context=$c(null),n=e.current,(s=Fs(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Bc(e,t,n,r){var i=t.current,s=ec(),a=tc(i);return n=$c(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,a))&&(nc(e,i,a,s),Vs(e,i,a)),a}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Io(t),fs();break;case 5:Xs(t);break;case 1:Di(t.type)&&Li(t);break;case 4:Qs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(Es,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mo(e,t,n):(ki(Zs,1&Zs.current),null!==(e=qo(e,t,n))?e.sibling:null);ki(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,_o(e,t,n)}return qo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,is&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bo(e,t),e=t.pendingProps;var i=Ai(t,Ci.current);Is(t,n),i=ma(null,t,r,e,i,n);var a=ga();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=Co(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),wo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=to(r,e),i){case 0:t=ko(null,t,r,e,n);break e;case 1:t=To(null,t,r,e,n);break e;case 11:t=xo(null,t,r,e,n);break e;case 14:t=Eo(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ko(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,To(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(Io(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Ms(e,t),zs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=jo(e,t,r,n,i=lo(Error(s(423)),t));break e}if(r!==i){t=jo(e,t,r,n,i=lo(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=qo(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),No(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Mo(e,t,n);case 4:return Qs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,ki(Es,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ii.current){t=qo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Cs(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Cs(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}wo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Is(t,n),r=r(i=js(i)),t.flags|=1,wo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),Eo(e,t,r,i=to(r.type,i),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),Bo(e,t),t.tag=1,Di(r)?(e=!0,Li(t)):e=!1,Is(t,n),so(t,r,i),oo(t,r,i,n),Co(null,t,r,!0,e,n);case 19:return zo(e,t,n);case 22:return _o(e,t,n)}throw Error(s(156,t.tag))};var Wc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Yc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=qc(a);o.call(e)}}Bc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=qc(a);s.call(e)}}var a=zc(t,r,e,0,null,!1,0,"",Yc);return e._reactRootContainer=a,e[pi]=a.current,zr(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=qc(l);o.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Yc);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),uc((function(){Bc(t,l,n,r)})),l}(n,t,e,i,r);return qc(a)}Qc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Bc(e,t,null,null)},Qc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Bc(null,e,null,null)})),t[pi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Xe()),0===(6&Cl)&&(zl=Xe()+500,zi()))}break;case 13:uc((function(){var t=Rs(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Kc(e,1)}},Et=function(e){if(13===e.tag){var t=Rs(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Rs(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},_t=function(){return bt},Nt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ee=function(e,t,n){switch(t){case"input":if(Y(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(s(90));W(r),Y(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ie=uc;var eu={usingClientEntryPoint:!1,Events:[bi,wi,xi,ke,Te,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Wc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Wc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,a,o),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},799:(e,t,n)=>{n.d(t,{P2:()=>g});const r=(e,t)=>t.some((t=>e instanceof t));let i,s;const a=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap;let d={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("objectStoreNames"===t)return e.objectStoreNames||l.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return p(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function h(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(m(this),n),p(a.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(e.apply(m(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(m(this),t,...r);return l.set(s,t.sort?t.sort():[t]),p(s)}}function f(e){return"function"===typeof e?h(e):(e instanceof IDBTransaction&&function(e){if(o.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));o.set(e,t)}(e),r(e,i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,d):e)}function p(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(p(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&a.set(t,e)})).catch((()=>{})),u.set(t,e),t}(e);if(c.has(e))return c.get(e);const t=f(e);return t!==e&&(c.set(e,t),u.set(t,e)),t}const m=e=>u.get(e);function g(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=p(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(p(a.result),e.oldVersion,e.newVersion,p(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}const v=["get","getKey","getAll","getAllKeys","count"],y=["put","add","delete","clear"],b=new Map;function w(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(b.get(t))return b.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=y.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!v.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return b.set(t,s),s}d=(e=>({...e,get:(t,n,r)=>w(t,n)||e.get(t,n,r),has:(t,n)=>!!w(t,n)||e.has(t,n)}))(d)},812:(e,t,n)=>{n.d(t,{h1:()=>o,uA:()=>i});var r=n(529);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===s?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},959:(e,t,n)=>{n.d(t,{Ay:()=>d,_1:()=>c,dj:()=>u});var r=n(472),i=n(253);const s="formSubmissions",a=async e=>{try{const t=(0,r.rJ)(i.db,e);if((await(0,r.GG)((0,r.P)(t,(0,r.My)("submittedAt","desc")))).empty){console.log(`Collection ${e} vide, cr\xe9ation d'un document initial...`);const n={programmerId:"mock-programmer-1",programmerName:"Didier Exemple",businessName:"Association Culturelle du Sud",contact:"Didier Martin",role:"Programmateur",address:"45 rue des Arts, 13001 Marseille",venue:"Festival du Sud",vatNumber:"FR12345678901",siret:"123 456 789 00012",email:"didier.martin@festivaldusud.fr",phone:"06 12 34 56 78",website:"https://www.festivaldusud.fr",status:"pending",submittedAt:r.Dc.fromDate(new Date),notes:"Formulaire exemple cr\xe9\xe9 automatiquement"};await(0,r.gS)(t,n),console.log(`Document initial cr\xe9\xe9 dans la collection ${e}`)}return!0}catch(t){return console.error(`Erreur lors de la v\xe9rification/cr\xe9ation de la collection ${e}:`,t),!1}},o=[{id:"mock-form-1",programmerId:"mock-programmer-1",programmerName:"Didier Exemple",businessName:"Association Culturelle du Sud",contact:"Didier Martin",role:"Programmateur",address:"45 rue des Arts, 13001 Marseille",venue:"Festival du Sud",vatNumber:"FR12345678901",siret:"123 456 789 00012",email:"didier.martin@festivaldusud.fr",phone:"06 12 34 56 78",website:"https://www.festivaldusud.fr",status:"pending",submittedAt:new Date,notes:"Formulaire exemple",concertId:"mock-concert-1",concertName:"Concert exemple",concertDate:new Date,formLinkId:"mock-link-1"},{id:"mock-form-2",programmerId:"mock-programmer-2",programmerName:"Jean Martin",businessName:"SARL La Cigale",contact:"Jean Martin",role:"G\xe9rant",address:"120 boulevard de Rochechouart, 75018 Paris",venue:"La Cigale",vatNumber:"FR45678901234",siret:"456 789 012 00013",email:"jean.martin@lacigale.fr",phone:"01 23 45 67 89",website:"https://www.lacigale.fr",status:"processed",submittedAt:new Date(Date.now()-6048e5),processedAt:new Date(Date.now()-432e6),notes:"Formulaire trait\xe9",concertId:"mock-concert-2",concertName:"Concert exemple 2",concertDate:new Date(Date.now()+2592e6),formLinkId:"mock-link-2"},{id:"mock-form-3",programmerId:null,programmerName:null,businessName:"Le Petit Th\xe9\xe2tre",contact:"Sophie Dubois",role:"Directrice",address:"15 rue des Lilas, 69003 Lyon",venue:"Le Petit Th\xe9\xe2tre",vatNumber:"FR98765432109",siret:"987 654 321 00014",email:"sophie.dubois@petittheatre.fr",phone:"04 56 78 90 12",website:"https://www.petittheatre.fr",status:"pending",submittedAt:new Date(Date.now()-1728e5),notes:"Formulaire sans programmateur associ\xe9",concertId:"mock-concert-3",concertName:"Concert exemple 3",concertDate:new Date(Date.now()+1296e6),formLinkId:"mock-link-3"}],l=(0,r.rJ)(i.db,s),c=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{await a(s),console.log("Tentative de r\xe9cup\xe9ration des formulaires depuis Firebase...");let n=l;e&&(e.status&&(n=(0,r.P)(n,(0,r._M)("status","==",e.status))),e.programmerId&&(n=(0,r.P)(n,(0,r._M)("programmerId","==",e.programmerId))),e.concertId&&(n=(0,r.P)(n,(0,r._M)("concertId","==",e.concertId))),e.formLinkId&&(n=(0,r.P)(n,(0,r._M)("formLinkId","==",e.formLinkId)))),n=(0,r.P)(n,(0,r.My)("submittedAt","desc"));const c=await(0,r.GG)(n);if(c.empty){console.log("Aucun formulaire trouv\xe9 dans Firebase, utilisation des donn\xe9es simul\xe9es");try{console.log("Tentative d'ajout des donn\xe9es simul\xe9es \xe0 Firebase...");for(const e of o){const{id:t,...n}=e;await(0,r.BN)((0,r.H9)(i.db,s,t),{...n,submittedAt:r.Dc.fromDate(n.submittedAt),processedAt:n.processedAt?r.Dc.fromDate(n.processedAt):null,concertDate:n.concertDate?r.Dc.fromDate(n.concertDate):null})}console.log("Donn\xe9es simul\xe9es ajout\xe9es \xe0 Firebase avec succ\xe8s")}catch(t){console.error("Erreur lors de l'ajout des donn\xe9es simul\xe9es:",t)}return o}const u=c.docs.map((e=>({id:e.id,...e.data()})));return console.log(`${u.length} formulaires r\xe9cup\xe9r\xe9s depuis Firebase`),u}catch(n){console.error("Erreur lors de la r\xe9cup\xe9ration des formulaires:",n),console.log("Utilisation des donn\xe9es simul\xe9es pour les formulaires");try{console.log("Tentative d'ajout des donn\xe9es simul\xe9es \xe0 Firebase...");for(const e of o){const{id:t,...n}=e;await setDoc(doc(db,s,t),{...n,submittedAt:Timestamp.fromDate(n.submittedAt),processedAt:n.processedAt?Timestamp.fromDate(n.processedAt):null,concertDate:n.concertDate?Timestamp.fromDate(n.concertDate):null})}console.log("Donn\xe9es simul\xe9es ajout\xe9es \xe0 Firebase avec succ\xe8s")}catch(t){console.error("Erreur lors de l'ajout des donn\xe9es simul\xe9es:",t)}return o}},u=async e=>{try{await a(s);const t={...e,status:e.status||"pending",submittedAt:r.Dc.fromDate(new Date),concertDate:e.concertDate?e.concertDate instanceof Date?r.Dc.fromDate(e.concertDate):e.concertDate:null};console.log("Tentative d'ajout d'un formulaire \xe0 Firebase:",t);const n=await(0,r.gS)(l,t);return console.log(`Formulaire ajout\xe9 avec succ\xe8s, ID: ${n.id}`),{id:n.id,...t}}catch(t){console.error("Erreur lors de l'ajout du formulaire:",t),console.log("Simulation de l'ajout d'un formulaire");try{const t="mock-form-"+Date.now(),n={...e,status:e.status||"pending",submittedAt:Timestamp.fromDate(new Date),concertDate:e.concertDate?e.concertDate instanceof Date?Timestamp.fromDate(e.concertDate):e.concertDate:null};return await setDoc(doc(db,s,t),n),console.log(`Formulaire ajout\xe9 avec un ID manuel: ${t}`),{id:t,...n}}catch(n){console.error("Erreur lors de l'ajout manuel du formulaire:",n);return{id:"mock-form-"+Date.now(),...e,status:e.status||"pending",submittedAt:new Date,concertDate:e.concertDate||null}}}},d=async(e,t)=>{try{await a(s),console.log(`Tentative de mise \xe0 jour du formulaire ${e}:`,t);const n=(0,r.H9)(i.db,s,e),o={...t};return"processed"!==t.status&&"rejected"!==t.status||t.processedAt||(o.processedAt=r.Dc.fromDate(new Date)),o.concertDate&&(o.concertDate=o.concertDate instanceof Date?r.Dc.fromDate(o.concertDate):o.concertDate),await(0,r.mZ)(n,o),console.log(`Formulaire ${e} mis \xe0 jour avec succ\xe8s`),{id:e,...o}}catch(n){console.error(`Erreur lors de la mise \xe0 jour du formulaire ${e}:`,n),console.log("Simulation de la mise \xe0 jour d'un formulaire");try{const n={...t};return"processed"!==t.status&&"rejected"!==t.status||t.processedAt||(n.processedAt=Timestamp.fromDate(new Date)),n.concertDate&&(n.concertDate=n.concertDate instanceof Date?Timestamp.fromDate(n.concertDate):n.concertDate),await setDoc(doc(db,s,e),n,{merge:!0}),console.log(`Formulaire ${e} cr\xe9\xe9/remplac\xe9 avec succ\xe8s`),{id:e,...n}}catch(o){return console.error(`Erreur lors de la cr\xe9ation/remplacement du formulaire ${e}:`,o),{id:e,...t,processedAt:"processed"===t.status||"rejected"===t.status?new Date:null}}}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r=n(43),i=n.t(r,2),s=n(391),a=n(216),o=n(416),l=n(253),c=n(579);const u=(0,r.createContext)(),d=()=>(0,r.useContext)(u),h=!1,f=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(null),[s,a]=(0,r.useState)(h),[d,f]=(0,r.useState)(!0),[p,m]=(0,r.useState)(null),g=(0,o.xI)(l.y);(0,r.useEffect)((()=>{const e=(0,o.hg)(g,(e=>{e?(i({id:e.uid,email:e.email,name:e.displayName||e.email.split("@")[0],role:"admin"}),a(!0)):(i(null),a(!1)),f(!1)}));return()=>e()}),[g]);return(0,c.jsx)(r.Fragment,{children:(0,c.jsx)(u.Provider,{value:{currentUser:n,isAuthenticated:s,loading:d,error:p,login:async(e,t)=>{try{return f(!0),await(0,o.x9)(g,e,t),m(null),!0}catch(p){return console.error("Erreur de connexion:",p),m(p.message),!1}finally{f(!1)}},logout:async()=>{try{await(0,o.CI)(g)}catch(p){console.error("Erreur lors de la d\xe9connexion:",p)}},bypassEnabled:h},children:t})})};var p=n(950),m=n.t(p,2),g=n(387);function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}function y(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const b=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(me){}new Map;const w=i.startTransition;m.flushSync,i.useId;function x(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();null==o.current&&(o.current=(0,g.TM)({window:s,v5Compat:!0}));let l=o.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},h=r.useCallback((e=>{d&&w?w((()=>u(e))):u(e)}),[u,d]);return r.useLayoutEffect((()=>l.listen(h)),[l,h]),r.useEffect((()=>(0,a.V8)(i)),[i]),r.createElement(a.Ix,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const E="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,S=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_=r.forwardRef((function(e,t){let n,{onClick:i,relative:s,reloadDocument:o,replace:l,state:c,target:u,to:d,preventScrollReset:h,viewTransition:f}=e,p=y(e,b),{basename:m}=r.useContext(a.jb),w=!1;if("string"===typeof d&&S.test(d)&&(n=d,E))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=(0,g.pb)(t.pathname,m);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:w=!0}catch(me){}let x=(0,a.$P)(d,{relative:s}),_=function(e,t){let{target:n,replace:i,state:s,preventScrollReset:o,relative:l,viewTransition:c}=void 0===t?{}:t,u=(0,a.Zp)(),d=(0,a.zy)(),h=(0,a.x$)(e,{relative:l});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:(0,g.AO)(d)===(0,g.AO)(h);u(e,{replace:n,state:s,preventScrollReset:o,relative:l,viewTransition:c})}}),[d,u,h,i,s,n,e,o,l,c])}(d,{replace:l,state:c,target:u,preventScrollReset:h,relative:s,viewTransition:f});return r.createElement("a",v({},p,{href:n||x,onClick:w||o?i:function(e){i&&i(e),e.defaultPrevented||_(e)},ref:t,target:u}))}));var N,k;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(N||(N={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(k||(k={}));const T=()=>{const{currentUser:e,logout:t}=d(),n=(0,a.Zp)(),r=(0,a.zy)(),i=e=>r.pathname===e;return(0,c.jsxs)("div",{className:"app-container",children:[(0,c.jsxs)("aside",{className:"sidebar",children:[(0,c.jsxs)("div",{className:"sidebar-header",children:[(0,c.jsx)(_,{to:"/",className:"logo",children:(0,c.jsx)("span",{className:"logo-text",children:"Label Musical"})}),(0,c.jsx)("div",{className:"sidebar-subtitle",children:"Gestion des concerts et artistes"})]}),(0,c.jsxs)("nav",{className:"sidebar-nav",children:[(0,c.jsxs)(_,{to:"/",className:"nav-item "+(i("/")?"active":""),children:[(0,c.jsx)("span",{className:"nav-icon",children:(0,c.jsx)("i",{className:"fas fa-chart-line"})}),"Tableau de bord"]}),(0,c.jsxs)(_,{to:"/contrats",className:"nav-item "+(i("/contrats")?"active":""),children:[(0,c.jsx)("span",{className:"nav-icon",children:(0,c.jsx)("i",{className:"fas fa-file-contract"})}),"Contrats"]}),(0,c.jsxs)(_,{to:"/factures",className:"nav-item "+(i("/factures")?"active":""),children:[(0,c.jsx)("span",{className:"nav-icon",children:(0,c.jsx)("i",{className:"fas fa-file-invoice-dollar"})}),"Factures"]}),(0,c.jsxs)(_,{to:"/concerts",className:"nav-item "+(i("/concerts")?"active":""),children:[(0,c.jsx)("span",{className:"nav-icon",children:(0,c.jsx)("i",{className:"fas fa-calendar-alt"})}),"Concerts"]}),(0,c.jsxs)(_,{to:"/artistes",className:"nav-item "+(i("/artistes")?"active":""),children:[(0,c.jsx)("span",{className:"nav-icon",children:(0,c.jsx)("i",{className:"fas fa-music"})}),"Artistes"]}),(0,c.jsxs)(_,{to:"/programmateurs",className:"nav-item "+(i("/programmateurs")?"active":""),children:[(0,c.jsx)("span",{className:"nav-icon",children:(0,c.jsx)("i",{className:"fas fa-user-tie"})}),"Programmateurs"]}),(0,c.jsxs)(_,{to:"/validation-formulaires",className:"nav-item "+(i("/validation-formulaires")?"active":""),children:[(0,c.jsx)("span",{className:"nav-icon",children:(0,c.jsx)("i",{className:"fas fa-clipboard-check"})}),"Validation Formulaire"]}),(0,c.jsxs)(_,{to:"/emails",className:"nav-item "+(i("/emails")?"active":""),children:[(0,c.jsx)("span",{className:"nav-icon",children:(0,c.jsx)("i",{className:"fas fa-envelope"})}),"Emails"]}),(0,c.jsxs)(_,{to:"/documents",className:"nav-item "+(i("/documents")?"active":""),children:[(0,c.jsx)("span",{className:"nav-icon",children:(0,c.jsx)("i",{className:"fas fa-file-alt"})}),"Documents"]}),(0,c.jsxs)(_,{to:"/parametres",className:"nav-item "+(i("/parametres")?"active":""),children:[(0,c.jsx)("span",{className:"nav-icon",children:(0,c.jsx)("i",{className:"fas fa-cog"})}),"Param\xe8tres"]})]})]}),(0,c.jsxs)("div",{className:"main-content",children:[(0,c.jsxs)("header",{className:"main-header",children:[(0,c.jsxs)("div",{className:"page-title",children:["/"===r.pathname&&"Tableau de bord","/contrats"===r.pathname&&"Gestion des contrats","/factures"===r.pathname&&"Gestion des factures","/concerts"===r.pathname&&"Gestion des concerts","/artistes"===r.pathname&&"Gestion des artistes","/programmateurs"===r.pathname&&"Gestion des programmateurs","/validation-formulaires"===r.pathname&&"Validation des formulaires","/emails"===r.pathname&&"Syst\xe8me d'emails","/documents"===r.pathname&&"Gestion des documents","/parametres"===r.pathname&&"Param\xe8tres"]}),(0,c.jsx)("div",{className:"user-menu",children:e&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"user-name",children:e.name||"Utilisateur"}),(0,c.jsx)("button",{onClick:()=>{t(),n("/login")},className:"logout-btn",children:"D\xe9connexion"})]})})]}),(0,c.jsx)("main",{className:"main-container",children:(0,c.jsx)(a.sv,{})}),(0,c.jsx)("footer",{className:"app-footer",children:(0,c.jsxs)("p",{children:["\xa9 ",(new Date).getFullYear()," App Booking - Tous droits r\xe9serv\xe9s"]})})]})]})},C=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),{login:l}=d(),u=(0,a.Zp)();return(0,c.jsx)("div",{className:"login-container",children:(0,c.jsxs)("div",{className:"login-form-wrapper",children:[(0,c.jsx)("h2",{children:"Connexion"}),s&&(0,c.jsx)("div",{className:"error-message",children:s}),(0,c.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),o(""),e&&n)try{await l(e,n)?u("/"):o("Identifiants incorrects")}catch(r){o("Une erreur est survenue lors de la connexion"),console.error(r)}else o("Veuillez remplir tous les champs")},children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"email",children:"Email"}),(0,c.jsx)("input",{type:"email",id:"email",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"password",children:"Mot de passe"}),(0,c.jsx)("input",{type:"password",id:"password",value:n,onChange:e=>i(e.target.value),required:!0})]}),(0,c.jsx)("button",{type:"submit",className:"login-button",children:"Se connecter"})]})]})})},I=()=>(0,c.jsxs)("div",{className:"not-found-container",children:[(0,c.jsx)("h2",{children:"404 - Page Non Trouv\xe9e"}),(0,c.jsx)("p",{children:"La page que vous recherchez n'existe pas ou a \xe9t\xe9 d\xe9plac\xe9e."}),(0,c.jsx)("div",{className:"not-found-actions",children:(0,c.jsx)(_,{to:"/",className:"home-btn",children:"Retour \xe0 l'accueil"})})]});var j=n(472);const A="contracts",D=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),s=(0,a.Zp)();(0,r.useEffect)((()=>{(async()=>{try{i(!0);const e=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t=(0,j.rJ)(l.db,A);e&&(e.artist&&(t=(0,j.P)(t,(0,j._M)("artist.name",">=",e.artist),(0,j._M)("artist.name","<=",e.artist+"\uf8ff"))),e.venue&&(t=(0,j.P)(t,(0,j._M)("venue",">=",e.venue),(0,j._M)("venue","<=",e.venue+"\uf8ff"))),e.project&&(t=(0,j.P)(t,(0,j._M)("project",">=",e.project),(0,j._M)("project","<=",e.project+"\uf8ff")))),t=(0,j.P)(t,(0,j.My)("date","desc"));const n=await(0,j.GG)(t),r=[];return n.forEach((e=>{r.push({id:e.id,...e.data()})})),r}catch(t){return console.error("Erreur lors de la r\xe9cup\xe9ration des contrats:",t),[{id:"1",concertId:"mock-concert-1",date:"2025-05-15",optionDate:"2025-03-01",artist:{id:"a1",name:"Les Harmonies Urbaines"},project:"Tourn\xe9e Printemps",venue:"L'Olympia",city:"Paris",programmer:{id:"p1",name:"Jean Dupont"},amount:2500,formStatus:"validated",contractSentStatus:"validated",contractSignedStatus:"pending",invoiceStatus:"pending",status:"en_cours"},{id:"2",concertId:"mock-concert-2",date:"2025-06-20",optionDate:"2025-04-01",artist:{id:"a2",name:"\xc9chos Po\xe9tiques"},project:"Festival d'\xe9t\xe9",venue:"Z\xe9nith",city:"Lille",programmer:{id:"p2",name:"Marie Martin"},amount:3e3,formStatus:"validated",contractSentStatus:"validated",contractSignedStatus:"validated",invoiceStatus:"pending",status:"confirm\xe9"},{id:"3",concertId:"mock-concert-3",date:"2025-07-10",optionDate:null,artist:{id:"a3",name:"Rythmes Solaires"},project:"Showcase",venue:"La Cigale",city:"Paris",programmer:{id:"p3",name:"Sophie Lefebvre"},amount:1800,formStatus:"pending",contractSentStatus:"pending",contractSignedStatus:"pending",invoiceStatus:"pending",status:"en_n\xe9gociation"},{id:"4",concertId:"mock-concert-4",date:"2025-08-05",optionDate:"2025-05-15",artist:{id:"a4",name:"Jazz Fusion Quartet"},project:"Jazz Tour",venue:"New Morning",city:"Paris",programmer:{id:"p4",name:"Pierre Dubois"},amount:2200,formStatus:"validated",contractSentStatus:"validated",contractSignedStatus:"validated",invoiceStatus:"validated",status:"confirm\xe9"},{id:"5",concertId:"mock-concert-5",date:"2025-09-12",optionDate:"2025-06-20",artist:{id:"a5",name:"\xc9lectro Symphonie"},project:"\xc9lectro Night",venue:"Bataclan",city:"Paris",programmer:{id:"p5",name:"Lucie Moreau"},amount:2800,formStatus:"validated",contractSentStatus:"cancelled",contractSignedStatus:"pending",invoiceStatus:"pending",status:"en_n\xe9gociation"}]}}();t(e),i(!1)}catch(e){console.error("Erreur lors du chargement des contrats:",e),i(!1)}})()}),[]);const o=e=>{if(!e)return"-";return new Date(e).toLocaleDateString("fr-FR")},u=async(n,r,i)=>{try{const s=e.find((e=>e.id===n));if(!s)return;const a={...s};switch(r){case"formStatus":a.formStatus=i;break;case"contractSentStatus":a.contractSentStatus=i;break;case"contractSignedStatus":a.contractSignedStatus=i;break;case"invoiceStatus":a.invoiceStatus=i}await(async(e,t)=>{try{return await(0,j.mZ)((0,j.H9)(l.db,A,e),t),{id:e,...t}}catch(n){throw console.error("Erreur lors de la mise \xe0 jour du contrat:",n),n}})(n,a),t((e=>e.map((e=>e.id===n?a:e))))}catch(s){console.error("Erreur lors de la mise \xe0 jour du statut:",s)}},d=async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce contrat ?"))try{await(async e=>{try{return await(0,j.kd)((0,j.H9)(l.db,A,e)),e}catch(t){throw console.error("Erreur lors de la suppression du contrat:",t),t}})(e),t((t=>t.filter((t=>t.id!==e))))}catch(n){console.error("Erreur lors de la suppression du contrat:",n),alert("Erreur lors de la suppression du contrat")}},h=(e,t,n)=>{let r,i,s;switch(e){case"validated":r="fas fa-check-circle",i="#28a745",s="Valid\xe9";break;case"pending":r="fas fa-clock",i="#ffc107",s="\xc0 faire";break;case"cancelled":r="fas fa-times-circle",i="#dc3545",s="Annul\xe9";break;default:r="fas fa-question-circle",i="#6c757d",s="Non d\xe9fini"}return(0,c.jsx)("span",{className:"status-icon",style:{color:i},title:s,onClick:r=>{r.stopPropagation(),u(t,n,(e=>{switch(e){case"validated":return"pending";case"pending":return"cancelled";default:return"validated"}})(e))},children:(0,c.jsx)("i",{className:r})})};return n?(0,c.jsx)("div",{className:"loading-container",children:"Chargement des contrats..."}):(0,c.jsxs)("div",{className:"contracts-dashboard",children:[(0,c.jsxs)("div",{className:"contracts-header",children:[(0,c.jsx)("h1",{children:"Gestion des Contrats"}),(0,c.jsx)("div",{className:"header-actions",children:(0,c.jsxs)(_,{to:"/concerts/new",className:"add-button",children:[(0,c.jsx)("i",{className:"fas fa-plus"})," Nouveau concert"]})})]}),(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"contracts-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"col-artist",children:"Artiste"}),(0,c.jsx)("th",{className:"col-project",children:"Projet"}),(0,c.jsx)("th",{className:"col-venue",children:"Lieu (concert)"}),(0,c.jsx)("th",{className:"col-option-date",children:"Prise d'option"}),(0,c.jsx)("th",{className:"col-start-date",children:"D\xe9but"}),(0,c.jsx)("th",{className:"col-amount",children:"Montant (\u20ac)"}),(0,c.jsx)("th",{className:"col-status",children:"Formulaire"}),(0,c.jsx)("th",{className:"col-status",children:"Contrat envoy\xe9"}),(0,c.jsx)("th",{className:"col-status",children:"Contrat sign\xe9"}),(0,c.jsx)("th",{className:"col-status",children:"Facture \xe9mise"}),(0,c.jsx)("th",{className:"col-actions",children:"Actions"})]})}),(0,c.jsx)("tbody",{children:0===e.length?(0,c.jsx)("tr",{children:(0,c.jsx)("td",{colSpan:"11",className:"no-data",children:"Aucun contrat trouv\xe9"})}):e.map((e=>{var t,n;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"col-artist",children:(null===(t=e.artist)||void 0===t?void 0:t.name)||"-"}),(0,c.jsx)("td",{className:"col-project",children:e.project||"-"}),(0,c.jsx)("td",{className:"col-venue",children:e.venue||"-"}),(0,c.jsx)("td",{className:"col-option-date",children:o(e.optionDate)}),(0,c.jsx)("td",{className:"col-start-date",children:o(e.date)}),(0,c.jsx)("td",{className:"col-amount",children:(n=e.amount,n||0===n?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(n):"-")}),(0,c.jsx)("td",{className:"col-status status-cell",children:h(e.formStatus||"pending",e.id,"formStatus")}),(0,c.jsx)("td",{className:"col-status status-cell",children:h(e.contractSentStatus||"pending",e.id,"contractSentStatus")}),(0,c.jsx)("td",{className:"col-status status-cell",children:h(e.contractSignedStatus||"pending",e.id,"contractSignedStatus")}),(0,c.jsx)("td",{className:"col-status status-cell",children:h(e.invoiceStatus||"pending",e.id,"invoiceStatus")}),(0,c.jsxs)("td",{className:"col-actions actions-cell",children:[(0,c.jsx)("button",{className:"action-btn view-btn",title:"Voir le concert",onClick:t=>{var n;t.stopPropagation(),(n=e.concertId)?s(`/concerts/${n}`):alert("Aucun concert associ\xe9 \xe0 ce contrat")},children:(0,c.jsx)("i",{className:"fas fa-eye"})}),(0,c.jsx)("button",{className:"action-btn delete-btn",title:"Supprimer",onClick:t=>{t.stopPropagation(),d(e.id)},children:(0,c.jsx)("i",{className:"fas fa-trash"})})]})]},e.id)}))})]})})]})},P=()=>(0,c.jsx)("div",{className:"dashboard-container",children:(0,c.jsx)(D,{})}),R=async e=>{try{const t=(0,j.rJ)(l.db,e);if((await(0,j.GG)((0,j.P)(t,(0,j.My)("createdAt","desc")))).empty){console.log(`Collection ${e} vide, cr\xe9ation d'un document initial...`);const n={businessName:"Salle de Concert Exemple",contact:"Jean Dupont",role:"Programmateur",address:"123 rue de la Musique, 75001 Paris",venue:"La Sc\xe8ne Parisienne",vatNumber:"FR12345678901",siret:"123 456 789 00012",email:"contact@exemple.fr",phone:"01 23 45 67 89",website:"https://www.exemple.fr",notes:"Programmateur exemple cr\xe9\xe9 automatiquement",createdAt:new Date};await(0,j.gS)(t,n),console.log(`Document initial cr\xe9\xe9 dans la collection ${e}`)}return!0}catch(t){return console.error(`Erreur lors de la v\xe9rification/cr\xe9ation de la collection ${e}:`,t),!1}},O=[{id:"mock-programmer-1",businessName:"Association Vibrations",contact:"Marie Dupont",role:"Pr\xe9sidente",address:"45 rue de la R\xe9publique, 69001 Lyon",venue:"Festival Vibrations",vatNumber:"FR98765432101",siret:"987 654 321 00011",email:"marie.dupont@vibrations.fr",phone:"06 12 34 56 78",website:"https://www.vibrations-asso.fr",notes:"Programmation de musiques actuelles",createdAt:new Date},{id:"mock-programmer-2",businessName:"SARL La Cigale",contact:"Jean Martin",role:"G\xe9rant",address:"120 boulevard de Rochechouart, 75018 Paris",venue:"La Cigale",vatNumber:"FR45678901234",siret:"456 789 012 00013",email:"jean.martin@lacigale.fr",phone:"01 23 45 67 89",website:"https://www.lacigale.fr",notes:"Salle de concert parisienne",createdAt:new Date}],L=(0,j.rJ)(l.db,"programmers"),M=async()=>{try{await R("programmers"),console.log("Tentative de r\xe9cup\xe9ration des programmateurs depuis Firebase...");const t=(0,j.P)(L,(0,j.My)("createdAt","desc")),n=await(0,j.GG)(t);if(n.empty){console.log("Aucun programmateur trouv\xe9 dans Firebase, utilisation des donn\xe9es simul\xe9es");try{console.log("Tentative d'ajout des donn\xe9es simul\xe9es \xe0 Firebase...");for(const e of O){const{id:t,...n}=e;await(0,j.BN)((0,j.H9)(l.db,"programmers",t),n)}console.log("Donn\xe9es simul\xe9es ajout\xe9es \xe0 Firebase avec succ\xe8s")}catch(e){console.error("Erreur lors de l'ajout des donn\xe9es simul\xe9es:",e)}return O}const r=n.docs.map((e=>({id:e.id,...e.data()})));return console.log(`${r.length} programmateurs r\xe9cup\xe9r\xe9s depuis Firebase`),r}catch(t){console.error("Erreur lors de la r\xe9cup\xe9ration des programmateurs:",t),console.log("Utilisation des donn\xe9es simul\xe9es pour les programmateurs");try{console.log("Tentative d'ajout des donn\xe9es simul\xe9es \xe0 Firebase...");for(const e of O){const{id:t,...n}=e;await setDoc(doc(db,"programmers",t),n)}console.log("Donn\xe9es simul\xe9es ajout\xe9es \xe0 Firebase avec succ\xe8s")}catch(e){console.error("Erreur lors de l'ajout des donn\xe9es simul\xe9es:",e)}return O}},F=async e=>{try{await R("programmers"),console.log(`Tentative de r\xe9cup\xe9ration du programmateur ${e} depuis Firebase...`);const t=(0,j.H9)(l.db,"programmers",e),n=await(0,j.x7)(t);if(n.exists()){const t={id:n.id,...n.data()};return console.log(`Programmateur ${e} r\xe9cup\xe9r\xe9 depuis Firebase:`,t),t}return console.log(`Programmateur ${e} non trouv\xe9 dans Firebase`),null}catch(t){console.error(`Erreur lors de la r\xe9cup\xe9ration du programmateur ${e}:`,t);const n=O.find((t=>t.id===e))||O[0];return console.log("Utilisation du programmateur simul\xe9:",n),n}},U=async(e,t)=>{try{await R("programmers"),console.log(`Tentative de mise \xe0 jour du programmateur ${e}:`,t);const n=(0,j.H9)(l.db,"programmers",e);return await(0,j.mZ)(n,{...t,updatedAt:new Date}),console.log(`Programmateur ${e} mis \xe0 jour avec succ\xe8s`),{id:e,...t}}catch(n){console.error(`Erreur lors de la mise \xe0 jour du programmateur ${e}:`,n),console.log("Simulation de la mise \xe0 jour d'un programmateur");try{return await setDoc(doc(db,"programmers",e),{...t,updatedAt:new Date}),console.log(`Programmateur ${e} cr\xe9\xe9/remplac\xe9 avec succ\xe8s`),{id:e,...t,updatedAt:new Date}}catch(r){return console.error(`Erreur lors de la cr\xe9ation/remplacement du programmateur ${e}:`,r),{id:e,...t,updatedAt:new Date}}}},V=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[s,a]=(0,r.useState)(null),[o,l]=(0,r.useState)(!1),[u,d]=(0,r.useState)({businessName:"",contact:"",role:"",address:"",venue:"",vatNumber:"",siret:"",email:"",phone:"",website:"",notes:""});(0,r.useEffect)((()=>{(async()=>{try{i(!0),console.log("Tentative de r\xe9cup\xe9ration des programmateurs via Firebase...");const e=await M();console.log("Programmateurs r\xe9cup\xe9r\xe9s:",e),t(e),i(!1)}catch(e){console.error("Erreur dans le composant lors de la r\xe9cup\xe9ration des programmateurs:",e),a(e.message),i(!1)}})()}),[]);const h=e=>{const{name:t,value:n}=e.target;d({...u,[t]:n}),console.log(`Champ ${t} mis \xe0 jour avec la valeur: ${n}`)};return n&&0===e.length?(0,c.jsx)("div",{className:"loading",children:"Chargement des programmateurs..."}):s?(0,c.jsxs)("div",{className:"error-message",children:["Erreur: ",s]}):(0,c.jsxs)("div",{className:"programmers-list-container",children:[(0,c.jsxs)("div",{className:"programmers-header",children:[(0,c.jsx)("h2",{children:"Liste des Programmateurs"}),(0,c.jsx)("button",{className:"add-programmer-btn",onClick:()=>l(!o),children:o?"Annuler":"Ajouter un programmateur"})]}),o&&(0,c.jsxs)("div",{className:"add-programmer-form-container",children:[(0,c.jsx)("h3",{children:"Ajouter un nouveau programmateur"}),(0,c.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{i(!0),console.log("Donn\xe9es du programmateur \xe0 ajouter:",u),await(async e=>{try{await R("programmers"),console.log("Tentative d'ajout d'un programmateur \xe0 Firebase:",e);const t=await(0,j.gS)(L,{...e,createdAt:new Date});return console.log(`Programmateur ajout\xe9 avec succ\xe8s, ID: ${t.id}`),{id:t.id,...e}}catch(s){console.error("Erreur lors de l'ajout du programmateur:",s),console.log("Simulation de l'ajout d'un programmateur");try{const t="mock-programmer-"+Date.now();return await setDoc(doc(db,"programmers",t),{...e,createdAt:new Date}),console.log(`Programmateur ajout\xe9 avec un ID manuel: ${t}`),{id:t,...e,createdAt:new Date}}catch(t){return console.error("Erreur lors de l'ajout manuel du programmateur:",t),{id:"mock-programmer-"+Date.now(),...e,createdAt:new Date}}}})(u),d({businessName:"",contact:"",role:"",address:"",venue:"",vatNumber:"",siret:"",email:"",phone:"",website:"",notes:""}),l(!1);const e=await M();t(e),i(!1)}catch(n){console.error("Erreur lors de l'ajout du programmateur:",n),a(n.message),i(!1)}},className:"add-programmer-form",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"businessName",children:"Raison sociale"}),(0,c.jsx)("input",{type:"text",id:"businessName",name:"businessName",value:u.businessName,onChange:h,placeholder:"Nom de l'entreprise ou de l'organisation"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"contact",children:"Contact"}),(0,c.jsx)("input",{type:"text",id:"contact",name:"contact",value:u.contact,onChange:h,placeholder:"Nom et pr\xe9nom du contact"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"role",children:"Qualit\xe9"}),(0,c.jsxs)("select",{id:"role",name:"role",value:u.role,onChange:h,children:[(0,c.jsx)("option",{value:"",children:"S\xe9lectionner une qualit\xe9"}),["Programmateur","Pr\xe9sident","G\xe9rant","Directeur","Administrateur","Charg\xe9 de production","Autre"].map((e=>(0,c.jsx)("option",{value:e,children:e},e)))]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"address",children:"Adresse de la raison sociale"}),(0,c.jsx)("textarea",{id:"address",name:"address",value:u.address,onChange:h,rows:"3",placeholder:"Adresse compl\xe8te"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"venue",children:"Lieu ou festival"}),(0,c.jsx)("input",{type:"text",id:"venue",name:"venue",value:u.venue,onChange:h,placeholder:"Nom du lieu ou du festival"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"vatNumber",children:"Num\xe9ro intracommunautaire"}),(0,c.jsx)("input",{type:"text",id:"vatNumber",name:"vatNumber",value:u.vatNumber,onChange:h,placeholder:"FR12345678901"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"siret",children:"SIRET"}),(0,c.jsx)("input",{type:"text",id:"siret",name:"siret",value:u.siret,onChange:h,placeholder:"123 456 789 00012"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"email",children:"Email"}),(0,c.jsx)("input",{type:"email",id:"email",name:"email",value:u.email,onChange:h,placeholder:"email@exemple.com"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"phone",children:"T\xe9l\xe9phone"}),(0,c.jsx)("input",{type:"tel",id:"phone",name:"phone",value:u.phone,onChange:h,placeholder:"06 12 34 56 78"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"website",children:"Site web"}),(0,c.jsx)("input",{type:"url",id:"website",name:"website",value:u.website,onChange:h,placeholder:"https://www.exemple.com"})]}),(0,c.jsxs)("div",{className:"form-group full-width",children:[(0,c.jsx)("label",{htmlFor:"notes",children:"Notes"}),(0,c.jsx)("textarea",{id:"notes",name:"notes",value:u.notes,onChange:h,rows:"4",placeholder:"Informations compl\xe9mentaires"})]}),(0,c.jsxs)("div",{className:"form-actions",children:[(0,c.jsx)("button",{type:"button",className:"cancel-btn",onClick:()=>l(!1),children:"Annuler"}),(0,c.jsx)("button",{type:"submit",className:"submit-btn",disabled:n,children:n?"Ajout en cours...":"Ajouter le programmateur"})]})]})]}),0===e.length?(0,c.jsx)("p",{className:"no-results",children:"Aucun programmateur trouv\xe9."}):(0,c.jsx)("div",{className:"programmers-table-container",children:(0,c.jsxs)("table",{className:"programmers-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Raison sociale"}),(0,c.jsx)("th",{children:"Contact"}),(0,c.jsx)("th",{children:"Lieu/Festival"}),(0,c.jsx)("th",{children:"Email"}),(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsx)("tbody",{children:e.map((e=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.businessName||"Non sp\xe9cifi\xe9"}),(0,c.jsx)("td",{children:e.contact||"Non sp\xe9cifi\xe9"}),(0,c.jsx)("td",{children:e.venue||"Non sp\xe9cifi\xe9"}),(0,c.jsx)("td",{children:e.email||"Non sp\xe9cifi\xe9"}),(0,c.jsx)("td",{children:(0,c.jsx)(_,{to:`/programmateurs/${e.id}`,className:"view-details-btn",children:"Voir"})})]},e.id)))})]})})]})},$=()=>{const{id:e}=(0,a.g)(),t=(0,a.Zp)(),[n,i]=(0,r.useState)(null),[s,o]=(0,r.useState)(!0),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)({businessName:"",contact:"",role:"",address:"",venue:"",vatNumber:"",siret:"",email:"",phone:"",website:"",notes:""});(0,r.useEffect)((()=>{(async()=>{try{o(!0),console.log(`Tentative de r\xe9cup\xe9ration du programmateur avec l'ID: ${e}`);const t=await F(e);if(!t)throw new Error("Programmateur non trouv\xe9");console.log("Programmateur r\xe9cup\xe9r\xe9:",t),i(t),m({businessName:t.businessName||"",contact:t.contact||"",role:t.role||"",address:t.address||"",venue:t.venue||"",vatNumber:t.vatNumber||"",siret:t.siret||"",email:t.email||"",phone:t.phone||"",website:t.website||"",notes:t.notes||""}),o(!1)}catch(t){console.error("Erreur lors de la r\xe9cup\xe9ration du programmateur:",t),d(t.message),o(!1)}})()}),[e]);const g=e=>{const{name:t,value:n}=e.target;m({...p,[t]:n})};return s?(0,c.jsx)("div",{className:"loading",children:"Chargement des d\xe9tails du programmateur..."}):u?(0,c.jsxs)("div",{className:"error-message",children:["Erreur: ",u]}):n?(0,c.jsxs)("div",{className:"programmer-detail-container",children:[(0,c.jsx)("h2",{children:"D\xe9tails du programmateur"}),h?(0,c.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{o(!0),await U(e,p);const t=await F(e);i(t),f(!1),o(!1)}catch(n){d(n.message),o(!1)}},className:"edit-form",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"businessName",children:"Raison sociale"}),(0,c.jsx)("input",{type:"text",id:"businessName",name:"businessName",value:p.businessName,onChange:g,placeholder:"Nom de l'entreprise ou de l'organisation"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"contact",children:"Contact"}),(0,c.jsx)("input",{type:"text",id:"contact",name:"contact",value:p.contact,onChange:g,placeholder:"Nom et pr\xe9nom du contact"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"role",children:"Qualit\xe9"}),(0,c.jsxs)("select",{id:"role",name:"role",value:p.role,onChange:g,children:[(0,c.jsx)("option",{value:"",children:"S\xe9lectionner une qualit\xe9"}),["Programmateur","Pr\xe9sident","G\xe9rant","Directeur","Administrateur","Charg\xe9 de production","Autre"].map((e=>(0,c.jsx)("option",{value:e,children:e},e)))]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"address",children:"Adresse de la raison sociale"}),(0,c.jsx)("textarea",{id:"address",name:"address",value:p.address,onChange:g,rows:"3",placeholder:"Adresse compl\xe8te"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"venue",children:"Lieu ou festival"}),(0,c.jsx)("input",{type:"text",id:"venue",name:"venue",value:p.venue,onChange:g,placeholder:"Nom du lieu ou du festival"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"vatNumber",children:"Num\xe9ro intracommunautaire"}),(0,c.jsx)("input",{type:"text",id:"vatNumber",name:"vatNumber",value:p.vatNumber,onChange:g,placeholder:"FR12345678901"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"siret",children:"SIRET"}),(0,c.jsx)("input",{type:"text",id:"siret",name:"siret",value:p.siret,onChange:g,placeholder:"123 456 789 00012"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"email",children:"Email"}),(0,c.jsx)("input",{type:"email",id:"email",name:"email",value:p.email,onChange:g,placeholder:"email@exemple.com"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"phone",children:"T\xe9l\xe9phone"}),(0,c.jsx)("input",{type:"tel",id:"phone",name:"phone",value:p.phone,onChange:g,placeholder:"06 12 34 56 78"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"website",children:"Site web"}),(0,c.jsx)("input",{type:"url",id:"website",name:"website",value:p.website,onChange:g,placeholder:"https://www.exemple.com"})]}),(0,c.jsxs)("div",{className:"form-group full-width",children:[(0,c.jsx)("label",{htmlFor:"notes",children:"Notes"}),(0,c.jsx)("textarea",{id:"notes",name:"notes",value:p.notes,onChange:g,rows:"4",placeholder:"Informations compl\xe9mentaires"})]}),(0,c.jsxs)("div",{className:"form-actions",children:[(0,c.jsx)("button",{type:"button",className:"cancel-btn",onClick:()=>f(!1),children:"Annuler"}),(0,c.jsx)("button",{type:"submit",className:"save-btn",disabled:s,children:s?"Enregistrement...":"Enregistrer"})]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"programmer-info",children:[(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"info-label",children:"Raison sociale:"}),(0,c.jsx)("span",{className:"info-value",children:n.businessName||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"info-label",children:"Contact:"}),(0,c.jsx)("span",{className:"info-value",children:n.contact||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"info-label",children:"Qualit\xe9:"}),(0,c.jsx)("span",{className:"info-value",children:n.role||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"info-label",children:"Adresse:"}),(0,c.jsx)("span",{className:"info-value",children:n.address||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"info-label",children:"Lieu ou festival:"}),(0,c.jsx)("span",{className:"info-value",children:n.venue||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"info-label",children:"N\xb0 intracommunautaire:"}),(0,c.jsx)("span",{className:"info-value",children:n.vatNumber||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"info-label",children:"SIRET:"}),(0,c.jsx)("span",{className:"info-value",children:n.siret||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"info-label",children:"Email:"}),(0,c.jsx)("span",{className:"info-value",children:n.email||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"info-label",children:"T\xe9l\xe9phone:"}),(0,c.jsx)("span",{className:"info-value",children:n.phone||"Non sp\xe9cifi\xe9"})]}),n.website&&(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"info-label",children:"Site web:"}),(0,c.jsx)("span",{className:"info-value",children:(0,c.jsx)("a",{href:n.website,target:"_blank",rel:"noopener noreferrer",children:n.website})})]}),(0,c.jsxs)("div",{className:"info-row notes",children:[(0,c.jsx)("span",{className:"info-label",children:"Notes:"}),(0,c.jsx)("span",{className:"info-value",children:n.notes||"Aucune note"})]})]}),(0,c.jsxs)("div",{className:"programmer-actions",children:[(0,c.jsx)("button",{onClick:()=>f(!0),className:"edit-btn",children:"Modifier"}),(0,c.jsx)("button",{onClick:async()=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce programmateur ?"))try{o(!0),await(async e=>{try{console.log(`Tentative de suppression du programmateur ${e}`);const t=(0,j.H9)(l.db,"programmers",e);return await(0,j.kd)(t),console.log(`Programmateur ${e} supprim\xe9 avec succ\xe8s`),e}catch(u){return console.error(`Erreur lors de la suppression du programmateur ${e}:`,u),console.log("Simulation de la suppression d'un programmateur"),e}})(e),t("/programmateurs")}catch(n){d(n.message),o(!1)}},className:"delete-btn",children:"Supprimer"}),(0,c.jsx)("button",{onClick:()=>t("/programmateurs"),className:"back-btn",children:"Retour \xe0 la liste"})]})]})]}):(0,c.jsx)("div",{className:"not-found",children:"Programmateur non trouv\xe9"})},z=async e=>{try{const t=(0,j.rJ)(l.db,e);if((await(0,j.GG)((0,j.P)(t,(0,j.My)("date","desc")))).empty){console.log(`Collection ${e} vide, cr\xe9ation d'un document initial...`);const n={artist:{id:"mock-artist-1",name:"Artiste Exemple"},programmer:{id:"mock-programmer-1",name:"Programmateur Exemple",structure:"Salle Exemple"},date:"2025-12-31",time:"20:00",venue:"Salle de concert",city:"Paris",price:25,status:"En attente",notes:"Concert exemple cr\xe9\xe9 automatiquement",createdAt:new Date};await(0,j.gS)(t,n),console.log(`Document initial cr\xe9\xe9 dans la collection ${e}`)}return!0}catch(t){return console.error(`Erreur lors de la v\xe9rification/cr\xe9ation de la collection ${e}:`,t),!1}},B=[{id:"mock-concert-1",artist:{id:"mock-artist-1",name:"The Weeknd"},programmer:{id:"mock-programmer-1",name:"Marie Dupont",structure:"Association Vibrations"},date:"2025-06-15",time:"20:00",venue:"Stade de France",city:"Paris",price:85,status:"Confirm\xe9",notes:"Concert complet",createdAt:new Date},{id:"mock-concert-2",artist:{id:"mock-artist-2",name:"Daft Punk"},programmer:{id:"mock-programmer-2",name:"Jean Martin",structure:"La Cigale"},date:"2025-07-20",time:"21:00",venue:"La Cigale",city:"Paris",price:65,status:"En attente",notes:"Tourn\xe9e de retour",createdAt:new Date}],q=(0,j.rJ)(l.db,"concerts"),H=async()=>{try{await z("concerts"),console.log("Tentative de r\xe9cup\xe9ration des concerts depuis Firebase...");const t=(0,j.P)(q,(0,j.My)("date","desc")),n=await(0,j.GG)(t);if(n.empty){console.log("Aucun concert trouv\xe9 dans Firebase, utilisation des donn\xe9es simul\xe9es");try{console.log("Tentative d'ajout des donn\xe9es simul\xe9es \xe0 Firebase...");for(const e of B){const{id:t,...n}=e;await(0,j.BN)((0,j.H9)(l.db,"concerts",t),n)}console.log("Donn\xe9es simul\xe9es ajout\xe9es \xe0 Firebase avec succ\xe8s")}catch(e){console.error("Erreur lors de l'ajout des donn\xe9es simul\xe9es:",e)}return B}const r=n.docs.map((e=>({id:e.id,...e.data()})));return console.log(`${r.length} concerts r\xe9cup\xe9r\xe9s depuis Firebase`),r}catch(t){console.error("Erreur lors de la r\xe9cup\xe9ration des concerts:",t),console.log("Utilisation des donn\xe9es simul\xe9es pour les concerts");try{console.log("Tentative d'ajout des donn\xe9es simul\xe9es \xe0 Firebase...");for(const e of B){const{id:t,...n}=e;await setDoc(doc(db,"concerts",t),n)}console.log("Donn\xe9es simul\xe9es ajout\xe9es \xe0 Firebase avec succ\xe8s")}catch(e){console.error("Erreur lors de l'ajout des donn\xe9es simul\xe9es:",e)}return B}},K=async e=>{try{await z("concerts"),console.log(`Tentative de r\xe9cup\xe9ration du concert ${e} depuis Firebase...`);const t=(0,j.H9)(l.db,"concerts",e),n=await(0,j.x7)(t);if(n.exists()){const t={id:n.id,...n.data()};return console.log(`Concert ${e} r\xe9cup\xe9r\xe9 depuis Firebase:`,t),t}return console.log(`Concert ${e} non trouv\xe9 dans Firebase`),null}catch(t){console.error(`Erreur lors de la r\xe9cup\xe9ration du concert ${e}:`,t);const n=B.find((t=>t.id===e))||B[0];return console.log("Utilisation du concert simul\xe9:",n),n}},W=async e=>{try{await z("concerts"),console.log("Tentative d'ajout d'un concert \xe0 Firebase:",e);const n=await(0,j.gS)(q,{...e,createdAt:new Date});console.log(`Concert ajout\xe9 avec succ\xe8s, ID: ${n.id}`);try{const t={concertId:n.id,date:e.date,optionDate:e.optionDate||null,artist:e.artist,project:e.project||null,venue:e.venue,city:e.city,programmer:e.programmer,amount:e.price||0,formStatus:"pending",contractSentStatus:"pending",contractSignedStatus:"pending",invoiceStatus:"pending",status:"en_cours",createdAt:new Date},r=await(async e=>{try{const t={...e,project:e.project||null,optionDate:e.optionDate||null,amount:e.amount||0,formStatus:e.formStatus||"pending",contractSentStatus:e.contractSentStatus||"pending",contractSignedStatus:e.contractSignedStatus||"pending",invoiceStatus:e.invoiceStatus||"pending"};return{id:(await(0,j.gS)((0,j.rJ)(l.db,A),t)).id,...t}}catch(t){return console.error("Erreur lors de la cr\xe9ation du contrat:",t),{id:"mock-contract-"+Date.now(),...e}}})(t);console.log(`Contrat cr\xe9\xe9 automatiquement pour le concert ${n.id}:`,r)}catch(t){console.error("Erreur lors de la cr\xe9ation automatique du contrat:",t)}return{id:n.id,...e}}catch(n){console.error("Erreur lors de l'ajout du concert:",n),console.log("Simulation de l'ajout d'un concert");try{const n="mock-concert-"+Date.now();await setDoc(doc(db,"concerts",n),{...e,createdAt:new Date}),console.log(`Concert ajout\xe9 avec un ID manuel: ${n}`);try{const t={concertId:n,date:e.date,optionDate:e.optionDate||null,artist:e.artist,project:e.project||null,venue:e.venue,city:e.city,programmer:e.programmer,amount:e.price||0,formStatus:"pending",contractSentStatus:"pending",contractSignedStatus:"pending",invoiceStatus:"pending",status:"en_cours",createdAt:new Date},r=await createContract(t);console.log(`Contrat cr\xe9\xe9 automatiquement pour le concert simul\xe9 ${n}:`,r)}catch(t){console.error("Erreur lors de la cr\xe9ation automatique du contrat simul\xe9:",t)}return{id:n,...e,createdAt:new Date}}catch(r){console.error("Erreur lors de l'ajout manuel du concert:",r);return{id:"mock-concert-"+Date.now(),...e,createdAt:new Date}}}},G=async e=>{try{console.log(`Tentative de suppression du concert ${e}`);const n=(0,j.H9)(l.db,"concerts",e);await(0,j.kd)(n);try{const t=await(async e=>{try{const t=(0,j.P)((0,j.rJ)(l.db,A),(0,j._M)("concertId","==",e)),n=await(0,j.GG)(t);if(n.empty)return[];const r=[],i=[];return n.forEach((e=>{r.push(e.id),i.push((0,j.kd)(e.ref))})),await Promise.all(i),console.log(`${r.length} contrats li\xe9s au concert ${e} ont \xe9t\xe9 supprim\xe9s`),r}catch(t){throw console.error(`Erreur lors de la suppression des contrats li\xe9s au concert ${e}:`,t),t}})(e);console.log(`Concert ${e} et ${t.length} contrats associ\xe9s supprim\xe9s avec succ\xe8s`)}catch(t){console.error(`Erreur lors de la suppression des contrats li\xe9s au concert ${e}:`,t)}return e}catch(n){console.error(`Erreur lors de la suppression du concert ${e}:`,n),console.log("Simulation de la suppression d'un concert");try{const t=await deleteContractsByConcert(e);console.log(`${t.length} contrats associ\xe9s au concert ${e} supprim\xe9s avec succ\xe8s`)}catch(t){console.error(`Erreur lors de la suppression des contrats li\xe9s au concert ${e}:`,t)}return e}},Q=async e=>{try{const t=(0,j.rJ)(l.db,e);if((await(0,j.GG)((0,j.P)(t,(0,j.My)("name")))).empty){console.log(`Collection ${e} vide, cr\xe9ation d'un document initial...`);const n={name:"Artiste exemple",genre:"Rock",location:"Paris",members:1,contactEmail:"exemple@email.com",bio:"Ceci est un artiste exemple cr\xe9\xe9 automatiquement.",createdAt:new Date};await(0,j.gS)(t,n),console.log(`Document initial cr\xe9\xe9 dans la collection ${e}`)}return!0}catch(t){return console.error(`Erreur lors de la v\xe9rification/cr\xe9ation de la collection ${e}:`,t),!1}},J=[{id:"mock-artist-1",name:"The Weeknd",genre:"R&B/Pop",location:"Toronto, Canada",members:1,contactEmail:"contact@theweeknd.com",contactPhone:"+1 123 456 7890",bio:"Abel Makkonen Tesfaye, connu sous le nom de The Weeknd, est un auteur-compositeur-interpr\xe8te canadien.",imageUrl:"https://example.com/theweeknd.jpg",socialMedia:{spotify:"https://open.spotify.com/artist/1Xyo4u8uXC1ZmMpatF05PJ",instagram:"https://instagram.com/theweeknd"},createdAt:new Date},{id:"mock-artist-2",name:"Daft Punk",genre:"Electronic",location:"Paris, France",members:2,contactEmail:"contact@daftpunk.com",contactPhone:"+33 1 23 45 67 89",bio:"Daft Punk \xe9tait un duo de musique \xe9lectronique fran\xe7ais form\xe9 en 1993 \xe0 Paris.",imageUrl:"https://example.com/daftpunk.jpg",socialMedia:{spotify:"https://open.spotify.com/artist/4tZwfgrHOc3mvqYlEYSvVi",instagram:"https://instagram.com/daftpunk"},createdAt:new Date}],X=(0,j.rJ)(l.db,"artists"),Y=async()=>{try{await Q("artists"),console.log("Tentative de r\xe9cup\xe9ration des artistes depuis Firebase...");const e=(0,j.P)(X,(0,j.My)("name")),t=await(0,j.GG)(e);if(t.empty)return console.log("Aucun artiste trouv\xe9 dans Firebase, utilisation des donn\xe9es simul\xe9es"),J;const n=t.docs.map((e=>({id:e.id,...e.data()})));return console.log(`${n.length} artistes r\xe9cup\xe9r\xe9s depuis Firebase`),n}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des artistes:",e),console.log("Utilisation des donn\xe9es simul\xe9es pour les artistes");try{console.log("Tentative d'ajout des donn\xe9es simul\xe9es \xe0 Firebase...");for(const e of J){const{id:t,...n}=e;await setDoc(doc(db,"artists",t),n)}console.log("Donn\xe9es simul\xe9es ajout\xe9es \xe0 Firebase avec succ\xe8s")}catch(t){console.error("Erreur lors de l'ajout des donn\xe9es simul\xe9es:",t)}return J}},Z=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)({artist:{id:"",name:""},programmer:{id:"",name:"",structure:""},date:"",time:"",venue:"",city:"",price:"",status:"En attente",notes:""}),g=Array.from({length:24},((e,t)=>t<10?`0${t}`:`${t}`)),v=Array.from({length:60},((e,t)=>t<10?`0${t}`:`${t}`));(0,r.useEffect)((()=>{(async()=>{try{l(!0),console.log("Tentative de r\xe9cup\xe9ration des concerts via Firebase...");const e=await H();console.log("Concerts r\xe9cup\xe9r\xe9s:",e),t(e),console.log("Tentative de r\xe9cup\xe9ration des artistes...");const n=await Y();console.log("Artistes r\xe9cup\xe9r\xe9s:",n),i(n),console.log("Tentative de r\xe9cup\xe9ration des programmateurs...");const r=await M();console.log("Programmateurs r\xe9cup\xe9r\xe9s:",r),a(r),l(!1)}catch(e){console.error("Erreur dans le composant lors de la r\xe9cup\xe9ration des donn\xe9es:",e),d(e.message),l(!1)}})()}),[]);const y=e=>{const{name:t,value:r}=e.target;if("artist"===t){const e=n.find((e=>e.id===r));m({...p,artist:{id:e.id,name:e.name}})}else if("programmer"===t){const e=s.find((e=>e.id===r));m({...p,programmer:{id:e.id,name:e.name,structure:e.structure||""}})}else if("hour"===t||"minute"===t){const e=p.time?p.time.split(":"):["00","00"],n="hour"===t?r:e[0],i="minute"===t?r:e[1];m({...p,time:`${n}:${i}`})}else m({...p,[t]:r});console.log(`Champ ${t} mis \xe0 jour avec la valeur: ${r}`)};if(o&&0===e.length)return(0,c.jsx)("div",{className:"loading",children:"Chargement des concerts..."});if(u)return(0,c.jsxs)("div",{className:"error-message",children:["Erreur: ",u]});const b=p.time?p.time.split(":"):["",""],w=b[0],x=b[1];return(0,c.jsxs)("div",{className:"concerts-list-container",children:[(0,c.jsxs)("div",{className:"concerts-header",children:[(0,c.jsx)("h2",{children:"Liste des Concerts"}),(0,c.jsx)("button",{className:"add-concert-btn",onClick:()=>f(!h),children:h?"Annuler":"Ajouter un concert"})]}),h&&(0,c.jsxs)("div",{className:"add-concert-form-container",children:[(0,c.jsx)("h3",{children:"Ajouter un nouveau concert"}),(0,c.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{l(!0);const e={...p,price:parseFloat(p.price)||0};console.log("Donn\xe9es du concert \xe0 ajouter:",e),await W(e),m({artist:{id:"",name:""},programmer:{id:"",name:"",structure:""},date:"",time:"",venue:"",city:"",price:"",status:"En attente",notes:""}),f(!1);const n=await H();t(n),l(!1)}catch(n){console.error("Erreur lors de l'ajout du concert:",n),d(n.message),l(!1)}},className:"add-concert-form",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"artist",children:"Artiste *"}),(0,c.jsxs)("select",{id:"artist",name:"artist",value:p.artist.id,onChange:y,required:!0,children:[(0,c.jsx)("option",{value:"",children:"S\xe9lectionner un artiste"}),n.map((e=>(0,c.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"programmer",children:"Programmateur *"}),(0,c.jsxs)("select",{id:"programmer",name:"programmer",value:p.programmer.id,onChange:y,required:!0,children:[(0,c.jsx)("option",{value:"",children:"S\xe9lectionner un programmateur"}),s.map((e=>(0,c.jsxs)("option",{value:e.id,children:[e.name," (",e.structure||"Structure non sp\xe9cifi\xe9e",")"]},e.id)))]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"date",children:"Date *"}),(0,c.jsx)("input",{type:"date",id:"date",name:"date",value:p.date,onChange:y,required:!0})]}),(0,c.jsxs)("div",{className:"form-group time-selects",children:[(0,c.jsx)("label",{children:"Heure *"}),(0,c.jsxs)("div",{className:"time-inputs",children:[(0,c.jsxs)("select",{id:"hour",name:"hour",value:w,onChange:y,required:!0,"aria-label":"Heure",children:[(0,c.jsx)("option",{value:"",children:"Heure"}),g.map((e=>(0,c.jsxs)("option",{value:e,children:[e,"h"]},e)))]}),(0,c.jsxs)("select",{id:"minute",name:"minute",value:x,onChange:y,required:!0,"aria-label":"Minute",children:[(0,c.jsx)("option",{value:"",children:"Minute"}),v.map((e=>(0,c.jsx)("option",{value:e,children:e},e)))]})]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"venue",children:"Lieu *"}),(0,c.jsx)("input",{type:"text",id:"venue",name:"venue",value:p.venue,onChange:y,required:!0,placeholder:"Nom de la salle ou du lieu"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"city",children:"Ville *"}),(0,c.jsx)("input",{type:"text",id:"city",name:"city",value:p.city,onChange:y,required:!0,placeholder:"Ville"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"price",children:"Prix (\u20ac)"}),(0,c.jsx)("input",{type:"number",id:"price",name:"price",value:p.price,onChange:y,min:"0",step:"0.01",placeholder:"Prix en euros"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"status",children:"Statut"}),(0,c.jsx)("select",{id:"status",name:"status",value:p.status,onChange:y,children:["En attente","Confirm\xe9","Contrat envoy\xe9","Contrat sign\xe9","Acompte re\xe7u","Sold\xe9","Annul\xe9"].map((e=>(0,c.jsx)("option",{value:e,children:e},e)))})]}),(0,c.jsxs)("div",{className:"form-group full-width",children:[(0,c.jsx)("label",{htmlFor:"notes",children:"Notes"}),(0,c.jsx)("textarea",{id:"notes",name:"notes",value:p.notes,onChange:y,rows:"4",placeholder:"Informations compl\xe9mentaires"})]}),(0,c.jsxs)("div",{className:"form-actions",children:[(0,c.jsx)("button",{type:"button",className:"cancel-btn",onClick:()=>f(!1),children:"Annuler"}),(0,c.jsx)("button",{type:"submit",className:"submit-btn",disabled:o,children:o?"Ajout en cours...":"Ajouter le concert"})]})]})]}),0===e.length?(0,c.jsx)("p",{className:"no-results",children:"Aucun concert trouv\xe9."}):(0,c.jsx)("div",{className:"concerts-table-container",children:(0,c.jsxs)("table",{className:"concerts-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Date"}),(0,c.jsx)("th",{children:"Heure"}),(0,c.jsx)("th",{children:"Artiste"}),(0,c.jsx)("th",{children:"Lieu"}),(0,c.jsx)("th",{children:"Ville"}),(0,c.jsx)("th",{children:"Statut"}),(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsx)("tbody",{children:e.map((e=>{var t;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.date?new Date(e.date).toLocaleDateString():"Non sp\xe9cifi\xe9"}),(0,c.jsx)("td",{children:e.time||"Non sp\xe9cifi\xe9"}),(0,c.jsx)("td",{children:(null===(t=e.artist)||void 0===t?void 0:t.name)||"Non sp\xe9cifi\xe9"}),(0,c.jsx)("td",{children:e.venue||"Non sp\xe9cifi\xe9"}),(0,c.jsx)("td",{children:e.city||"Non sp\xe9cifi\xe9"}),(0,c.jsx)("td",{children:e.status||"Non sp\xe9cifi\xe9"}),(0,c.jsx)("td",{children:(0,c.jsx)(_,{to:`/concerts/${e.id}`,className:"view-details-btn",children:"Voir"})})]},e.id)}))})]})})]})};var ee=n(362);const te=()=>{var e,t,n,i;const{id:s}=(0,a.g)(),o=(0,a.Zp)(),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)([]),[p,m]=(0,r.useState)([]),[g,v]=(0,r.useState)(!0),[y,b]=(0,r.useState)(null),[w,x]=(0,r.useState)(!1),[E,S]=(0,r.useState)(null),[_,N]=(0,r.useState)(!1),[k,T]=(0,r.useState)(!1),[C,I]=(0,r.useState)({artist:{id:"",name:""},programmer:{id:"",name:"",structure:""},date:"",time:"",venue:"",city:"",price:"",status:"En attente",notes:""}),A=Array.from({length:24},((e,t)=>t<10?`0${t}`:`${t}`)),D=Array.from({length:60},((e,t)=>t<10?`0${t}`:`${t}`));(0,r.useEffect)((()=>{(async()=>{try{v(!0),console.log(`Tentative de r\xe9cup\xe9ration du concert avec l'ID: ${s}`);const e=await K(s);if(!e)throw new Error("Concert non trouv\xe9");console.log("Concert r\xe9cup\xe9r\xe9:",e),d(e),I({artist:e.artist||{id:"",name:""},programmer:e.programmer||{id:"",name:"",structure:""},date:e.date||"",time:e.time||"",venue:e.venue||"",city:e.city||"",price:e.price?e.price.toString():"",status:e.status||"En attente",notes:e.notes||""}),console.log("Tentative de r\xe9cup\xe9ration des artistes...");const t=await Y();console.log("Artistes r\xe9cup\xe9r\xe9s:",t),f(t),console.log("Tentative de r\xe9cup\xe9ration des programmateurs...");const n=await M();console.log("Programmateurs r\xe9cup\xe9r\xe9s:",n),m(n);const r=await(0,ee.dL)(s);r&&(console.log("Lien de formulaire existant trouv\xe9:",r),S(r)),v(!1)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration du concert:",e),b(e.message),v(!1)}})()}),[s]);const P=e=>{const{name:t,value:n}=e.target;if("artist"===t){const e=h.find((e=>e.id===n));I({...C,artist:{id:e.id,name:e.name}})}else if("programmer"===t){const e=p.find((e=>e.id===n));I({...C,programmer:{id:e.id,name:e.name,structure:e.structure||""}})}else if("hour"===t||"minute"===t){const e=C.time?C.time.split(":"):["00","00"],r="hour"===t?n:e[0],i="minute"===t?n:e[1];I({...C,time:`${r}:${i}`})}else I({...C,[t]:n})},R=()=>{N(!1),T(!1)};if(g&&!u)return(0,c.jsx)("div",{className:"loading",children:"Chargement des d\xe9tails du concert..."});if(y)return(0,c.jsxs)("div",{className:"error-message",children:["Erreur: ",y]});if(!u)return(0,c.jsx)("div",{className:"not-found",children:"Concert non trouv\xe9"});const O=C.time?C.time.split(":"):["",""],L=O[0],F=O[1],U=window.location.origin,V=E?`${U}/form/${E.token}`:"";return(0,c.jsxs)("div",{className:"concert-detail-container",children:[(0,c.jsx)("h2",{children:"D\xe9tails du Concert"}),w?(0,c.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{v(!0);const e={...C,price:parseFloat(C.price)||0};console.log("Donn\xe9es du concert \xe0 mettre \xe0 jour:",e),await(async(e,t)=>{try{await z("concerts"),console.log(`Tentative de mise \xe0 jour du concert ${e}:`,t);const n=(0,j.H9)(l.db,"concerts",e);return await(0,j.mZ)(n,{...t,updatedAt:new Date}),console.log(`Concert ${e} mis \xe0 jour avec succ\xe8s`),{id:e,...t}}catch(y){console.error(`Erreur lors de la mise \xe0 jour du concert ${e}:`,y),console.log("Simulation de la mise \xe0 jour d'un concert");try{return await setDoc(doc(db,"concerts",e),{...t,updatedAt:new Date}),console.log(`Concert ${e} cr\xe9\xe9/remplac\xe9 avec succ\xe8s`),{id:e,...t,updatedAt:new Date}}catch(b){return console.error(`Erreur lors de la cr\xe9ation/remplacement du concert ${e}:`,b),{id:e,...t,updatedAt:new Date}}}})(s,e);const t=await K(s);d(t),x(!1),v(!1)}catch(t){console.error("Erreur lors de la mise \xe0 jour du concert:",t),b(t.message),v(!1)}},className:"edit-form",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"artist",children:"Artiste *"}),(0,c.jsxs)("select",{id:"artist",name:"artist",value:C.artist.id,onChange:P,required:!0,children:[(0,c.jsx)("option",{value:"",children:"S\xe9lectionner un artiste"}),h.map((e=>(0,c.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"programmer",children:"Programmateur *"}),(0,c.jsxs)("select",{id:"programmer",name:"programmer",value:C.programmer.id,onChange:P,required:!0,children:[(0,c.jsx)("option",{value:"",children:"S\xe9lectionner un programmateur"}),p.map((e=>(0,c.jsxs)("option",{value:e.id,children:[e.name," (",e.structure||"Structure non sp\xe9cifi\xe9e",")"]},e.id)))]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"date",children:"Date *"}),(0,c.jsx)("input",{type:"date",id:"date",name:"date",value:C.date,onChange:P,required:!0})]}),(0,c.jsxs)("div",{className:"form-group time-selects",children:[(0,c.jsx)("label",{children:"Heure *"}),(0,c.jsxs)("div",{className:"time-inputs",children:[(0,c.jsxs)("select",{id:"hour",name:"hour",value:L,onChange:P,required:!0,"aria-label":"Heure",children:[(0,c.jsx)("option",{value:"",children:"Heure"}),A.map((e=>(0,c.jsxs)("option",{value:e,children:[e,"h"]},e)))]}),(0,c.jsxs)("select",{id:"minute",name:"minute",value:F,onChange:P,required:!0,"aria-label":"Minute",children:[(0,c.jsx)("option",{value:"",children:"Minute"}),D.map((e=>(0,c.jsx)("option",{value:e,children:e},e)))]})]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"venue",children:"Lieu *"}),(0,c.jsx)("input",{type:"text",id:"venue",name:"venue",value:C.venue,onChange:P,required:!0,placeholder:"Nom de la salle ou du lieu"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"city",children:"Ville *"}),(0,c.jsx)("input",{type:"text",id:"city",name:"city",value:C.city,onChange:P,required:!0,placeholder:"Ville"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"price",children:"Prix (\u20ac)"}),(0,c.jsx)("input",{type:"number",id:"price",name:"price",value:C.price,onChange:P,min:"0",step:"0.01",placeholder:"Prix en euros"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"status",children:"Statut"}),(0,c.jsx)("select",{id:"status",name:"status",value:C.status,onChange:P,children:["En attente","Confirm\xe9","Contrat envoy\xe9","Contrat sign\xe9","Acompte re\xe7u","Sold\xe9","Annul\xe9"].map((e=>(0,c.jsx)("option",{value:e,children:e},e)))})]}),(0,c.jsxs)("div",{className:"form-group full-width",children:[(0,c.jsx)("label",{htmlFor:"notes",children:"Notes"}),(0,c.jsx)("textarea",{id:"notes",name:"notes",value:C.notes,onChange:P,rows:"4",placeholder:"Informations compl\xe9mentaires"})]}),(0,c.jsxs)("div",{className:"form-actions",children:[(0,c.jsx)("button",{type:"button",className:"cancel-btn",onClick:()=>x(!1),children:"Annuler"}),(0,c.jsx)("button",{type:"submit",className:"save-btn",disabled:g,children:g?"Enregistrement...":"Enregistrer"})]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"concert-info",children:[(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"info-label",children:"Artiste:"}),(0,c.jsx)("span",{className:"info-value",children:(null===(e=u.artist)||void 0===e?void 0:e.name)||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"info-label",children:"Programmateur:"}),(0,c.jsxs)("span",{className:"info-value",children:[(null===(t=u.programmer)||void 0===t?void 0:t.name)||"Non sp\xe9cifi\xe9",(null===(n=u.programmer)||void 0===n?void 0:n.structure)&&` (${u.programmer.structure})`]})]}),(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"info-label",children:"Date:"}),(0,c.jsx)("span",{className:"info-value",children:u.date?new Date(u.date).toLocaleDateString():"Non sp\xe9cifi\xe9e"})]}),(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"info-label",children:"Heure:"}),(0,c.jsx)("span",{className:"info-value",children:u.time||"Non sp\xe9cifi\xe9e"})]}),(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"info-label",children:"Lieu:"}),(0,c.jsx)("span",{className:"info-value",children:u.venue||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"info-label",children:"Ville:"}),(0,c.jsx)("span",{className:"info-value",children:u.city||"Non sp\xe9cifi\xe9e"})]}),(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"info-label",children:"Prix:"}),(0,c.jsx)("span",{className:"info-value",children:u.price?`${u.price} \u20ac`:"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"info-row",children:[(0,c.jsx)("span",{className:"info-label",children:"Statut:"}),(0,c.jsx)("span",{className:"info-value",children:u.status||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"info-row notes",children:[(0,c.jsx)("span",{className:"info-label",children:"Notes:"}),(0,c.jsx)("span",{className:"info-value",children:u.notes||"Aucune note"})]}),(0,c.jsxs)("div",{className:"info-row form-link-status",children:[(0,c.jsx)("span",{className:"info-label",children:"Formulaire:"}),(0,c.jsx)("span",{className:"info-value",children:E?E.isSubmitted?(0,c.jsx)("span",{className:"form-submitted",children:"Formulaire soumis"}):(0,c.jsx)("span",{className:"form-pending",children:"Formulaire envoy\xe9, en attente de r\xe9ponse"}):(0,c.jsx)("span",{className:"form-not-sent",children:"Formulaire non envoy\xe9"})})]})]}),(0,c.jsxs)("div",{className:"concert-actions",children:[(0,c.jsx)("button",{onClick:()=>x(!0),className:"edit-btn",children:"Modifier"}),(0,c.jsx)("button",{onClick:async()=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce concert ?"))try{v(!0),await G(s),o("/concerts")}catch(e){console.error("Erreur lors de la suppression du concert:",e),b(e.message),v(!1)}},className:"delete-btn",children:"Supprimer"}),(0,c.jsx)("button",{onClick:async()=>{try{if(v(!0),!u.programmer||!u.programmer.id)return alert("Ce concert n'a pas de programmateur associ\xe9. Veuillez d'abord ajouter un programmateur."),void v(!1);if(E)return N(!0),void v(!1);const e=await(0,ee.mW)(s,u,u.programmer.id,u.programmer.name);S(e),N(!0),v(!1)}catch(e){console.error("Erreur lors de la g\xe9n\xe9ration du lien de formulaire:",e),b(e.message),v(!1),alert("Une erreur est survenue lors de la g\xe9n\xe9ration du lien de formulaire. Veuillez r\xe9essayer.")}},className:"send-form-btn",disabled:g||!(null!==(i=u.programmer)&&void 0!==i&&i.id),children:E?"Voir le lien du formulaire":"Envoyer le formulaire"}),(0,c.jsx)("button",{onClick:()=>o("/concerts"),className:"back-btn",children:"Retour \xe0 la liste"})]})]}),_&&E&&(0,c.jsx)("div",{className:"form-link-modal-overlay",children:(0,c.jsxs)("div",{className:"form-link-modal",children:[(0,c.jsxs)("div",{className:"form-link-modal-header",children:[(0,c.jsx)("h3",{children:E.isSubmitted?"Formulaire d\xe9j\xe0 soumis":"Lien du formulaire"}),(0,c.jsx)("button",{className:"close-modal-btn",onClick:R,children:(0,c.jsx)("i",{className:"fas fa-times"})})]}),(0,c.jsx)("div",{className:"form-link-modal-content",children:E.isSubmitted?(0,c.jsxs)("div",{className:"form-submitted-message",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("i",{className:"fas fa-check-circle"}),"Ce formulaire a d\xe9j\xe0 \xe9t\xe9 soumis par le programmateur."]}),(0,c.jsxs)("p",{children:["Vous pouvez consulter les informations soumises dans l'onglet",(0,c.jsx)("strong",{children:" Validation Formulaire"}),"."]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{className:"form-link-instructions",children:"Voici le lien unique \xe0 envoyer au programmateur pour qu'il puisse remplir le formulaire :"}),(0,c.jsxs)("div",{className:"form-link-container",children:[(0,c.jsx)("input",{type:"text",value:V,readOnly:!0,className:"form-link-input"}),(0,c.jsx)("button",{className:"copy-link-btn",onClick:()=>{if(!E)return;const e=`${window.location.origin}/form/${E.token}`;navigator.clipboard.writeText(e).then((()=>{T(!0),setTimeout((()=>T(!1)),3e3)})).catch((e=>{console.error("Erreur lors de la copie du lien:",e),alert("Impossible de copier le lien. Veuillez le s\xe9lectionner et le copier manuellement.")}))},children:k?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("i",{className:"fas fa-check"})," Copi\xe9"]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("i",{className:"fas fa-copy"})," Copier"]})})]}),(0,c.jsxs)("div",{className:"form-link-info",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("i",{className:"fas fa-info-circle"}),"Ce lien est unique et associ\xe9 \xe0 ce concert. Il permet au programmateur de remplir ses informations sans avoir besoin de cr\xe9er un compte."]}),(0,c.jsxs)("p",{children:["Une fois le formulaire soumis, les informations appara\xeetront dans l'onglet",(0,c.jsx)("strong",{children:" Validation Formulaire"}),"."]})]})]})}),(0,c.jsx)("div",{className:"form-link-modal-actions",children:(0,c.jsx)("button",{className:"close-btn",onClick:R,children:"Fermer"})})]})})]})},ne=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[s,a]=(0,r.useState)(null),[o,l]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)({name:"",genre:"Rock",location:"",members:1,contactEmail:"",contactPhone:"",bio:"",imageUrl:"",socialMedia:{spotify:"",instagram:""}}),g=["Rock","Pop","Jazz","\xc9lectronique","Hip-Hop","Rap","Classique","Folk","Metal","Blues","Reggae","Soul","Funk","Country","World","Autre"];(0,r.useEffect)((()=>{(async()=>{try{i(!0);const e=await Y();console.log("Donn\xe9es d'artistes r\xe9cup\xe9r\xe9es:",e),t(e),i(!1)}catch(e){console.error("Erreur dans le composant lors de la r\xe9cup\xe9ration des artistes:",e),a(e.message),i(!1)}})()}),[]);const v=e=>{const{name:t,value:n}=e.target;if(t.includes(".")){const[e,r]=t.split(".");m({...p,[e]:{...p[e],[r]:n}})}else m({...p,[t]:n});console.log(`Champ ${t} mis \xe0 jour avec la valeur: ${n}`)},y=e.filter((e=>{const t=e.name.toLowerCase().includes(o.toLowerCase())||e.location&&e.location.toLowerCase().includes(o.toLowerCase()),n=""===u||e.genre===u;return t&&n}));return n&&0===e.length?(0,c.jsx)("div",{className:"loading",children:"Chargement des artistes..."}):s?(0,c.jsxs)("div",{className:"error-message",children:["Erreur: ",s]}):(0,c.jsxs)("div",{className:"artists-list-container",children:[(0,c.jsxs)("div",{className:"artists-header",children:[(0,c.jsx)("h2",{children:"Liste des Artistes"}),(0,c.jsx)("button",{className:"add-artist-btn",onClick:()=>f(!h),children:h?"Annuler":"Ajouter un artiste"})]}),h&&(0,c.jsxs)("div",{className:"add-artist-form-container",children:[(0,c.jsx)("h3",{children:"Ajouter un nouvel artiste"}),(0,c.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{i(!0);const e={...p,members:parseInt(p.members,10)||1};console.log("Donn\xe9es de l'artiste \xe0 ajouter:",e),await(async e=>{try{await Q("artists"),console.log("Tentative d'ajout d'un artiste \xe0 Firebase:",e);const t=await(0,j.gS)(X,{...e,createdAt:new Date});return console.log(`Artiste ajout\xe9 avec succ\xe8s, ID: ${t.id}`),{id:t.id,...e}}catch(s){console.error("Erreur lors de l'ajout de l'artiste:",s),console.log("Simulation de l'ajout d'un artiste");try{const t="mock-artist-"+Date.now();return await setDoc(doc(db,"artists",t),{...e,createdAt:new Date}),console.log(`Artiste ajout\xe9 avec un ID manuel: ${t}`),{id:t,...e,createdAt:new Date}}catch(t){return console.error("Erreur lors de l'ajout manuel de l'artiste:",t),{id:"mock-artist-"+Date.now(),...e,createdAt:new Date}}}})(e),m({name:"",genre:"Rock",location:"",members:1,contactEmail:"",contactPhone:"",bio:"",imageUrl:"",socialMedia:{spotify:"",instagram:""}}),f(!1);const n=await Y();t(n),i(!1)}catch(n){console.error("Erreur lors de l'ajout de l'artiste:",n),a(n.message),i(!1)}},className:"add-artist-form",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"name",children:"Nom de l'artiste *"}),(0,c.jsx)("input",{type:"text",id:"name",name:"name",value:p.name,onChange:v,required:!0,placeholder:"Nom de l'artiste ou du groupe"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"genre",children:"Genre musical *"}),(0,c.jsx)("select",{id:"genre",name:"genre",value:p.genre,onChange:v,required:!0,children:g.map((e=>(0,c.jsx)("option",{value:e,children:e},e)))})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"location",children:"Ville *"}),(0,c.jsx)("input",{type:"text",id:"location",name:"location",value:p.location,onChange:v,required:!0,placeholder:"Ville d'origine"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"members",children:"Nombre de membres"}),(0,c.jsx)("input",{type:"number",id:"members",name:"members",value:p.members,onChange:v,min:"1",placeholder:"Nombre de membres"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"contactEmail",children:"Email de contact *"}),(0,c.jsx)("input",{type:"email",id:"contactEmail",name:"contactEmail",value:p.contactEmail,onChange:v,required:!0,placeholder:"email@exemple.com"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"contactPhone",children:"T\xe9l\xe9phone"}),(0,c.jsx)("input",{type:"tel",id:"contactPhone",name:"contactPhone",value:p.contactPhone,onChange:v,placeholder:"06 12 34 56 78"})]}),(0,c.jsxs)("div",{className:"form-group full-width",children:[(0,c.jsx)("label",{htmlFor:"bio",children:"Biographie"}),(0,c.jsx)("textarea",{id:"bio",name:"bio",value:p.bio,onChange:v,rows:"4",placeholder:"Biographie de l'artiste"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"imageUrl",children:"URL de l'image"}),(0,c.jsx)("input",{type:"url",id:"imageUrl",name:"imageUrl",value:p.imageUrl,onChange:v,placeholder:"https://exemple.com/image.jpg"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"socialMedia.spotify",children:"Spotify"}),(0,c.jsx)("input",{type:"url",id:"socialMedia.spotify",name:"socialMedia.spotify",value:p.socialMedia.spotify,onChange:v,placeholder:"https://open.spotify.com/artist/..."})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"socialMedia.instagram",children:"Instagram"}),(0,c.jsx)("input",{type:"url",id:"socialMedia.instagram",name:"socialMedia.instagram",value:p.socialMedia.instagram,onChange:v,placeholder:"https://instagram.com/..."})]}),(0,c.jsxs)("div",{className:"form-actions",children:[(0,c.jsx)("button",{type:"button",className:"cancel-btn",onClick:()=>f(!1),children:"Annuler"}),(0,c.jsx)("button",{type:"submit",className:"submit-btn",disabled:n,children:n?"Ajout en cours...":"Ajouter l'artiste"})]})]})]}),(0,c.jsxs)("div",{className:"artists-filters",children:[(0,c.jsx)("div",{className:"search-container",children:(0,c.jsx)("input",{type:"text",placeholder:"Rechercher un artiste...",value:o,onChange:e=>l(e.target.value),className:"search-input"})}),(0,c.jsx)("div",{className:"filter-container",children:(0,c.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"genre-filter",children:[(0,c.jsx)("option",{value:"",children:"Tous les genres"}),g.map((e=>(0,c.jsx)("option",{value:e,children:e},e)))]})})]}),0===y.length?(0,c.jsx)("p",{className:"no-results",children:"Aucun artiste trouv\xe9."}):(0,c.jsx)("div",{className:"artists-grid",children:y.map((e=>(0,c.jsxs)("div",{className:"artist-card",children:[(0,c.jsx)("div",{className:"artist-image",children:e.imageUrl?(0,c.jsx)("img",{src:e.imageUrl,alt:e.name}):(0,c.jsx)("div",{className:"placeholder-image",children:e.name.charAt(0)})}),(0,c.jsxs)("div",{className:"artist-info",children:[(0,c.jsx)("h3",{className:"artist-name",children:e.name}),(0,c.jsx)("p",{className:"artist-genre",children:e.genre||"Genre non sp\xe9cifi\xe9"}),(0,c.jsx)("p",{className:"artist-location",children:e.location||"Lieu non sp\xe9cifi\xe9"}),(0,c.jsx)(_,{to:`/artistes/${e.id}`,className:"view-details-btn",children:"Voir les d\xe9tails"})]})]},e.id)))})]})},re=()=>{var e,t,n,i;const{id:s}=(0,a.g)(),o=(0,a.Zp)(),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)([]),[p,m]=(0,r.useState)(!0),[g,v]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{try{m(!0);const e=await(async e=>{try{await Q("artists"),console.log(`Tentative de r\xe9cup\xe9ration de l'artiste ${e} depuis Firebase...`);const t=(0,j.H9)(l.db,"artists",e),n=await(0,j.x7)(t);if(n.exists()){const t={id:n.id,...n.data()};return console.log(`Artiste ${e} r\xe9cup\xe9r\xe9 depuis Firebase:`,t),t}return console.log(`Artiste ${e} non trouv\xe9 dans Firebase`),null}catch(g){console.error(`Erreur lors de la r\xe9cup\xe9ration de l'artiste ${e}:`,g);const n=J.find((t=>t.id===e))||J[0];return console.log("Utilisation de l'artiste simul\xe9:",n),n}})(s);if(!e)throw new Error("Artiste non trouv\xe9");d(e),console.log(`R\xe9cup\xe9ration des concerts pour l'artiste ID: ${s}`);const t=await(async e=>{try{await z("concerts"),console.log(`Tentative de r\xe9cup\xe9ration des concerts pour l'artiste ${e}...`);const t=(0,j.P)(q,(0,j._M)("artist.id","==",e),(0,j.My)("date","desc")),n=await(0,j.GG)(t);if(n.empty)return console.log(`Aucun concert trouv\xe9 pour l'artiste ${e}`),[];const r=n.docs.map((e=>({id:e.id,...e.data()})));return console.log(`${r.length} concerts r\xe9cup\xe9r\xe9s pour l'artiste ${e}`),r}catch(g){console.error(`Erreur lors de la r\xe9cup\xe9ration des concerts pour l'artiste ${e}:`,g);const n=B.filter((t=>t.artist.id===e));return console.log(`Utilisation de ${n.length} concerts simul\xe9s pour l'artiste ${e}`),n}})(s);console.log("Concerts r\xe9cup\xe9r\xe9s:",t),f(t),m(!1)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es:",e),v(e.message),m(!1)}})()}),[s]);return p?(0,c.jsx)("div",{className:"loading",children:"Chargement des d\xe9tails de l'artiste..."}):g?(0,c.jsxs)("div",{className:"error-message",children:["Erreur: ",g]}):u?(0,c.jsxs)("div",{className:"artist-detail-container",children:[(0,c.jsxs)("div",{className:"artist-header",children:[(0,c.jsxs)("div",{className:"artist-header-info",children:[(0,c.jsx)("h2",{children:u.name}),(0,c.jsx)("div",{className:"artist-genre",children:u.genre||"Genre non sp\xe9cifi\xe9"})]}),u.imageUrl&&(0,c.jsx)("div",{className:"artist-header-image",children:(0,c.jsx)("img",{src:u.imageUrl,alt:u.name})})]}),(0,c.jsxs)("div",{className:"artist-info",children:[(0,c.jsxs)("div",{className:"info-section",children:[(0,c.jsx)("h3",{children:"Informations g\xe9n\xe9rales"}),(0,c.jsxs)("div",{className:"info-grid",children:[(0,c.jsxs)("div",{className:"info-item",children:[(0,c.jsx)("span",{className:"info-label",children:"Ville:"}),(0,c.jsx)("span",{className:"info-value",children:u.location||"Non sp\xe9cifi\xe9e"})]}),(0,c.jsxs)("div",{className:"info-item",children:[(0,c.jsx)("span",{className:"info-label",children:"Nombre de membres:"}),(0,c.jsx)("span",{className:"info-value",children:u.members||"Non sp\xe9cifi\xe9"})]})]})]}),(0,c.jsxs)("div",{className:"info-section",children:[(0,c.jsx)("h3",{children:"Contact"}),(0,c.jsxs)("div",{className:"info-grid",children:[(0,c.jsxs)("div",{className:"info-item",children:[(0,c.jsx)("span",{className:"info-label",children:"Email:"}),(0,c.jsx)("span",{className:"info-value",children:u.contactEmail})]}),(0,c.jsxs)("div",{className:"info-item",children:[(0,c.jsx)("span",{className:"info-label",children:"T\xe9l\xe9phone:"}),(0,c.jsx)("span",{className:"info-value",children:u.contactPhone||"Non sp\xe9cifi\xe9"})]})]})]}),u.bio&&(0,c.jsxs)("div",{className:"info-section",children:[(0,c.jsx)("h3",{children:"Biographie"}),(0,c.jsx)("p",{className:"artist-bio",children:u.bio})]}),(0,c.jsxs)("div",{className:"info-section",children:[(0,c.jsx)("h3",{children:"Pr\xe9sence web"}),(0,c.jsxs)("div",{className:"web-links",children:[(null===(e=u.socialMedia)||void 0===e?void 0:e.spotify)&&(0,c.jsxs)("a",{href:u.socialMedia.spotify,target:"_blank",rel:"noopener noreferrer",className:"web-link",children:[(0,c.jsx)("i",{className:"fab fa-spotify"})," Spotify"]}),(null===(t=u.socialMedia)||void 0===t?void 0:t.instagram)&&(0,c.jsxs)("a",{href:u.socialMedia.instagram,target:"_blank",rel:"noopener noreferrer",className:"web-link",children:[(0,c.jsx)("i",{className:"fab fa-instagram"})," Instagram"]}),!(null!==(n=u.socialMedia)&&void 0!==n&&n.spotify)&&!(null!==(i=u.socialMedia)&&void 0!==i&&i.instagram)&&(0,c.jsx)("p",{children:"Aucune pr\xe9sence web renseign\xe9e"})]})]})]}),(0,c.jsxs)("div",{className:"concerts-section",children:[(0,c.jsxs)("h3",{children:["Concerts programm\xe9s (",h.length,")"]}),h&&h.length>0?(0,c.jsx)("div",{className:"concerts-table-container",children:(0,c.jsxs)("table",{className:"concerts-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Date"}),(0,c.jsx)("th",{children:"Heure"}),(0,c.jsx)("th",{children:"Lieu"}),(0,c.jsx)("th",{children:"Ville"}),(0,c.jsx)("th",{children:"Statut"}),(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsx)("tbody",{children:h.map((e=>{const t=(e=>{if(!e)return{text:"Non sp\xe9cifi\xe9",className:"status-non-specifie"};const t=e.toLowerCase().replace(/ /g,"_");return{en_attente:{text:"En attente",className:"status-en-attente"},"confirm\xe9":{text:"Confirm\xe9",className:"status-confirme"},"contrat_envoy\xe9":{text:"Contrat envoy\xe9",className:"status-contrat-envoye"},"contrat_sign\xe9":{text:"Contrat sign\xe9",className:"status-contrat-signe"},"acompte_re\xe7u":{text:"Acompte re\xe7u",className:"status-acompte-recu"},"sold\xe9":{text:"Sold\xe9",className:"status-solde"},"annul\xe9":{text:"Annul\xe9",className:"status-annule"}}[t]||{text:e.charAt(0).toUpperCase()+e.slice(1).replace("_"," "),className:`status-${t}`}})(e.status);return(0,c.jsxs)("tr",{className:"concert-row",children:[(0,c.jsx)("td",{children:e.date?new Date(e.date).toLocaleDateString():"Non sp\xe9cifi\xe9e"}),(0,c.jsx)("td",{children:e.time||"Non sp\xe9cifi\xe9e"}),(0,c.jsx)("td",{children:e.venue||"Non sp\xe9cifi\xe9"}),(0,c.jsx)("td",{children:e.city||"Non sp\xe9cifi\xe9e"}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:`status-badge ${t.className}`,children:t.text})}),(0,c.jsx)("td",{children:(0,c.jsx)("button",{onClick:()=>o(`/concerts/${e.id}`),className:"view-concert-btn",children:"D\xe9tails"})})]},e.id)}))})]})}):(0,c.jsx)("p",{className:"no-concerts",children:"Aucun concert programm\xe9 pour cet artiste."})]}),(0,c.jsxs)("div",{className:"artist-actions",children:[(0,c.jsxs)("button",{onClick:()=>o(`/artistes/modifier/${s}`),className:"edit-btn",children:[(0,c.jsx)("i",{className:"fas fa-edit"})," Modifier"]}),(0,c.jsxs)("button",{onClick:async()=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer cet artiste ?"))try{await(async e=>{try{console.log(`Tentative de suppression de l'artiste ${e}`);const t=(0,j.H9)(l.db,"artists",e);return await(0,j.kd)(t),console.log(`Artiste ${e} supprim\xe9 avec succ\xe8s`),e}catch(g){return console.error(`Erreur lors de la suppression de l'artiste ${e}:`,g),console.log("Simulation de la suppression d'un artiste"),e}})(s),o("/artistes")}catch(e){v(e.message)}},className:"delete-btn",children:[(0,c.jsx)("i",{className:"fas fa-trash"})," Supprimer"]}),(0,c.jsxs)("button",{onClick:()=>o("/artistes"),className:"back-btn",children:[(0,c.jsx)("i",{className:"fas fa-arrow-left"})," Retour \xe0 la liste"]})]})]}):(0,c.jsx)("div",{className:"not-found",children:"Artiste non trouv\xe9"})},ie=e=>{let{initialData:t,onSend:n,onCancel:i}=e;const[s,a]=(0,r.useState)(t||{to:"",subject:"",body:""}),o=e=>{const{name:t,value:n}=e.target;a({...s,[t]:n})};return(0,c.jsxs)("div",{className:"email-composer",children:[(0,c.jsx)("h3",{children:t?"Voir l'email":"Composer un nouvel email"}),(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(s)},children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"to",children:"Destinataire"}),(0,c.jsx)("input",{type:"email",id:"to",name:"to",value:s.to,onChange:o,required:!0,disabled:t})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"subject",children:"Objet"}),(0,c.jsx)("input",{type:"text",id:"subject",name:"subject",value:s.subject,onChange:o,required:!0,disabled:t})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"body",children:"Message"}),(0,c.jsx)("textarea",{id:"body",name:"body",value:s.body,onChange:o,rows:"10",required:!0,disabled:t})]}),(0,c.jsxs)("div",{className:"form-actions",children:[!t&&(0,c.jsx)("button",{type:"submit",className:"send-btn",children:"Envoyer"}),(0,c.jsx)("button",{type:"button",className:"cancel-btn",onClick:i,children:t?"Fermer":"Annuler"})]})]})]})},se=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!1),[s,a]=(0,r.useState)(null);return(0,c.jsxs)("div",{className:"email-system-container",children:[(0,c.jsx)("h2",{children:"Syst\xe8me d'Emails"}),(0,c.jsx)("div",{className:"email-actions",children:(0,c.jsx)("button",{className:"compose-btn",onClick:()=>{a(null),i(!0)},children:"Composer un nouvel email"})}),n&&(0,c.jsx)("div",{className:"email-composer-wrapper",children:(0,c.jsx)(ie,{initialData:s,onSend:n=>{const r={id:Date.now(),...n,status:"sent",date:(new Date).toISOString()};t([r,...e]),i(!1)},onCancel:()=>i(!1)})}),(0,c.jsxs)("div",{className:"emails-list",children:[(0,c.jsx)("h3",{children:"Emails envoy\xe9s"}),0===e.length?(0,c.jsx)("p",{children:"Aucun email envoy\xe9."}):(0,c.jsxs)("table",{className:"emails-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Destinataire"}),(0,c.jsx)("th",{children:"Objet"}),(0,c.jsx)("th",{children:"Date"}),(0,c.jsx)("th",{children:"Statut"}),(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsx)("tbody",{children:e.map((e=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.to}),(0,c.jsx)("td",{children:e.subject}),(0,c.jsx)("td",{children:new Date(e.date).toLocaleString()}),(0,c.jsx)("td",{children:e.status}),(0,c.jsx)("td",{children:(0,c.jsx)("button",{onClick:()=>{a(e),i(!0)},className:"view-btn",children:"Voir"})})]},e.id)))})]})]})]})},ae=e=>{let{initialData:t,onGenerate:n,onCancel:i}=e;const[s,a]=(0,r.useState)(t||{title:"",type:"contrat",content:""}),o=e=>{const{name:t,value:n}=e.target;a({...s,[t]:n})};return(0,c.jsxs)("div",{className:"document-generator",children:[(0,c.jsx)("h3",{children:t?"Modifier le document":"G\xe9n\xe9rer un nouveau document"}),(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(s)},children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"title",children:"Titre"}),(0,c.jsx)("input",{type:"text",id:"title",name:"title",value:s.title,onChange:o,required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"type",children:"Type de document"}),(0,c.jsxs)("select",{id:"type",name:"type",value:s.type,onChange:o,required:!0,children:[(0,c.jsx)("option",{value:"contrat",children:"Contrat"}),(0,c.jsx)("option",{value:"facture",children:"Facture"}),(0,c.jsx)("option",{value:"devis",children:"Devis"}),(0,c.jsx)("option",{value:"fiche_technique",children:"Fiche technique"})]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"content",children:"Contenu"}),(0,c.jsx)("textarea",{id:"content",name:"content",value:s.content,onChange:o,rows:"10",required:!0})]}),(0,c.jsxs)("div",{className:"form-actions",children:[(0,c.jsx)("button",{type:"submit",className:"generate-btn",children:t?"Mettre \xe0 jour":"G\xe9n\xe9rer"}),(0,c.jsx)("button",{type:"button",className:"cancel-btn",onClick:i,children:"Annuler"})]})]})]})},oe=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!1),[s,a]=(0,r.useState)(null);return(0,c.jsxs)("div",{className:"documents-manager-container",children:[(0,c.jsx)("h2",{children:"Gestionnaire de Documents"}),(0,c.jsx)("div",{className:"document-actions",children:(0,c.jsx)("button",{className:"generate-btn",onClick:()=>{a(null),i(!0)},children:"G\xe9n\xe9rer un nouveau document"})}),n&&(0,c.jsx)("div",{className:"document-generator-wrapper",children:(0,c.jsx)(ae,{initialData:s,onGenerate:n=>{const r={id:Date.now(),...n,createdAt:(new Date).toISOString()};t([r,...e]),i(!1)},onCancel:()=>i(!1)})}),(0,c.jsxs)("div",{className:"documents-list",children:[(0,c.jsx)("h3",{children:"Documents g\xe9n\xe9r\xe9s"}),0===e.length?(0,c.jsx)("p",{children:"Aucun document g\xe9n\xe9r\xe9."}):(0,c.jsxs)("table",{className:"documents-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Titre"}),(0,c.jsx)("th",{children:"Type"}),(0,c.jsx)("th",{children:"Date de cr\xe9ation"}),(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsx)("tbody",{children:e.map((e=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.title}),(0,c.jsx)("td",{children:e.type}),(0,c.jsx)("td",{children:new Date(e.createdAt).toLocaleString()}),(0,c.jsxs)("td",{children:[(0,c.jsx)("button",{onClick:()=>{a(e),i(!0)},className:"view-btn",children:"Voir"}),(0,c.jsx)("button",{onClick:()=>{alert(`T\xe9l\xe9chargement du document "${e.title}" en cours...`)},className:"download-btn",children:"T\xe9l\xe9charger"})]})]},e.id)))})]})]})]})},le=()=>{const[e,t]=(0,r.useState)({artistsCollection:{exists:!1,count:0},programmersCollection:{exists:!1,count:0},concertsCollection:{exists:!1,count:0},error:null,loading:!0});(0,r.useEffect)((()=>{(async()=>{try{let e=await(0,j.GG)((0,j.rJ)(l.db,"artists"));const n=!e.empty,r=e.size;e=await(0,j.GG)((0,j.rJ)(l.db,"programmers"));const i=!e.empty,s=e.size;e=await(0,j.GG)((0,j.rJ)(l.db,"concerts"));const a=!e.empty,o=e.size;t({artistsCollection:{exists:n,count:r},programmersCollection:{exists:i,count:s},concertsCollection:{exists:a,count:o},error:null,loading:!1})}catch(e){console.error("Erreur lors du test des collections Firebase:",e),t({artistsCollection:{exists:!1,count:0},programmersCollection:{exists:!1,count:0},concertsCollection:{exists:!1,count:0},error:e.message,loading:!1})}})()}),[]);const n=t=>e.loading?(0,c.jsx)("span",{className:"status loading",children:"V\xe9rification..."}):e.error?(0,c.jsx)("span",{className:"status error",children:"Erreur"}):t.exists?(0,c.jsxs)("span",{className:"status success",children:["Existe (",t.count," \xe9l\xe9ments)"]}):(0,c.jsx)("span",{className:"status warning",children:"N'existe pas"});return(0,c.jsxs)("div",{className:"test-firebase-container",children:[(0,c.jsx)("h1",{children:"Test d'int\xe9gration Firebase"}),e.error&&(0,c.jsxs)("div",{className:"error-message",children:[(0,c.jsx)("h3",{children:"Erreur de connexion \xe0 Firebase"}),(0,c.jsx)("p",{children:e.error}),(0,c.jsx)("p",{children:"Mode de contournement d'authentification activ\xe9. Les donn\xe9es simul\xe9es seront utilis\xe9es."})]}),(0,c.jsxs)("div",{className:"test-results",children:[(0,c.jsx)("h2",{children:"\xc9tat des collections Firebase"}),(0,c.jsxs)("div",{className:"collection-status",children:[(0,c.jsx)("h3",{children:'Collection "artists"'}),n(e.artistsCollection),(0,c.jsx)("p",{children:"Cette collection stocke les informations sur les artistes."})]}),(0,c.jsxs)("div",{className:"collection-status",children:[(0,c.jsx)("h3",{children:'Collection "programmers"'}),n(e.programmersCollection),(0,c.jsx)("p",{children:"Cette collection stocke les informations sur les programmateurs."})]}),(0,c.jsxs)("div",{className:"collection-status",children:[(0,c.jsx)("h3",{children:'Collection "concerts"'}),n(e.concertsCollection),(0,c.jsx)("p",{children:"Cette collection stocke les informations sur les concerts."})]})]}),(0,c.jsxs)("div",{className:"test-info",children:[(0,c.jsx)("h2",{children:"Informations sur le mode de test"}),(0,c.jsx)("p",{children:"L'application est configur\xe9e pour fonctionner m\xeame en cas d'erreur d'authentification Firebase. Si les collections n'existent pas ou si l'authentification \xe9choue, des donn\xe9es simul\xe9es seront utilis\xe9es."}),(0,c.jsx)("p",{children:"Pour cr\xe9er les collections automatiquement, utilisez les formulaires d'ajout dans les pages correspondantes :"}),(0,c.jsxs)("ul",{children:[(0,c.jsx)("li",{children:"Ajoutez un artiste depuis la page Artistes"}),(0,c.jsx)("li",{children:"Ajoutez un programmateur depuis la page Programmateurs"}),(0,c.jsx)("li",{children:"Ajoutez un concert depuis la page Concerts"})]})]})]})};var ce=n(959);const ue=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[s,a]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{try{i(!0);const e=await(0,ce._1)();t(e),i(!1)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des formulaires:",e),a(e.message),i(!1)}})()}),[]);const p=()=>{l(null),d(!1)},m=e=>{if(!e)return"Date inconnue";return(e instanceof Date?e:new Date(e.seconds?1e3*e.seconds:e)).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})};return n?(0,c.jsx)("div",{className:"loading",children:"Chargement des formulaires..."}):s?(0,c.jsxs)("div",{className:"error-message",children:["Erreur: ",s]}):(0,c.jsxs)("div",{className:"form-validation-container",children:[(0,c.jsxs)("div",{className:"form-validation-header",children:[(0,c.jsx)("h2",{children:"Validation des Formulaires"}),(0,c.jsx)("div",{className:"header-actions",children:(0,c.jsxs)("button",{className:"refresh-button",onClick:()=>window.location.reload(),children:[(0,c.jsx)("i",{className:"fas fa-sync-alt"})," Rafra\xeechir"]})})]}),0===e.length?(0,c.jsx)("p",{className:"no-results",children:"Aucun formulaire en attente de validation."}):(0,c.jsx)("div",{className:"form-submissions-table-container",children:(0,c.jsxs)("table",{className:"form-submissions-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Date de soumission"}),(0,c.jsx)("th",{children:"Programmateur"}),(0,c.jsx)("th",{children:"Raison sociale"}),(0,c.jsx)("th",{children:"Contact"}),(0,c.jsx)("th",{children:"Statut"}),(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsx)("tbody",{children:e.map((e=>(0,c.jsxs)("tr",{className:"pending"===e.status?"pending-row":"",children:[(0,c.jsx)("td",{children:m(e.submittedAt)}),(0,c.jsx)("td",{children:e.programmerId?e.programmerName:"Non associ\xe9"}),(0,c.jsx)("td",{children:e.businessName||"Non sp\xe9cifi\xe9"}),(0,c.jsx)("td",{children:e.contact||"Non sp\xe9cifi\xe9"}),(0,c.jsx)("td",{children:(0,c.jsxs)("span",{className:`status-badge status-${e.status}`,children:["pending"===e.status&&"En attente","processed"===e.status&&"Trait\xe9","rejected"===e.status&&"Rejet\xe9"]})}),(0,c.jsx)("td",{children:(0,c.jsxs)("button",{className:"view-form-btn",onClick:()=>(e=>{l(e),d(!0)})(e),disabled:"pending"!==e.status,children:[(0,c.jsx)("i",{className:"fas fa-eye"})," Voir"]})})]},e.id)))})]})}),u&&o&&(0,c.jsx)("div",{className:"form-modal-overlay",children:(0,c.jsxs)("div",{className:"form-modal",children:[(0,c.jsxs)("div",{className:"form-modal-header",children:[(0,c.jsx)("h3",{children:"D\xe9tails du formulaire"}),(0,c.jsx)("button",{className:"close-modal-btn",onClick:p,children:(0,c.jsx)("i",{className:"fas fa-times"})})]}),(0,c.jsxs)("div",{className:"form-modal-content",children:[(0,c.jsxs)("div",{className:"form-data-section",children:[(0,c.jsx)("h4",{children:"Informations soumises"}),(0,c.jsxs)("div",{className:"form-data-grid",children:[(0,c.jsxs)("div",{className:"form-data-item",children:[(0,c.jsx)("span",{className:"form-data-label",children:"Raison sociale:"}),(0,c.jsx)("span",{className:"form-data-value",children:o.businessName||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"form-data-item",children:[(0,c.jsx)("span",{className:"form-data-label",children:"Contact:"}),(0,c.jsx)("span",{className:"form-data-value",children:o.contact||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"form-data-item",children:[(0,c.jsx)("span",{className:"form-data-label",children:"Qualit\xe9:"}),(0,c.jsx)("span",{className:"form-data-value",children:o.role||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"form-data-item",children:[(0,c.jsx)("span",{className:"form-data-label",children:"Adresse:"}),(0,c.jsx)("span",{className:"form-data-value",children:o.address||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"form-data-item",children:[(0,c.jsx)("span",{className:"form-data-label",children:"Lieu/Festival:"}),(0,c.jsx)("span",{className:"form-data-value",children:o.venue||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"form-data-item",children:[(0,c.jsx)("span",{className:"form-data-label",children:"N\xb0 intracommunautaire:"}),(0,c.jsx)("span",{className:"form-data-value",children:o.vatNumber||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"form-data-item",children:[(0,c.jsx)("span",{className:"form-data-label",children:"SIRET:"}),(0,c.jsx)("span",{className:"form-data-value",children:o.siret||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"form-data-item",children:[(0,c.jsx)("span",{className:"form-data-label",children:"Email:"}),(0,c.jsx)("span",{className:"form-data-value",children:o.email||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"form-data-item",children:[(0,c.jsx)("span",{className:"form-data-label",children:"T\xe9l\xe9phone:"}),(0,c.jsx)("span",{className:"form-data-value",children:o.phone||"Non sp\xe9cifi\xe9"})]}),(0,c.jsxs)("div",{className:"form-data-item",children:[(0,c.jsx)("span",{className:"form-data-label",children:"Site web:"}),(0,c.jsx)("span",{className:"form-data-value",children:o.website?(0,c.jsx)("a",{href:o.website,target:"_blank",rel:"noopener noreferrer",children:o.website}):"Non sp\xe9cifi\xe9"})]})]})]}),o.programmerId&&(0,c.jsxs)("div",{className:"form-actions-section",children:[(0,c.jsx)("h4",{children:"Actions"}),(0,c.jsxs)("div",{className:"form-action-buttons",children:[(0,c.jsx)("button",{className:"integrate-data-btn",onClick:()=>(async(e,n)=>{try{f(!0);const r=await F(n);if(!r)throw new Error("Programmateur non trouv\xe9");const i={...r,businessName:e.businessName||r.businessName,contact:e.contact||r.contact,role:e.role||r.role,address:e.address||r.address,venue:e.venue||r.venue,vatNumber:e.vatNumber||r.vatNumber,siret:e.siret||r.siret,email:e.email||r.email,phone:e.phone||r.phone,website:e.website||r.website};await U(n,i),await(0,ce.Ay)(e.id,{status:"processed",processedAt:new Date}),t((t=>t.map((t=>t.id===e.id?{...t,status:"processed",processedAt:new Date}:t)))),p(),f(!1),alert("Les donn\xe9es ont \xe9t\xe9 int\xe9gr\xe9es avec succ\xe8s \xe0 la fiche du programmateur.")}catch(r){console.error("Erreur lors de l'int\xe9gration des donn\xe9es:",r),a(r.message),f(!1),alert(`Erreur lors de l'int\xe9gration des donn\xe9es: ${r.message}`)}})(o,o.programmerId),disabled:h,children:h?"Traitement...":"Int\xe9grer les donn\xe9es"}),(0,c.jsx)("button",{className:"reject-form-btn",onClick:()=>(async e=>{try{f(!0),await(0,ce.Ay)(e,{status:"rejected",processedAt:new Date}),t((t=>t.map((t=>t.id===e?{...t,status:"rejected",processedAt:new Date}:t)))),p(),f(!1),alert("Le formulaire a \xe9t\xe9 rejet\xe9.")}catch(n){console.error("Erreur lors du rejet du formulaire:",n),a(n.message),f(!1),alert(`Erreur lors du rejet du formulaire: ${n.message}`)}})(o.id),disabled:h,children:h?"Traitement...":"Rejeter le formulaire"})]})]}),!o.programmerId&&(0,c.jsx)("div",{className:"form-warning-section",children:(0,c.jsxs)("p",{className:"warning-text",children:[(0,c.jsx)("i",{className:"fas fa-exclamation-triangle"}),"Ce formulaire n'est pas associ\xe9 \xe0 un programmateur existant."]})})]})]})})]})};let de=()=>(0,c.jsx)("div",{children:"Formulaire non disponible"}),he=()=>(0,c.jsx)("div",{children:"Formulaire soumis"});try{const e=n(386),t=n(188);de=e.default||e,he=t.default||t,console.log("Composants de formulaires publics charg\xe9s avec succ\xe8s")}catch(ge){console.warn("Impossible de charger les composants de formulaires publics:",ge.message)}const fe=e=>{let{children:t}=e;const{isAuthenticated:n,loading:r,bypassEnabled:i}=d();return r?(0,c.jsx)("div",{children:"Chargement..."}):i?(console.log("Mode bypass d'authentification activ\xe9 - Acc\xe8s autoris\xe9"),t):n?t:(0,c.jsx)(a.C5,{to:"/login"})};const pe=function(){const{bypassEnabled:e}=d();return(0,c.jsxs)("div",{className:"App",children:[(0,c.jsxs)(a.BV,{children:[(0,c.jsx)(a.qh,{path:"/form/:token",element:(0,c.jsx)(de,{})}),(0,c.jsx)(a.qh,{path:"/form-submitted",element:(0,c.jsx)(he,{})}),(0,c.jsx)(a.qh,{path:"/login",element:e?(0,c.jsx)(a.C5,{to:"/"}):(0,c.jsx)(C,{})}),(0,c.jsxs)(a.qh,{path:"/",element:(0,c.jsx)(fe,{children:(0,c.jsx)(T,{})}),children:[(0,c.jsx)(a.qh,{index:!0,element:(0,c.jsx)(P,{})}),(0,c.jsx)(a.qh,{path:"contrats",element:(0,c.jsx)(D,{})}),(0,c.jsx)(a.qh,{path:"factures",element:(0,c.jsx)("div",{children:"Module Factures \xe0 venir"})}),(0,c.jsx)(a.qh,{path:"programmateurs",element:(0,c.jsx)(V,{})}),(0,c.jsx)(a.qh,{path:"programmateurs/:id",element:(0,c.jsx)($,{})}),(0,c.jsx)(a.qh,{path:"concerts",element:(0,c.jsx)(Z,{})}),(0,c.jsx)(a.qh,{path:"concerts/:id",element:(0,c.jsx)(te,{})}),(0,c.jsx)(a.qh,{path:"artistes",element:(0,c.jsx)(ne,{})}),(0,c.jsx)(a.qh,{path:"artistes/:id",element:(0,c.jsx)(re,{})}),(0,c.jsx)(a.qh,{path:"emails",element:(0,c.jsx)(se,{})}),(0,c.jsx)(a.qh,{path:"documents",element:(0,c.jsx)(oe,{})}),(0,c.jsx)(a.qh,{path:"validation-formulaires",element:(0,c.jsx)(ue,{})}),(0,c.jsx)(a.qh,{path:"tests",element:(0,c.jsx)(le,{})})]}),(0,c.jsx)(a.qh,{path:"*",element:(0,c.jsx)(I,{})})]}),e&&(0,c.jsx)("div",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"#fff3cd",color:"#856404",padding:"10px",textAlign:"center",borderTop:"1px solid #ffeeba",zIndex:1e3},children:"Mode test activ\xe9 - Authentification d\xe9sactiv\xe9e"})]})};s.createRoot(document.getElementById("root")).render((0,c.jsx)(r.StrictMode,{children:(0,c.jsx)(x,{children:(0,c.jsx)(f,{children:(0,c.jsx)(pe,{})})})}))})();
//# sourceMappingURL=main.e30f3129.js.map